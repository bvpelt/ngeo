(function(){'use strict';var m,t=this;function ba(b){return void 0!==b}function ca(){}
function da(b){var c=typeof b;if("object"==c)if(b){if(b instanceof Array)return"array";if(b instanceof Object)return c;var d=Object.prototype.toString.call(b);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof b.length&&"undefined"!=typeof b.splice&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof b.call&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof b.call)return"object";return c}function ea(b){return"array"==da(b)}function fa(b){var c=da(b);return"array"==c||"object"==c&&"number"==typeof b.length}function ga(b){return"string"==typeof b}function ha(b){return"number"==typeof b}function ia(b){return"function"==da(b)}function ka(b){var c=typeof b;return"object"==c&&null!=b||"function"==c}function w(b){return b[la]||(b[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;
function na(b,c,d){return b.call.apply(b.bind,arguments)}function oa(b,c,d){if(!b)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,e);return b.apply(c,d)}}return function(){return b.apply(c,arguments)}}function pa(b,c,d){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(b,c){var d=Array.prototype.slice.call(arguments,1);return function(){var c=d.slice();c.push.apply(c,arguments);return b.apply(this,c)}}var ra=Date.now||function(){return+new Date};function sa(b,c){var d=b.split("."),e=t;d[0]in e||!e.execScript||e.execScript("var "+d[0]);for(var f;d.length&&(f=d.shift());)!d.length&&ba(c)?e[f]=c:e[f]?e=e[f]:e=e[f]={}}
function y(b,c){function d(){}d.prototype=c.prototype;b.U=c.prototype;b.prototype=new d;b.prototype.constructor=b;b.ck=function(b,d,g){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return c.prototype[d].apply(b,h)}};var A=angular.module("ngeo",[]);var B=angular.module("gmf",[A.name,"gettext","ngAnimate","ngTouch"]);var ta=angular.module("app",[B.name]);var ua;var va=String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function wa(b){if(!xa.test(b))return b;-1!=b.indexOf("&")&&(b=b.replace(ya,"&amp;"));-1!=b.indexOf("<")&&(b=b.replace(Aa,"&lt;"));-1!=b.indexOf(">")&&(b=b.replace(Ba,"&gt;"));-1!=b.indexOf('"')&&(b=b.replace(Ca,"&quot;"));-1!=b.indexOf("'")&&(b=b.replace(Da,"&#39;"));-1!=b.indexOf("\x00")&&(b=b.replace(Ea,"&#0;"));return b}
var ya=/&/g,Aa=/</g,Ba=/>/g,Ca=/"/g,Da=/'/g,Ea=/\x00/g,xa=/[\x00&<>"']/,Fa=String.prototype.repeat?function(b,c){return b.repeat(c)}:function(b,c){return Array(c+1).join(b)};function Ga(b,c,d){b=ba(d)?b.toFixed(d):String(b);d=b.indexOf(".");-1==d&&(d=b.length);return Fa("0",Math.max(0,c-d))+b}function Ha(b){return Array.prototype.join.call(arguments,"")}
function Ia(b,c){for(var d=0,e=va(String(b)).split("."),f=va(String(c)).split("."),g=Math.max(e.length,f.length),h=0;0==d&&h<g;h++){var k=e[h]||"",l=f[h]||"",n=/(\d*)(\D*)/g,q=/(\d*)(\D*)/g;do{var p=n.exec(k)||["","",""],r=q.exec(l)||["","",""];if(0==p[0].length&&0==r[0].length)break;d=Ja(0==p[1].length?0:parseInt(p[1],10),0==r[1].length?0:parseInt(r[1],10))||Ja(0==p[2].length,0==r[2].length)||Ja(p[2],r[2])}while(0==d)}return d}function Ja(b,c){return b<c?-1:b>c?1:0};function Ka(b,c,d){Array.prototype.forEach.call(b,c,d)}function La(b,c){return Array.prototype.filter.call(b,c,void 0)}function Ma(b,c){var d;a:{d=b.length;for(var e=ga(b)?b.split(""):b,f=0;f<d;f++)if(f in e&&c.call(void 0,e[f],f,b)){d=f;break a}d=-1}return 0>d?null:ga(b)?b.charAt(d):b[d]}function Na(b,c){return 0<=Array.prototype.indexOf.call(b,c,void 0)}function Oa(b,c){var d=Array.prototype.indexOf.call(b,c,void 0),e;(e=0<=d)&&Array.prototype.splice.call(b,d,1);return e}
function Pa(b){return Array.prototype.concat.apply(Array.prototype,arguments)}function Qa(b){var c=b.length;if(0<c){for(var d=Array(c),e=0;e<c;e++)d[e]=b[e];return d}return[]}function Ra(b,c,d){return 2>=arguments.length?Array.prototype.slice.call(b,c):Array.prototype.slice.call(b,c,d)};function Sa(b,c){this.type=b;this.target=c}Sa.prototype.preventDefault=Sa.prototype.stopPropagation=function(){this.Qi=!0};function Ta(b){b.stopPropagation()};var Ua="function"===typeof Object.assign?Object.assign:function(b,c){if(void 0===b||null===b)throw new TypeError("Cannot convert undefined or null to object");for(var d=Object(b),e=1,f=arguments.length;e<f;++e){var g=arguments[e];if(void 0!==g&&null!==g)for(var h in g)g.hasOwnProperty(h)&&(d[h]=g[h])}return d};function Va(b){for(var c in b)delete b[c]}function Wa(b){for(var c in b)return!1;return!c};var Xa="olm_"+(1E4*Math.random()|0);function Ya(b){function c(c){var e=b.listener,f=b.Ie||b.target;b.hb&&G(b);return e.call(f,c)}return b.Je=c}function Za(b,c,d,e){for(var f,g=0,h=b.length;g<h;++g)if(f=b[g],f.listener===c&&f.Ie===d)return e&&(f.deleteIndex=g),f}function $a(b,c){var d=b[Xa];return d?d[c]:void 0}function ab(b){var c=b[Xa];c||(c=b[Xa]={});return c}
function bb(b,c){var d=$a(b,c);if(d){for(var e=0,f=d.length;e<f;++e)b.removeEventListener(c,d[e].Je),Va(d[e]);d.length=0;if(d=b[Xa])delete d[c],0===Object.keys(d).length&&delete b[Xa]}}function I(b,c,d,e,f){var g=ab(b),h=g[c];h||(h=g[c]=[]);(g=Za(h,d,e,!1))?f||(g.hb=!1):(g={Ie:e,hb:!!f,listener:d,target:b,type:c},b.addEventListener(c,Ya(g)),h.push(g));return g}function cb(b,c,d,e){(b=$a(b,c))&&(d=Za(b,d,e,!0))&&G(d)}
function G(b){if(b&&b.target){b.target.removeEventListener(b.type,b.Je);var c=$a(b.target,b.type);if(c){var d="deleteIndex"in b?b.deleteIndex:c.indexOf(b);-1!==d&&c.splice(d,1);0===c.length&&bb(b.target,b.type)}Va(b)}};function db(){0!=eb&&(fb[w(this)]=this);this.Z=this.Z;this.W=this.W}var eb=0,fb={};db.prototype.Z=!1;db.prototype.Db=function(){if(!this.Z&&(this.Z=!0,this.L(),0!=eb)){var b=w(this);delete fb[b]}};function gb(b,c){b.Z?c.call(void 0):(b.W||(b.W=[]),b.W.push(ba(void 0)?pa(c,void 0):c))}db.prototype.L=function(){if(this.W)for(;this.W.length;)this.W.shift()()};function hb(b){b&&"function"==typeof b.Db&&b.Db()};function ib(){db.call(this);this.N={}}y(ib,db);ib.prototype.addEventListener=function(b,c){var d=this.N[b];d||(d=this.N[b]=[]);-1===d.indexOf(c)&&d.unshift(c)};ib.prototype.B=function(b){b="string"===typeof b?new Sa(b):b;var c=b.type;b.target=this;if(c=this.N[c])for(var d=c.length-1;0<=d;--d)if(!1===c[d].call(this,b)||b.Qi)return!1};ib.prototype.L=function(){var b=ab(this),c;for(c in b)bb(this,c);ib.U.L.call(this)};function jb(b,c){return c?c in b.N:0<Object.keys(b.N).length}
ib.prototype.removeEventListener=function(b,c){var d=this.N[b];d&&(d.splice(d.indexOf(c),1),0===d.length&&delete this.N[b])};function kb(){ib.call(this);this.f=0}y(kb,ib);kb.prototype.b=function(){++this.f;this.B("change")};kb.prototype.on=function(b,c,d){if(Array.isArray(b)){for(var e=b.length,f=Array(e),g=0;g<e;++g)f[g]=I(this,b[g],c,d);return f}return I(this,b,c,d)};function lb(b,c,d){Sa.call(this,b);this.key=c;this.oldValue=d}y(lb,Sa);function mb(b){kb.call(this);w(this);this.u={};void 0!==b&&this.ka(b)}y(mb,kb);var nb={};function L(b){return nb.hasOwnProperty(b)?nb[b]:nb[b]="change:"+b}mb.prototype.get=function(b){var c;this.u.hasOwnProperty(b)&&(c=this.u[b]);return c};mb.prototype.ya=function(){return Object.keys(this.u)};
mb.prototype.set=function(b,c,d){d?this.u[b]=c:(d=this.u[b],this.u[b]=c,d!==c&&(c=L(b),this.B(new lb(c,b,d)),this.B(new lb("propertychange",b,d))))};mb.prototype.ka=function(b,c){for(var d in b)this.set(d,b[d],c)};function ob(b,c,d){Sa.call(this,b,d);this.element=c}y(ob,Sa);function pb(b){mb.call(this);this.a=b?b:[];qb(this)}y(pb,mb);m=pb.prototype;m.clear=function(){for(;0<this.get("length");)this.pop()};m.extend=function(b){var c,d;c=0;for(d=b.length;c<d;++c)this.push(b[c]);return this};m.forEach=function(b,c){this.a.forEach(b,c)};m.item=function(b){return this.a[b]};function rb(b,c,d){b.a.splice(c,0,d);qb(b);b.B(new ob("add",d,b))}m.pop=function(){return sb(this,this.get("length")-1)};
m.push=function(b){var c=this.a.length;rb(this,c,b);return c};m.remove=function(b){var c=this.a,d,e;d=0;for(e=c.length;d<e;++d)if(c[d]===b)return sb(this,d)};function sb(b,c){var d=b.a[c];b.a.splice(c,1);qb(b);b.B(new ob("remove",d,b));return d}function qb(b){b.set("length",b.a.length)};function tb(b){this.length=b.length||b;for(var c=0;c<this.length;c++)this[c]=b[c]||0}tb.prototype.a=4;tb.prototype.set=function(b,c){c=c||0;for(var d=0;d<b.length&&c+d<this.length;d++)this[c+d]=b[d]};tb.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(tb.BYTES_PER_ELEMENT=4,tb.prototype.BYTES_PER_ELEMENT=tb.prototype.a,tb.prototype.set=tb.prototype.set,tb.prototype.toString=tb.prototype.toString,sa("Float32Array",tb));function ub(b){this.length=b.length||b;for(var c=0;c<this.length;c++)this[c]=b[c]||0}ub.prototype.a=8;ub.prototype.set=function(b,c){c=c||0;for(var d=0;d<b.length&&c+d<this.length;d++)this[c+d]=b[d]};ub.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{ub.BYTES_PER_ELEMENT=8}catch(b){}ub.prototype.BYTES_PER_ELEMENT=ub.prototype.a;ub.prototype.set=ub.prototype.set;ub.prototype.toString=ub.prototype.toString;sa("Float64Array",ub)};function vb(){var b=Array(16);b[0]=0;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=0;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=0;return b}
function wb(b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],n=b[7],q=b[8],p=b[9],r=b[10],u=b[11],v=b[12],z=b[13],x=b[14],C=b[15],H=d*k-e*h,E=d*l-f*h,D=d*n-g*h,R=e*l-f*k,F=e*n-g*k,M=f*n-g*l,T=q*z-p*v,K=q*x-r*v,Z=q*C-u*v,X=p*x-r*z,W=p*C-u*z,J=r*C-u*x,aa=H*J-E*W+D*X+R*Z-F*K+M*T;0!=aa&&(aa=1/aa,c[0]=(k*J-l*W+n*X)*aa,c[1]=(-e*J+f*W-g*X)*aa,c[2]=(z*M-x*F+C*R)*aa,c[3]=(-p*M+r*F-u*R)*aa,c[4]=(-h*J+l*Z-n*K)*aa,c[5]=(d*J-f*Z+g*K)*aa,c[6]=(-v*M+x*D-C*E)*aa,c[7]=(q*M-r*D+u*E)*aa,c[8]=(h*W-k*Z+n*T)*
aa,c[9]=(-d*W+e*Z-g*T)*aa,c[10]=(v*F-z*D+C*H)*aa,c[11]=(-q*F+p*D-u*H)*aa,c[12]=(-h*X+k*K-l*T)*aa,c[13]=(d*X-e*K+f*T)*aa,c[14]=(-v*R+z*E-x*H)*aa,c[15]=(q*R-p*E+r*H)*aa)}function xb(b,c,d){var e=b[1]*c+b[5]*d+0*b[9]+b[13],f=b[2]*c+b[6]*d+0*b[10]+b[14],g=b[3]*c+b[7]*d+0*b[11]+b[15];b[12]=b[0]*c+b[4]*d+0*b[8]+b[12];b[13]=e;b[14]=f;b[15]=g}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);function yb(b,c){var d=b%c;return 0>d*c?d+c:d};function zb(b,c){b[0]+=c[0];b[1]+=c[1]}function Ab(b,c){var d=Math.cos(c),e=Math.sin(c),f=b[1]*d+b[0]*e;b[0]=b[0]*d-b[1]*e;b[1]=f};function Bb(b,c){if(ea(b))return b;void 0===c?c=[b,b]:(c[0]=b,c[1]=b);return c};function Db(b){for(var c=Eb(),d=0,e=b.length;d<e;++d)Fb(c,b[d]);return c}function Gb(b,c,d){return d?(d[0]=b[0]-c,d[1]=b[1]-c,d[2]=b[2]+c,d[3]=b[3]+c,d):[b[0]-c,b[1]-c,b[2]+c,b[3]+c]}function Hb(b,c){return c?(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c):b.slice()}function Ib(b,c){return b[0]<=c[0]&&c[2]<=b[2]&&b[1]<=c[1]&&c[3]<=b[3]}function Eb(){return[Infinity,Infinity,-Infinity,-Infinity]}function Jb(b,c,d,e,f){return f?(f[0]=b,f[1]=c,f[2]=d,f[3]=e,f):[b,c,d,e]}
function Kb(b,c){return b[0]==c[0]&&b[2]==c[2]&&b[1]==c[1]&&b[3]==c[3]}function Lb(b,c){c[0]<b[0]&&(b[0]=c[0]);c[2]>b[2]&&(b[2]=c[2]);c[1]<b[1]&&(b[1]=c[1]);c[3]>b[3]&&(b[3]=c[3])}function Fb(b,c){c[0]<b[0]&&(b[0]=c[0]);c[0]>b[2]&&(b[2]=c[0]);c[1]<b[1]&&(b[1]=c[1]);c[1]>b[3]&&(b[3]=c[1])}function Mb(b,c,d,e,f){for(;d<e;d+=f){var g=b,h=c[d],k=c[d+1];g[0]=Math.min(g[0],h);g[1]=Math.min(g[1],k);g[2]=Math.max(g[2],h);g[3]=Math.max(g[3],k)}return b}
function Nb(b){var c=0;Ob(b)||(c=Pb(b)*Qb(b));return c}function Rb(b){return[(b[0]+b[2])/2,(b[1]+b[3])/2]}function Sb(b,c,d,e,f){var g=c*e[0]/2;e=c*e[1]/2;c=Math.cos(d);var h=Math.sin(d);d=g*c;g*=h;c*=e;var k=e*h,l=b[0],n=b[1];b=l-d+k;e=l-d-k;h=l+d-k;d=l+d+k;var k=n-g-c,l=n-g+c,q=n+g+c,g=n+g-c;return Jb(Math.min(b,e,h,d),Math.min(k,l,q,g),Math.max(b,e,h,d),Math.max(k,l,q,g),f)}function Qb(b){return b[3]-b[1]}
function Tb(b,c){var d=Eb();Ub(b,c)&&(d[0]=b[0]>c[0]?b[0]:c[0],d[1]=b[1]>c[1]?b[1]:c[1],d[2]=b[2]<c[2]?b[2]:c[2],d[3]=b[3]<c[3]?b[3]:c[3]);return d}function Pb(b){return b[2]-b[0]}function Ub(b,c){return b[0]<=c[2]&&b[2]>=c[0]&&b[1]<=c[3]&&b[3]>=c[1]}function Ob(b){return b[2]<b[0]||b[3]<b[1]};function Vb(b){return b.getAttributeNS("http://www.w3.org/1999/xlink","href")};var Wb;a:{var Xb=t.navigator;if(Xb){var Yb=Xb.userAgent;if(Yb){Wb=Yb;break a}}Wb=""}function Zb(b){return-1!=Wb.indexOf(b)};function $b(b,c,d){for(var e in b)c.call(d,b[e],e,b)}function ac(b){var c=[],d=0,e;for(e in b)c[d++]=b[e];return c}function bc(b){var c=[],d=0,e;for(e in b)c[d++]=e;return c}function cc(b){var c={},d;for(d in b)c[d]=b[d];return c}var dc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function ec(b,c){for(var d,e,f=1;f<arguments.length;f++){e=arguments[f];for(d in e)b[d]=e[d];for(var g=0;g<dc.length;g++)d=dc[g],Object.prototype.hasOwnProperty.call(e,d)&&(b[d]=e[d])}};var fc=Zb("Opera")||Zb("OPR"),gc=Zb("Trident")||Zb("MSIE"),hc=Zb("Edge"),ic=Zb("Gecko")&&!(-1!=Wb.toLowerCase().indexOf("webkit")&&!Zb("Edge"))&&!(Zb("Trident")||Zb("MSIE"))&&!Zb("Edge"),jc=-1!=Wb.toLowerCase().indexOf("webkit")&&!Zb("Edge"),kc=Zb("Macintosh");function lc(){var b=Wb;if(ic)return/rv\:([^\);]+)(\)|;)/.exec(b);if(hc)return/Edge\/([\d\.]+)/.exec(b);if(gc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(b);if(jc)return/WebKit\/(\S+)/.exec(b)}
function mc(){var b=t.document;return b?b.documentMode:void 0}var nc=function(){if(fc&&t.opera){var b;var c=t.opera.version;try{b=c()}catch(d){b=c}return b}b="";(c=lc())&&(b=c?c[1]:"");return gc&&(c=mc(),null!=c&&c>parseFloat(b))?String(c):b}(),oc={};function pc(b){return oc[b]||(oc[b]=0<=Ia(nc,b))}var qc=t.document,rc=qc&&gc?mc()||("CSS1Compat"==qc.compatMode?parseInt(nc,10):5):void 0;var sc=!gc||9<=Number(rc),tc=!ic&&!gc||gc&&9<=Number(rc)||ic&&pc("1.9.1");gc&&pc("9");function uc(b,c){this.x=ba(b)?b:0;this.y=ba(c)?c:0}m=uc.prototype;m.clone=function(){return new uc(this.x,this.y)};m.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};m.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};m.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};m.translate=function(b,c){b instanceof uc?(this.x+=b.x,this.y+=b.y):(this.x+=Number(b),ha(c)&&(this.y+=c));return this};
m.scale=function(b,c){var d=ha(c)?c:b;this.x*=b;this.y*=d;return this};function vc(b,c){this.width=b;this.height=c}m=vc.prototype;m.clone=function(){return new vc(this.width,this.height)};m.area=function(){return this.width*this.height};m.Ia=function(){return!this.area()};m.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};m.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};m.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
m.scale=function(b,c){var d=ha(c)?c:b;this.width*=b;this.height*=d;return this};function wc(b){return b?new xc(yc(b)):ua||(ua=new xc)}function zc(b){var c=document;return ga(b)?c.getElementById(b):b}function Ac(b,c){var d=c||document,e=null;d.getElementsByClassName?e=d.getElementsByClassName(b)[0]:d.querySelectorAll&&d.querySelector?e=d.querySelector("."+b):e=Bc(b,c)[0];return e||null}
function Bc(b,c){var d,e,f,g;d=document;d=c||d;if(d.querySelectorAll&&d.querySelector&&b)return d.querySelectorAll(""+(b?"."+b:""));if(b&&d.getElementsByClassName){var h=d.getElementsByClassName(b);return h}h=d.getElementsByTagName("*");if(b){g={};for(e=f=0;d=h[e];e++){var k=d.className;"function"==typeof k.split&&Na(k.split(/\s+/),b)&&(g[f++]=d)}g.length=f;return g}return h}
function Cc(b,c){$b(c,function(c,e){"style"==e?b.style.cssText=c:"class"==e?b.className=c:"for"==e?b.htmlFor=c:Dc.hasOwnProperty(e)?b.setAttribute(Dc[e],c):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?b.setAttribute(e,c):b[e]=c})}var Dc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Ec(b,c,d){var e=arguments,f=document,g=e[0],h=e[1];if(!sc&&h&&(h.name||h.type)){g=["<",g];h.name&&g.push(' name="',wa(h.name),'"');if(h.type){g.push(' type="',wa(h.type),'"');var k={};ec(k,h);delete k.type;h=k}g.push(">");g=g.join("")}g=f.createElement(g);h&&(ga(h)?g.className=h:ea(h)?g.className=h.join(" "):Cc(g,h));2<e.length&&Fc(f,g,e,2);return g}
function Fc(b,c,d,e){function f(d){d&&c.appendChild(ga(d)?b.createTextNode(d):d)}for(;e<d.length;e++){var g=d[e];!fa(g)||ka(g)&&0<g.nodeType?f(g):Ka(Gc(g)?Qa(g):g,f)}}function Hc(b){for(var c;c=b.firstChild;)b.removeChild(c)}function Ic(b){b&&b.parentNode&&b.parentNode.removeChild(b)}function Jc(b){return tc&&void 0!=b.children?b.children:La(b.childNodes,function(b){return 1==b.nodeType})}
function Kc(b){if(ba(b.nextElementSibling))b=b.nextElementSibling;else for(b=b.nextSibling;b&&1!=b.nodeType;)b=b.nextSibling;return b}function Lc(b,c){if(!b||!c)return!1;if(b.contains&&1==c.nodeType)return b==c||b.contains(c);if("undefined"!=typeof b.compareDocumentPosition)return b==c||!!(b.compareDocumentPosition(c)&16);for(;c&&b!=c;)c=c.parentNode;return c==b}function yc(b){return 9==b.nodeType?b:b.ownerDocument||b.document}
function Gc(b){if(b&&"number"==typeof b.length){if(ka(b))return"function"==typeof b.item||"string"==typeof b.item;if(ia(b))return"function"==typeof b.item}return!1}function xc(b){this.a=b||t.document||document}m=xc.prototype;m.ka=Cc;
function Mc(b){var c=b.a;b=c.scrollingElement?c.scrollingElement:jc?c.body||c.documentElement:c.documentElement;c=c.parentWindow||c.defaultView;return gc&&pc("10")&&c.pageYOffset!=b.scrollTop?new uc(b.scrollLeft,b.scrollTop):new uc(c.pageXOffset||b.scrollLeft,c.pageYOffset||b.scrollTop)}m.appendChild=function(b,c){b.appendChild(c)};m.append=function(b,c){Fc(yc(b),b,arguments,1)};m.isElement=function(b){return ka(b)&&1==b.nodeType};m.contains=Lc;function Nc(){if(!gc)return!1;try{return new ActiveXObject("MSXML2.DOMDocument"),!0}catch(b){return!1}}var Oc=gc&&Nc();function Qc(b,c){return b>c?1:b<c?-1:0}function Rc(b,c,d){var e=b.length;if(b[0]<=c)return 0;if(!(c<=b[e-1]))if(0<d)for(d=1;d<e;++d){if(b[d]<c)return d-1}else if(0>d)for(d=1;d<e;++d){if(b[d]<=c)return d}else for(d=1;d<e;++d){if(b[d]==c)return d;if(b[d]<c)return b[d-1]-c<c-b[d]?d-1:d}return e-1}function Sc(b,c){var d,e=fa(c)?c:[c],f=e.length;for(d=0;d<f;d++)b[b.length]=e[d]}function Tc(b,c){var d=b.indexOf(c),e=-1<d;e&&b.splice(d,1);return e}
function Uc(b,c){for(var d=b.length>>>0,e,f=0;f<d;f++)if(e=b[f],c(e,f,b))return e;return null}function Vc(b,c){var d=b.length;if(d!==c.length)return!1;for(var e=0;e<d;e++)if(b[e]!==c[e])return!1;return!0}function Wc(b){var c=Xc,d=b.length,e=Array(b.length),f;for(f=0;f<d;f++)e[f]={index:f,value:b[f]};e.sort(function(b,d){return c(b.value,d.value)||b.index-d.index});for(f=0;f<b.length;f++)b[f]=e[f].value}function Yc(b,c){var d;return b.every(function(e,f){d=f;return!c(e,f,b)})?-1:d};var Zc;a:if(document.implementation&&document.implementation.createDocument)Zc=document.implementation.createDocument("","",null);else{if(Oc){var $c=new ActiveXObject("MSXML2.DOMDocument");$c.resolveExternals=!1;$c.validateOnParse=!1;try{$c.setProperty("ProhibitDTD",!0),$c.setProperty("MaxXMLSize",2048),$c.setProperty("MaxElementDepth",256)}catch(b){}if($c){Zc=$c;break a}}throw Error("Your browser does not support creating new documents");}var ad=Zc;
function bd(b,c){return ad.createElementNS(b,c)}function cd(b,c){b||(b="");return ad.createNode(1,c,b)}var dd=document.implementation&&document.implementation.createDocument?bd:cd;function ed(b){return fd(b,!1,[]).join("")}function fd(b,c,d){if(4==b.nodeType||3==b.nodeType)c?d.push(String(b.nodeValue).replace(/(\r\n|\r|\n)/g,"")):d.push(b.nodeValue);else for(b=b.firstChild;b;b=b.nextSibling)fd(b,c,d);return d}function gd(b){return b.localName}
function hd(b){var c=b.localName;return void 0!==c?c:b.baseName}var id=gc?hd:gd;function jd(b){return b instanceof Document}function kd(b){return ka(b)&&9==b.nodeType}var ld=gc?kd:jd;function md(b){return b instanceof Node}function nd(b){return ka(b)&&void 0!==b.nodeType}var od=gc?nd:md;function pd(b,c,d){return b.getAttributeNS(c,d)||""}function qd(b,c,d){var e="";b=rd(b,c,d);void 0!==b&&(e=b.nodeValue);return e}var sd=document.implementation&&document.implementation.createDocument?pd:qd;
function td(b,c,d){return b.getAttributeNodeNS(c,d)}function ud(b,c,d){var e=null;b=b.attributes;for(var f,g,h=0,k=b.length;h<k;++h)if(f=b[h],f.namespaceURI==c&&(g=f.prefix?f.prefix+":"+d:d,g==f.nodeName)){e=f;break}return e}var rd=document.implementation&&document.implementation.createDocument?td:ud;function vd(b,c,d,e){b.setAttributeNS(c,d,e)}function wd(b,c,d,e){c?(c=b.ownerDocument.createNode(2,d,c),c.nodeValue=e,b.setAttributeNode(c)):b.setAttribute(d,e)}
var xd=document.implementation&&document.implementation.createDocument?vd:wd;function zd(b){return(new DOMParser).parseFromString(b,"application/xml")}function Ad(b,c){return function(d,e){var f=b.call(void 0!==c?c:this,d,e);void 0!==f&&e[e.length-1].push(f)}}function Bd(b,c){return function(d,e){var f=b.call(void 0!==c?c:this,d,e);void 0!==f&&(e[e.length-1]=f)}}
function Cd(b){return function(c,d){var e=b.call(this,c,d);if(void 0!==e){var f=d[d.length-1],g=c.localName,h;g in f?h=f[g]:h=f[g]=[];h.push(e)}}}function N(b,c){return function(d,e){var f=b.call(this,d,e);void 0!==f&&(e[e.length-1][void 0!==c?c:d.localName]=f)}}function O(b){return function(c,d,e){b.call(this,c,d,e);e[e.length-1].node.appendChild(c)}}function Dd(b){var c,d;return function(e,f,g){if(void 0===c){c={};var h={};h[e.localName]=b;c[e.namespaceURI]=h;d=Ed(e.localName)}Fd(c,d,f,g)}}
function Ed(b){return function(c,d,e){c=d[d.length-1].node;d=b;void 0===d&&(d=e);e=void 0;e=c.namespaceURI;return dd(e,d)}}var Gd=Ed();function Hd(b,c){for(var d=c.length,e=Array(d),f=0;f<d;++f)e[f]=b[c[f]];return e}function P(b,c,d){d=void 0!==d?d:{};var e,f;e=0;for(f=b.length;e<f;++e)d[b[e]]=c;return d}function Id(b,c,d,e){for(c=c.firstElementChild;c;c=c.nextElementSibling){var f=b[c.namespaceURI];void 0!==f&&(f=f[c.localName],void 0!==f&&f.call(e,c,d))}}
function Q(b,c,d,e,f){e.push(b);Id(c,d,e,f);return e.pop()}function Fd(b,c,d,e,f,g){for(var h=(void 0!==f?f:d).length,k,l,n=0;n<h;++n)k=d[n],void 0!==k&&(l=c.call(g,k,e,void 0!==f?f[n]:void 0),void 0!==l&&b[l.namespaceURI][l.localName].call(g,l,k,e))}function Jd(b,c,d,e,f,g,h){f.push(b);Fd(c,d,e,f,g,h);f.pop()};function Kd(){}Kd.prototype.read=function(b){return ld(b)?this.b(b):od(b)?this.a(b):"string"===typeof b?(b=zd(b),this.b(b)):null};function Ld(){};function Md(b){b=ed(b);return Nd(b)}function Nd(b){if(b=/^\s*(true|1)|(false|0)\s*$/.exec(b))return void 0!==b[1]||!1}function Od(b){b=ed(b);if(b=/^\s*(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(Z|(?:([+\-])(\d{2})(?::(\d{2}))?))\s*$/.exec(b)){var c=Date.UTC(parseInt(b[1],10),parseInt(b[2],10)-1,parseInt(b[3],10),parseInt(b[4],10),parseInt(b[5],10),parseInt(b[6],10))/1E3;if("Z"!=b[7]){var d="-"==b[8]?-1:1,c=c+60*d*parseInt(b[9],10);void 0!==b[10]&&(c+=3600*d*parseInt(b[10],10))}return c}}
function Pd(b){b=ed(b);return Qd(b)}function Qd(b){if(b=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(b))return parseFloat(b[1])}function Rd(b){b=ed(b);return Sd(b)}function Sd(b){if(b=/^\s*(\d+)\s*$/.exec(b))return parseInt(b[1],10)}function S(b){return ed(b).trim()}function Td(b,c){Ud(b,c?"1":"0")}function Vd(b,c){b.appendChild(ad.createTextNode(c.toPrecision()))}function Wd(b,c){b.appendChild(ad.createTextNode(c.toString()))}function Ud(b,c){b.appendChild(ad.createTextNode(c))};function Xd(){}y(Xd,Kd);Xd.prototype.b=function(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType)return this.a(b);return null};Xd.prototype.a=function(b){return(b=Q({},Yd,b,[]))?b:null};
var Zd=[null,"http://www.opengis.net/ows/1.1"],Yd=P(Zd,{ServiceIdentification:N(function(b,c){return Q({},$d,b,c)}),ServiceProvider:N(function(b,c){return Q({},ae,b,c)}),OperationsMetadata:N(function(b,c){return Q({},be,b,c)})}),ce=P(Zd,{DeliveryPoint:N(S),City:N(S),AdministrativeArea:N(S),PostalCode:N(S),Country:N(S),ElectronicMailAddress:N(S)}),de=P(Zd,{Value:Cd(function(b){return S(b)})}),ee=P(Zd,{AllowedValues:N(function(b,c){return Q({},de,b,c)})}),ge=P(Zd,{Phone:N(function(b,c){return Q({},
fe,b,c)}),Address:N(function(b,c){return Q({},ce,b,c)})}),ie=P(Zd,{HTTP:N(function(b,c){return Q({},he,b,c)})}),he=P(Zd,{Get:Cd(function(b,c){var d=Vb(b);return d?Q({href:d},je,b,c):void 0}),Post:void 0}),ke=P(Zd,{DCP:N(function(b,c){return Q({},ie,b,c)})}),be=P(Zd,{Operation:function(b,c){var d=b.getAttribute("name"),e=Q({},ke,b,c);e&&(c[c.length-1][d]=e)}}),fe=P(Zd,{Voice:N(S),Facsimile:N(S)}),je=P(Zd,{Constraint:Cd(function(b,c){var d=b.getAttribute("name");return d?Q({name:d},ee,b,c):void 0})}),
le=P(Zd,{IndividualName:N(S),PositionName:N(S),ContactInfo:N(function(b,c){return Q({},ge,b,c)})}),$d=P(Zd,{Title:N(S),ServiceTypeVersion:N(S),ServiceType:N(S)}),ae=P(Zd,{ProviderName:N(S),ProviderSite:N(Vb),ServiceContact:N(function(b,c){return Q({},le,b,c)})});function me(){this.f=new Xd}y(me,Kd);me.prototype.b=function(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType)return this.a(b);return null};me.prototype.a=function(b){var c=b.getAttribute("version").trim(),d=this.f.a(b);if(!d)return null;d.version=c;return(d=Q(d,ne,b,[]))?d:null};function oe(b){var c=S(b).split(" ");if(c&&2==c.length)return b=+c[0],c=+c[1],isNaN(b)||isNaN(c)?void 0:[b,c]}
var pe=[null,"http://www.opengis.net/wmts/1.0"],qe=[null,"http://www.opengis.net/ows/1.1"],ne=P(pe,{Contents:N(function(b,c){return Q({},re,b,c)})}),re=P(pe,{Layer:Cd(function(b,c){return Q({},se,b,c)}),TileMatrixSet:Cd(function(b,c){return Q({},te,b,c)})}),se=P(pe,{Style:Cd(function(b,c){var d=Q({},we,b,c);if(d){var e="true"===b.getAttribute("isDefault");d.isDefault=e;return d}}),Format:Cd(S),TileMatrixSetLink:Cd(function(b,c){return Q({},xe,b,c)}),Dimension:Cd(function(b,c){return Q({},ye,b,c)}),
ResourceURL:Cd(function(b){var c=b.getAttribute("format"),d=b.getAttribute("template");b=b.getAttribute("resourceType");var e={};c&&(e.format=c);d&&(e.template=d);b&&(e.resourceType=b);return e})},P(qe,{Title:N(S),Abstract:N(S),WGS84BoundingBox:N(function(b,c){var d=Q([],ze,b,c);return 2!=d.length?void 0:Db(d)}),Identifier:N(S)})),we=P(pe,{LegendURL:Cd(function(b){var c={};c.format=b.getAttribute("format");c.href=Vb(b);return c})},P(qe,{Title:N(S),Identifier:N(S)})),xe=P(pe,{TileMatrixSet:N(S)}),
ye=P(pe,{Default:N(S),Value:Cd(S)},P(qe,{Identifier:N(S)})),ze=P(qe,{LowerCorner:Ad(oe),UpperCorner:Ad(oe)}),te=P(pe,{WellKnownScaleSet:N(S),TileMatrix:Cd(function(b,c){return Q({},Ae,b,c)})},P(qe,{SupportedCRS:N(S),Identifier:N(S)})),Ae=P(pe,{TopLeftCorner:N(oe),ScaleDenominator:N(Pd),TileWidth:N(Rd),TileHeight:N(Rd),MatrixWidth:N(Rd),MatrixHeight:N(Rd)},P(qe,{Identifier:N(S)}));function Be(b,c,d){return Math.min(Math.max(b,c),d)}var Ce=function(){var b;"cosh"in Math?b=Math.cosh:b=function(b){b=Math.exp(b);return(b+1/b)/2};return b}();function De(b,c,d,e){this.b=b;this.a=c;this.c=d;this.f=e}De.prototype.contains=function(b){return Ee(this,b[1],b[2])};function Ee(b,c,d){return b.b<=c&&c<=b.a&&b.c<=d&&d<=b.f}De.prototype.equals=function(b){return this.b==b.b&&this.c==b.c&&this.a==b.a&&this.f==b.f};De.prototype.extend=function(b){b.b<this.b&&(this.b=b.b);b.a>this.a&&(this.a=b.a);b.c<this.c&&(this.c=b.c);b.f>this.f&&(this.f=b.f)};function Fe(b,c){return b.b<=c.a&&b.a>=c.b&&b.c<=c.f&&b.f>=c.c};/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function Ge(b){this.radius=b}function He(b,c,d){var e=c[1]*Math.PI/180,f=d[1]*Math.PI/180,g=(f-e)/2;c=(d[0]-c[0])*Math.PI/180/2;e=Math.sin(g)*Math.sin(g)+Math.sin(c)*Math.sin(c)*Math.cos(e)*Math.cos(f);return 2*b.radius*Math.atan2(Math.sqrt(e),Math.sqrt(1-e))}
Ge.prototype.offset=function(b,c,d){var e=b[1]*Math.PI/180;c/=this.radius;var f=Math.asin(Math.sin(e)*Math.cos(c)+Math.cos(e)*Math.sin(c)*Math.cos(d));return[180*(b[0]*Math.PI/180+Math.atan2(Math.sin(d)*Math.sin(c)*Math.cos(e),Math.cos(c)-Math.sin(e)*Math.sin(f)))/Math.PI,180*f/Math.PI]};var Ie=new Ge(6370997);var Je={};Je.degrees=2*Math.PI*Ie.radius/360;Je.ft=.3048;Je.m=1;Je["us-ft"]=1200/3937;
function Ke(b){this.a=b.code;this.c=b.units;this.i=void 0!==b.extent?b.extent:null;this.g=void 0!==b.od?b.od:"enu";this.f=void 0!==b.global?b.global:!1;this.b=!(!this.f||!this.i);this.l=void 0!==b.lb?b.lb:this.s;this.j=null;this.u=b.lf;var c=Le,d=b.code,e=Me||t.proj4;if("function"==typeof e&&void 0===c[d]){var f=e.defs(d);if(void 0!==f){void 0!==f.axis&&void 0===b.od&&(this.g=f.axis);void 0===b.lf&&(this.u=f.to_meter);void 0===b.units&&(this.c=f.units);var g,h;for(g in c)if(b=e.defs(g),void 0!==b)if(c=
Ne(g),b===f)Oe([c,this]);else{h=e(g,d);b=h.forward;h=h.inverse;var c=Ne(c),k=Ne(this);Pe(c,k,Qe(b));Pe(k,c,Qe(h))}}}}function Re(b){return b.a}Ke.prototype.G=function(){return this.i};function Se(b){return b.u||Je[b.c]}function Te(b,c){b.i=c;b.b=!(!b.f||!c)}
Ke.prototype.s=function(b,c){if("degrees"==this.c)return b;var d=Ue(this,Ne("EPSG:4326")),e=[c[0]-b/2,c[1],c[0]+b/2,c[1],c[0],c[1]-b/2,c[0],c[1]+b/2],e=d(e,e,2),d=He(Ie,e.slice(0,2),e.slice(2,4)),e=He(Ie,e.slice(4,6),e.slice(6,8)),e=(d+e)/2,d=Se(this);void 0!==d&&(e/=d);return e};Ke.prototype.lb=function(b,c){return this.l(b,c)};var Le={},Ve={},Me=null;function Oe(b){We(b);b.forEach(function(c){b.forEach(function(b){c!==b&&Pe(c,b,Xe)})})}function Ye(b){Le[b.a]=b;Pe(b,b,Xe)}
function We(b){var c=[];b.forEach(function(b){c.push(Ye(b))})}function Ze(b){return b?"string"===typeof b?Ne(b):b:Ne("EPSG:3857")}function Pe(b,c,d){b=b.a;c=c.a;b in Ve||(Ve[b]={});Ve[b][c]=d}function Qe(b){return function(c,d,e){var f=c.length;e=void 0!==e?e:2;d=void 0!==d?d:Array(f);var g,h;for(h=0;h<f;h+=e)for(g=b([c[h],c[h+1]]),d[h]=g[0],d[h+1]=g[1],g=e-1;2<=g;--g)d[h+g]=c[h+g];return d}}
function Ne(b){var c;if(b instanceof Ke)c=b;else if("string"===typeof b){c=Le[b];var d=Me||t.proj4;void 0===c&&"function"==typeof d&&void 0!==d.defs(b)&&(c=new Ke({code:b}),Ye(c))}else c=null;return c}function $e(b,c){if(b===c)return!0;var d=b.c===c.c;return b.a===c.a?d:Ue(b,c)===Xe&&d}function af(b,c){var d=Ne(b),e=Ne(c);return Ue(d,e)}function Ue(b,c){var d=b.a,e=c.a,f;d in Ve&&e in Ve[d]&&(f=Ve[d][e]);void 0===f&&(f=bf);return f}
function bf(b,c){if(void 0!==c&&b!==c){for(var d=0,e=b.length;d<e;++d)c[d]=b[d];b=c}return b}function Xe(b,c){var d;if(void 0!==c){d=0;for(var e=b.length;d<e;++d)c[d]=b[d];d=c}else d=b.slice();return d}function cf(b,c,d){return af(c,d)(b,void 0,b.length)}
function df(b,c,d){c=af(c,d);b=[b[0],b[1],b[0],b[3],b[2],b[1],b[2],b[3]];c(b,b,2);d=[b[0],b[2],b[4],b[6]];var e=[b[1],b[3],b[5],b[7]];b=Math.min.apply(null,d);c=Math.min.apply(null,e);d=Math.max.apply(null,d);e=Math.max.apply(null,e);return Jb(b,c,d,e,void 0)};function ef(b){mb.call(this);this.Ka=Ne(b.projection);this.Da=void 0!==b.ca?b.ca:null;this.qa=b.ea;this.La=void 0!==b.state?b.state:"ready";this.C=void 0!==b.wrapX?b.wrapX:!1}y(ef,mb);ef.prototype.s=function(){return this.Da};ef.prototype.X=function(){return this.Ka};ef.prototype.T=function(){return this.La};function ff(b){mb.call(this);var c=Ua({},b);c.opacity=void 0!==b.opacity?b.opacity:1;c.visible=void 0!==b.visible?b.visible:!0;c.zIndex=void 0!==b.zIndex?b.zIndex:0;c.maxResolution=void 0!==b.bb?b.bb:Infinity;c.minResolution=void 0!==b.Sa?b.Sa:0;this.ka(c)}y(ff,mb);function gf(b){var c=b.get("opacity"),d=b.Md(),e=hf(b),f=b.G(),g=b.get("zIndex"),h=b.get("maxResolution"),k=b.get("minResolution");return{layer:b,opacity:Be(c,0,1),lj:d,visible:e,kf:!0,extent:f,zIndex:g,bb:h,Sa:Math.max(k,0)}}
ff.prototype.G=function(){return this.get("extent")};function hf(b){return b.get("visible")}ff.prototype.Ta=function(b){this.set("visible",b)};function jf(b){var c=b||{};b=Ua({},c);delete b.layers;c=c.layers;ff.call(this,b);this.c=[];this.a={};I(this,L("layers"),this.ph,this);c?ea(c)&&(c=new pb(c.slice())):c=new pb;this.set("layers",c)}y(jf,ff);m=jf.prototype;m.Ic=function(){hf(this)&&this.b()};
m.ph=function(){this.c.forEach(G);this.c.length=0;var b=kf(this);this.c.push(I(b,"add",this.oh,this),I(b,"remove",this.qh,this));for(var c in this.a)this.a[c].forEach(G);Va(this.a);var b=b.a,d,e;c=0;for(d=b.length;c<d;c++)e=b[c],this.a[w(e).toString()]=[I(e,"propertychange",this.Ic,this),I(e,"change",this.Ic,this)];this.b()};m.oh=function(b){b=b.element;var c=w(b).toString();this.a[c]=[I(b,"propertychange",this.Ic,this),I(b,"change",this.Ic,this)];this.b()};
m.qh=function(b){b=w(b.element).toString();this.a[b].forEach(G);delete this.a[b];this.b()};function kf(b){return b.get("layers")}m.Kd=function(b){var c=void 0!==b?b:[],d=c.length;kf(this).forEach(function(b){b.Kd(c)});b=gf(this);var e,f;for(e=c.length;d<e;d++)f=c[d],f.opacity*=b.opacity,f.visible=f.visible&&b.visible,f.bb=Math.min(f.bb,b.bb),f.Sa=Math.max(f.Sa,b.Sa),void 0!==b.extent&&(f.extent=void 0!==f.extent?Tb(f.extent,b.extent):b.extent);return c};m.Md=function(){return"ready"};function lf(){};function mf(b,c,d,e,f,g){Sa.call(this,b,c);this.vectorContext=d;this.frameState=e;this.context=f;this.glContext=g}y(mf,Sa);function nf(b){var c=Ua({},b);delete c.source;ff.call(this,c);this.g=this.c=this.a=null;b.map&&this.setMap(b.map);I(this,L("source"),this.Bh,this);of(this,b.source?b.source:null)}y(nf,ff);m=nf.prototype;m.Kd=function(b){b=b?b:[];b.push(gf(this));return b};m.S=function(){return this.get("source")||null};m.Md=function(){var b=this.S();return b?b.T():"undefined"};m.ti=function(){this.b()};m.Bh=function(){this.g&&(G(this.g),this.g=null);var b=this.S();b&&(this.g=I(b,"change",this.ti,this));this.b()};
m.setMap=function(b){this.a&&(G(this.a),this.a=null);b||this.b();this.c&&(G(this.c),this.c=null);b&&(this.a=I(b,"precompose",function(b){var d=gf(this);d.kf=!1;d.zIndex=Infinity;b.frameState.Rd.push(d);b.frameState.Qd[w(this)]=d},this),this.c=I(this,"change",b.render,b),this.b())};function of(b,c){b.set("source",c)};function pf(b){nf.call(this,b?b:{})}y(pf,nf);function qf(b){b=b?b:{};var c=Ua({},b);delete c.Ef;delete c.Vf;nf.call(this,c);this.set("preload",void 0!==b.Ef?b.Ef:0);this.set("useInterimTilesOnError",void 0!==b.Vf?b.Vf:!0)}y(qf,nf);var rf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function sf(b,c){if(b)for(var d=b.split("&"),e=0;e<d.length;e++){var f=d[e].indexOf("="),g=null,h=null;0<=f?(g=d[e].substring(0,f),h=d[e].substring(f+1)):g=d[e];c(g,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}
function tf(b){if(b[1]){var c=b[0],d=c.indexOf("#");0<=d&&(b.push(c.substr(d)),b[0]=c=c.substr(0,d));d=c.indexOf("?");0>d?b[1]="?":d==c.length-1&&(b[1]=void 0)}return b.join("")}function uf(b,c,d){if(ea(c))for(var e=0;e<c.length;e++)uf(b,String(c[e]),d);else null!=c&&d.push("&",b,""===c?"":"=",encodeURIComponent(String(c)))}function vf(b,c){for(var d in c)uf(d,c[d],b);return b}
function yf(b,c,d,e){for(var f=d.length;0<=(c=b.indexOf(d,c))&&c<e;){var g=b.charCodeAt(c-1);if(38==g||63==g)if(g=b.charCodeAt(c+f),!g||61==g||38==g||35==g)return c;c+=f+1}return-1}var zf=/#|$/,Af=/[?&]($|#)/;function Bf(b,c,d){for(var e=b.search(zf),f=0,g,h=[];0<=(g=yf(b,f,c,e));)h.push(b.substring(f,g)),f=Math.min(b.indexOf("&",g)+1||e,e);h.push(b.substr(f));b=[h.join("").replace(Af,"$1"),"&",c];null!=d&&b.push("=",encodeURIComponent(String(d)));return tf(b)}
function Cf(b,c){var d=b.length-1;0<=d&&b.indexOf("/",d)==d&&(b=b.substr(0,b.length-1));0==c.lastIndexOf("/",0)&&(c=c.substr(1));return Ha(b,"/",c)};function Df(b,c,d,e,f){ib.call(this);this.j=f;this.extent=b;this.c=d;this.resolution=c;this.state=e}y(Df,ib);function Ef(b){b.B("change")}Df.prototype.s=function(){return this.j};Df.prototype.G=function(){return this.extent};Df.prototype.R=function(){return this.resolution};Df.prototype.T=function(){return this.state};function Ff(b,c,d,e,f,g,h){Df.call(this,b,c,d,0,e);this.i=f;this.a=new Image;null!==g&&(this.a.crossOrigin=g);this.f={};this.b=null;this.state=0;this.g=h}y(Ff,Df);Ff.prototype.Nc=function(b){if(void 0!==b){var c;b=w(b);if(b in this.f)return this.f[b];Wa(this.f)?c=this.a:c=this.a.cloneNode(!1);return this.f[b]=c}return this.a};Ff.prototype.u=function(){this.state=3;this.b.forEach(G);this.b=null;Ef(this)};
Ff.prototype.l=function(){void 0===this.resolution&&(this.resolution=Qb(this.extent)/this.a.height);this.state=2;this.b.forEach(G);this.b=null;Ef(this)};Ff.prototype.load=function(){0==this.state&&(this.state=1,Ef(this),this.b=[I(this.a,"error",this.u,this,!0),I(this.a,"load",this.l,this,!0)],this.g(this,this.i))};function Gf(b,c){var d=document.createElement("CANVAS");b&&(d.width=b);c&&(d.height=c);return d.getContext("2d")};var Hf=!((Zb("Chrome")||Zb("CriOS"))&&!Zb("Opera")&&!Zb("OPR")&&!Zb("Edge"))||Zb("iPhone")&&!Zb("iPod")&&!Zb("iPad")||Zb("iPad")||Zb("iPod");function If(b,c,d,e){var f=cf(d,c,b);d=c.lb(e,d);c=Se(c);void 0!==c&&(d*=c);c=Se(b);void 0!==c&&(d/=c);b=b.lb(d,f)/d;isFinite(b)&&0<b&&(d/=b);return d}function Jf(b,c,d,e){b=d-b;c=e-c;var f=Math.sqrt(b*b+c*c);return[Math.round(d+b/f),Math.round(e+c/f)]}
function Kf(b,c,d,e,f,g,h,k,l,n,q){var p=Gf(Math.round(d*b),Math.round(d*c));if(0===l.length)return p.canvas;p.scale(d,d);var r=Eb();l.forEach(function(b){Lb(r,b.extent)});var u=Gf(Math.round(d*Pb(r)/e),Math.round(d*Qb(r)/e)),v=d/e;l.forEach(function(b){u.drawImage(b.image,n,n,b.image.width-2*n,b.image.height-2*n,(b.extent[0]-r[0])*v,-(b.extent[3]-r[3])*v,Pb(b.extent)*v,Qb(b.extent)*v)});var z=[h[0],h[3]];k.c.forEach(function(b){var c=b.source,f=b.target,h=c[1][0],k=c[1][1],l=c[2][0],n=c[2][1];b=
(f[0][0]-z[0])/g;var q=-(f[0][1]-z[1])/g,v=(f[1][0]-z[0])/g,K=-(f[1][1]-z[1])/g,Z=(f[2][0]-z[0])/g,X=-(f[2][1]-z[1])/g,f=c[0][0],c=c[0][1],h=h-f,k=k-c,l=l-f,n=n-c;a:{h=[[h,k,0,0,v-b],[l,n,0,0,Z-b],[0,0,h,k,K-q],[0,0,l,n,X-q]];k=h.length;for(l=0;l<k;l++){for(var n=l,W=Math.abs(h[l][l]),J=l+1;J<k;J++){var aa=Math.abs(h[J][l]);aa>W&&(W=aa,n=J)}if(0===W){h=null;break a}W=h[n];h[n]=h[l];h[l]=W;for(n=l+1;n<k;n++)for(W=-h[n][l]/h[l][l],J=l;J<k+1;J++)h[n][J]=l==J?0:h[n][J]+W*h[l][J]}l=Array(k);for(n=k-1;0<=
n;n--)for(l[n]=h[n][k]/h[n][n],W=n-1;0<=W;W--)h[W][k]-=h[W][n]*l[n];h=l}h&&(p.save(),p.beginPath(),Hf?(l=(b+v+Z)/3,n=(q+K+X)/3,k=Jf(l,n,b,q),v=Jf(l,n,v,K),Z=Jf(l,n,Z,X),p.moveTo(k[0],k[1]),p.lineTo(v[0],v[1]),p.lineTo(Z[0],Z[1])):(p.moveTo(b,q),p.lineTo(v,K),p.lineTo(Z,X)),p.closePath(),p.clip(),p.transform(h[0],h[2],h[1],h[3],b,q),p.translate(r[0]-f,r[3]-c),p.scale(e/d,-e/d),p.drawImage(u.canvas,0,0),p.restore())});q&&(p.save(),p.strokeStyle="black",p.lineWidth=1,k.c.forEach(function(b){var c=b.target;
b=(c[0][0]-z[0])/g;var d=-(c[0][1]-z[1])/g,e=(c[1][0]-z[0])/g,f=-(c[1][1]-z[1])/g,h=(c[2][0]-z[0])/g,c=-(c[2][1]-z[1])/g;p.beginPath();p.moveTo(b,d);p.lineTo(e,f);p.lineTo(h,c);p.closePath();p.stroke()}),p.restore());return p.canvas};function Lf(b,c,d,e,f){this.f=b;this.g=c;var g={},h=af(this.g,this.f);this.b=function(b){var c=b[0]+"/"+b[1];g[c]||(g[c]=h(b));return g[c]};this.i=e;this.s=f*f;this.c=[];this.u=!1;this.l=this.f.b&&!!e&&!!this.f.G()&&Pb(e)==Pb(this.f.G());this.a=this.f.G()?Pb(this.f.G()):null;this.j=this.g.G()?Pb(this.g.G()):null;b=[d[0],d[3]];c=[d[2],d[3]];e=[d[2],d[1]];d=[d[0],d[1]];f=this.b(b);var k=this.b(c),l=this.b(e),n=this.b(d);Mf(this,b,c,e,d,f,k,l,n,10);if(this.u){var q=Infinity;this.c.forEach(function(b){q=
Math.min(q,b.source[0][0],b.source[1][0],b.source[2][0])});this.c.forEach(function(b){if(Math.max(b.source[0][0],b.source[1][0],b.source[2][0])-q>this.a/2){var c=[[b.source[0][0],b.source[0][1]],[b.source[1][0],b.source[1][1]],[b.source[2][0],b.source[2][1]]];c[0][0]-q>this.a/2&&(c[0][0]-=this.a);c[1][0]-q>this.a/2&&(c[1][0]-=this.a);c[2][0]-q>this.a/2&&(c[2][0]-=this.a);Math.max(c[0][0],c[1][0],c[2][0])-Math.min(c[0][0],c[1][0],c[2][0])<this.a/2&&(b.source=c)}},this)}g={}}
function Mf(b,c,d,e,f,g,h,k,l,n){var q=Db([g,h,k,l]),p=b.a?Pb(q)/b.a:null,r=b.f.b&&.5<p&&1>p,u=!1;if(0<n){if(b.g.f&&b.j)var v=Db([c,d,e,f]),u=u|.25<Pb(v)/b.j;!r&&b.f.f&&p&&(u|=.25<p)}if(u||!b.i||Ub(q,b.i)){if(!(u||isFinite(g[0])&&isFinite(g[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(k[0])&&isFinite(k[1])&&isFinite(l[0])&&isFinite(l[1])))if(0<n)u=!0;else return;if(0<n&&(u||(p=b.b([(c[0]+e[0])/2,(c[1]+e[1])/2]),q=r?(yb(g[0],b.a)+yb(k[0],b.a))/2-yb(p[0],b.a):(g[0]+k[0])/2-p[0],p=(g[1]+k[1])/2-p[1],
u=q*q+p*p>b.s),u)){Math.abs(c[0]-e[0])<=Math.abs(c[1]-e[1])?(r=[(d[0]+e[0])/2,(d[1]+e[1])/2],q=b.b(r),p=[(f[0]+c[0])/2,(f[1]+c[1])/2],u=b.b(p),Mf(b,c,d,r,p,g,h,q,u,n-1),Mf(b,p,r,e,f,u,q,k,l,n-1)):(r=[(c[0]+d[0])/2,(c[1]+d[1])/2],q=b.b(r),p=[(e[0]+f[0])/2,(e[1]+f[1])/2],u=b.b(p),Mf(b,c,r,p,f,g,q,u,l,n-1),Mf(b,r,d,e,p,q,h,k,u,n-1));return}if(r){if(!b.l)return;b.u=!0}b.c.push({source:[g,k,l],target:[c,e,f]});b.c.push({source:[g,h,k],target:[c,d,e]})}}
function Nf(b){var c=Eb();b.c.forEach(function(b){b=b.source;Fb(c,b[0]);Fb(c,b[1]);Fb(c,b[2])});return c};function Of(b,c,d,e,f,g){this.l=c;this.u=b.G();var h=c.G(),k=h?Tb(d,h):d,h=If(b,c,Rb(k),e);this.g=new Lf(b,c,k,this.u,.5*h);this.b=e;this.a=d;b=Nf(this.g);this.i=(this.Ca=g(b,h,f))?this.Ca.c:1;this.ic=this.f=null;f=2;g=[];this.Ca&&(f=0,g=this.Ca.s());Df.call(this,d,e,this.i,f,g)}y(Of,Df);m=Of.prototype;m.L=function(){1==this.state&&(G(this.ic),this.ic=null);Of.U.L.call(this)};m.Nc=function(){return this.f};m.X=function(){return this.l};
m.gc=function(){var b=this.Ca.T();2==b&&(this.f=Kf(Pb(this.a)/this.b,Qb(this.a)/this.b,this.i,this.Ca.R(),0,this.b,this.a,this.g,[{extent:this.Ca.G(),image:this.Ca.Nc()}],0));this.state=b;Ef(this)};m.load=function(){if(0==this.state){this.state=1;Ef(this);var b=this.Ca.T();2==b||3==b?this.gc():(this.ic=I(this.Ca,"change",function(){var b=this.Ca.T();if(2==b||3==b)G(this.ic),this.ic=null,this.gc()},this),this.Ca.load())}};function Pf(b){ef.call(this,{ca:b.ca,extent:b.extent,ea:b.ea,projection:b.projection,state:b.state});this.v=void 0!==b.Ba?b.Ba:null;this.c=null;this.O=0}y(Pf,ef);function Qf(b,c,d,e,f){var g=b.X();if(g&&f&&!$e(g,f)){if(b.c){if(b.O==b.f&&$e(b.c.X(),f)&&b.c.R()==d&&b.c.c==e&&Kb(b.c.G(),c))return b.c;b.c.Db();b.c=null}b.c=new Of(g,f,c,d,e,function(b,c,d){return Rf(this,b,c,d,g)}.bind(b));b.O=b.f;return b.c}g&&(f=g);return Rf(b,c,d,e,f)}
Pf.prototype.V=function(b){b=b.target;switch(b.T()){case 1:this.B(new Sf(Tf,b));break;case 2:this.B(new Sf(Uf,b));break;case 3:this.B(new Sf(Vf,b))}};function Wf(b,c){b.Nc().src=c}function Sf(b,c){Sa.call(this,b);this.image=c}y(Sf,Sa);var Tf="imageloadstart",Uf="imageloadend",Vf="imageloaderror";function Xf(b){b=b||{};Pf.call(this,{ca:b.ca,ea:b.ea,projection:b.projection,Ba:b.Ba});this.ha=void 0!==b.crossOrigin?b.crossOrigin:null;this.l=b.url;this.sa=void 0!==b.Lh?b.Lh:Wf;this.a=b.params||{};this.j=!0;Yf(this);this.I=b.serverType;this.ra=void 0!==b.Hh?b.Hh:!0;this.g=null;this.A=[0,0];this.D=0;this.i=void 0!==b.ratio?b.ratio:1.5}y(Xf,Pf);var Zf=[101,101];
function $f(b,c,d,e,f){if(void 0!==b.l){var g=Sb(c,d,0,Zf),h={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:b.a.LAYERS};Ua(h,b.a,f);f=Math.floor((g[3]-c[1])/d);h[b.j?"I":"X"]=Math.floor((c[0]-g[0])/d);h[b.j?"J":"Y"]=f;return ag(b,g,Zf,1,Ne(e),h)}}
function Rf(b,c,d,e,f){if(void 0===b.l)return null;b.v&&(d=Rc(b.v,d,0),d=b.v[d]);1==e||b.ra&&void 0!==b.I||(e=1);c=c.slice();var g=(c[0]+c[2])/2,h=(c[1]+c[3])/2,k=d/e,l=Pb(c)/k,k=Qb(c)/k,n=b.g;if(n&&b.D==b.f&&n.R()==d&&n.c==e&&Ib(n.G(),c))return n;if(1!=b.i){var n=b.i*Pb(c)/2,q=b.i*Qb(c)/2;c[0]=g-n;c[1]=h-q;c[2]=g+n;c[3]=h+q}g={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Ua(g,b.a);b.A[0]=Math.ceil(l*b.i);b.A[1]=Math.ceil(k*b.i);f=ag(b,c,b.A,e,f,g);b.g=new Ff(c,
d,e,b.s(),f,b.ha,b.sa);b.D=b.f;I(b.g,"change",b.V,b);return b.g}
function ag(b,c,d,e,f,g){g[b.j?"CRS":"SRS"]=f.a;"STYLES"in b.a||(g.STYLES=new String(""));if(1!=e)switch(b.I){case "geoserver":e=90*e+.5|0;g.FORMAT_OPTIONS="FORMAT_OPTIONS"in g?g.FORMAT_OPTIONS+(";dpi:"+e):"dpi:"+e;break;case "mapserver":g.MAP_RESOLUTION=90*e;break;case "carmentaserver":case "qgis":g.DPI=90*e}g.WIDTH=d[0];g.HEIGHT=d[1];d=f.g;var h;b.j&&"ne"==d.substr(0,2)?h=[c[1],c[0],c[3],c[2]]:h=c;g.BBOX=h.join(",");return tf(vf([b.l],g))}function Yf(b){b.j=0<=Ia(b.a.VERSION||"1.3.0","1.3")};function bg(b,c){var d=/\{z\}/g,e=/\{x\}/g,f=/\{y\}/g,g=/\{-y\}/g;return function(h){if(h)return b.replace(d,h[0].toString()).replace(e,h[1].toString()).replace(f,function(){return(-h[2]-1).toString()}).replace(g,function(){var b=c.a?c.a[h[0]]:null;return(b.f-b.c+1+h[2]).toString()})}}function cg(b,c){for(var d=b.length,e=Array(d),f=0;f<d;++f)e[f]=bg(b[f],c);return dg(e)}function dg(b){return 1===b.length?b[0]:function(c,d,e){if(c)return b[yb((c[1]<<c[0])+c[2],b.length)](c,d,e)}}function eg(){}
function fg(b){var c=[],d=/\{(\d)-(\d)\}/.exec(b)||/\{([a-z])-([a-z])\}/.exec(b);if(d){var e=d[2].charCodeAt(0),f;for(f=d[1].charCodeAt(0);f<=e;++f)c.push(b.replace(d[0],String.fromCharCode(f)))}else c.push(b);return c};function gg(b,c){ib.call(this);this.oa=b;this.state=c;this.a=null;this.key=""}y(gg,ib);function hg(b){b.B("change")}gg.prototype.bc=function(){return w(this).toString()};gg.prototype.T=function(){return this.state};function ig(b,c,d,e,f){gg.call(this,b,c);this.g=d;this.b=new Image;null!==e&&(this.b.crossOrigin=e);this.f={};this.c=null;this.i=f}y(ig,gg);m=ig.prototype;m.L=function(){1==this.state&&jg(this);this.a&&hb(this.a);ig.U.L.call(this)};m.Oc=function(b){if(void 0!==b){var c=w(b);if(c in this.f)return this.f[c];b=Wa(this.f)?this.b:this.b.cloneNode(!1);return this.f[c]=b}return this.b};m.bc=function(){return this.g};m.pi=function(){this.state=3;jg(this);hg(this)};
m.ri=function(){this.state=this.b.naturalWidth&&this.b.naturalHeight?2:4;jg(this);hg(this)};m.load=function(){0==this.state&&(this.state=1,hg(this),this.c=[I(this.b,"error",this.pi,this,!0),I(this.b,"load",this.ri,this,!0)],this.i(this,this.g))};function jg(b){b.c.forEach(G);b.c=null};function kg(){this.c=0;this.f={};this.a=this.b=null}m=kg.prototype;m.clear=function(){this.c=0;this.f={};this.a=this.b=null};m.forEach=function(b,c){for(var d=this.b;d;)b.call(c,d.wb,d.Od,this),d=d.Ga};m.get=function(b){b=this.f[b];if(b===this.a)return b.wb;b===this.b?(this.b=this.b.Ga,this.b.cb=null):(b.Ga.cb=b.cb,b.cb.Ga=b.Ga);b.Ga=null;b.cb=this.a;this.a=this.a.Ga=b;return b.wb};m.Oa=function(){return this.c};m.ya=function(){var b=Array(this.c),c=0,d;for(d=this.a;d;d=d.cb)b[c++]=d.Od;return b};
m.za=function(){var b=Array(this.c),c=0,d;for(d=this.a;d;d=d.cb)b[c++]=d.wb;return b};m.pop=function(){var b=this.b;delete this.f[b.Od];b.Ga&&(b.Ga.cb=null);this.b=b.Ga;this.b||(this.a=null);--this.c;return b.wb};m.replace=function(b,c){this.get(b);this.f[b].wb=c};m.set=function(b,c){var d={Od:b,Ga:null,cb:this.a,wb:c};this.a?this.a.Ga=d:this.b=d;this.a=d;this.f[b]=d;++this.c};function lg(b){kg.call(this);this.g=void 0!==b?b:2048}y(lg,kg);function mg(b){return b.Oa()>b.g}function ng(b,c){for(var d,e;mg(b)&&!(d=b.b.wb,e=d.oa[0].toString(),e in c&&c[e].contains(d.oa));)b.pop().Db()};function og(b,c,d,e,f,g,h,k,l,n,q){gg.call(this,f,0);this.A=void 0!==q?q:!1;this.v=h;this.s=k;this.c=null;this.f={};this.g=c;this.j=e;this.u=g?g:f;this.b=[];this.Pb=null;this.i=0;g=pg(e,this.u);k=this.j.G();f=this.g.G();g=k?Tb(g,k):g;if(0===Nb(g))this.state=4;else if((k=b.G())&&(f?f=Tb(f,k):f=k),e=e.R(this.u[0]),e=If(b,d,Rb(g),e),!isFinite(e)||0>=e)this.state=4;else if(this.l=new Lf(b,d,g,f,e*(void 0!==n?n:.5)),0===this.l.c.length)this.state=4;else if(this.i=qg(c,e),d=Nf(this.l),f&&(b.b?(d[1]=Be(d[1],
f[1],f[3]),d[3]=Be(d[3],f[1],f[3])):d=Tb(d,f)),Nb(d))if(b=rg(c,d,this.i),100>(b.a-b.b+1)*(b.f-b.c+1)){for(c=b.b;c<=b.a;c++)for(d=b.c;d<=b.f;d++)(n=l(this.i,c,d,h))&&this.b.push(n);0===this.b.length&&(this.state=4)}else this.state=3;else this.state=4}y(og,gg);og.prototype.L=function(){1==this.state&&(this.Pb.forEach(G),this.Pb=null);og.U.L.call(this)};og.prototype.Oc=function(b){if(void 0!==b){var c=w(b);if(c in this.f)return this.f[c];b=Wa(this.f)?this.c:this.c.cloneNode(!1);return this.f[c]=b}return this.c};
og.prototype.gc=function(){var b=[];this.b.forEach(function(c){c&&2==c.T()&&b.push({extent:pg(this.g,c.oa),image:c.Oc()})},this);this.b.length=0;if(0===b.length)this.state=3;else{var c=this.u[0],d=sg(this.j,c),e=ha(d)?d:d[0],d=ha(d)?d:d[1],c=this.j.R(c),f=this.g.R(this.i),g=pg(this.j,this.u);this.c=Kf(e,d,this.v,f,this.g.G(),c,g,this.l,b,this.s,this.A);this.state=2}hg(this)};
og.prototype.load=function(){if(0==this.state){this.state=1;hg(this);var b=0;this.Pb=[];this.b.forEach(function(c){var d=c.T();if(0==d||1==d){b++;var e;e=I(c,"change",function(){var d=c.T();if(2==d||3==d||4==d)G(e),b--,0===b&&(this.Pb.forEach(G),this.Pb=null,this.gc())},this);this.Pb.push(e)}},this);this.b.forEach(function(b){0==b.T()&&b.load()});0===b&&t.setTimeout(this.gc.bind(this),0)}};function tg(b){this.Fa=void 0!==b.Fa?b.Fa:0;this.f=b.Ba;this.Ra=this.f.length-1;this.b=void 0!==b.origin?b.origin:null;this.g=null;void 0!==b.Qc&&(this.g=b.Qc);var c=b.extent;void 0===c||this.b||this.g||(this.b=[c[0],c[3]]);this.i=null;void 0!==b.$c&&(this.i=b.$c);this.j=void 0!==b.tileSize?b.tileSize:this.i?null:256;this.l=void 0!==c?c:null;this.a=null;void 0!==b.sizes?this.a=b.sizes.map(function(b){return new De(Math.min(0,b[0]),Math.max(b[0]-1,-1),Math.min(0,b[1]),Math.max(b[1]-1,-1))},this):c&&
ug(this,c);this.c=[0,0]}var vg=[0,0,0];function wg(b,c,d,e,f,g){g=pg(b,c,g);for(c=c[0]-1;c>=b.Fa;){if(d.call(e,c,rg(b,g,c,f)))return!0;--c}return!1}tg.prototype.G=function(){return this.l};tg.prototype.Pa=function(b){return this.b?this.b:this.g[b]};tg.prototype.R=function(b){return this.f[b]};function xg(b,c,d,e){return c[0]<b.Ra?(e=pg(b,c,e),rg(b,e,c[0]+1,d)):null}
function yg(b,c,d,e){zg(b,c[0],c[1],d,!1,vg);var f=vg[1],g=vg[2];zg(b,c[2],c[3],d,!0,vg);b=vg[1];c=vg[2];void 0!==e?(e.b=f,e.a=b,e.c=g,e.f=c):e=new De(f,b,g,c);return e}function rg(b,c,d,e){d=b.R(d);return yg(b,c,d,e)}function Ag(b,c){var d=b.Pa(c[0]),e=b.R(c[0]),f=Bb(sg(b,c[0]),b.c);return[d[0]+(c[1]+.5)*f[0]*e,d[1]+(c[2]+.5)*f[1]*e]}function pg(b,c,d){var e=b.Pa(c[0]),f=b.R(c[0]);b=Bb(sg(b,c[0]),b.c);var g=e[0]+c[1]*b[0]*f;c=e[1]+c[2]*b[1]*f;return Jb(g,c,g+b[0]*f,c+b[1]*f,d)}
function zg(b,c,d,e,f,g){var h=qg(b,e),k=e/b.R(h),l=b.Pa(h);b=Bb(sg(b,h),b.c);c=k*Math.floor((c-l[0])/e+(f?.5:0))/b[0];d=k*Math.floor((d-l[1])/e+(f?0:.5))/b[1];f?(c=Math.ceil(c)-1,d=Math.ceil(d)-1):(c=Math.floor(c),d=Math.floor(d));f=c;void 0!==g?(g[0]=h,g[1]=f,g[2]=d):g=[h,f,d];return g}function Bg(b,c,d){d=b.R(d);return zg(b,c[0],c[1],d,!1,void 0)}function sg(b,c){return b.j?b.j:b.i[c]}function qg(b,c){var d=Rc(b.f,c,0);return Be(d,b.Fa,b.Ra)}
function ug(b,c){for(var d=b.f.length,e=Array(d),f=b.Fa;f<d;++f)e[f]=rg(b,c,f);b.a=e}function Cg(b){var c=b.j;if(!c){for(var c=Dg(b),d=Qb(c),e=Pb(c),f=Bb(256),d=Math.max(e/f[0],d/f[1]),e=Array(43),f=0;43>f;++f)e[f]=d/Math.pow(2,f);c=new tg({extent:c,origin:[c[0],c[3]],Ba:e,tileSize:void 0});b.j=c}return c}function Dg(b){b=Ne(b);var c=b.G();c||(b=180*Je.degrees/Se(b),c=Jb(-b,-b,b,b));return c};function Eg(b){ef.call(this,{ca:b.ca,extent:b.extent,ea:b.ea,projection:b.projection,state:b.state,wrapX:b.wrapX});this.Ma=void 0!==b.dc?b.dc:!1;this.D=void 0!==b.ub?b.ub:1;this.pa=void 0!==b.pa?b.pa:null;this.c=new lg(b.Ke);this.I=[0,0]}y(Eg,ef);m=Eg.prototype;m.sf=function(){return mg(this.c)};m.tf=function(b,c){var d=this.$b(b);d&&ng(d,c)};
function Fg(b,c,d,e,f){c=b.$b(c);if(!c)return!1;for(var g=!0,h,k,l=e.b;l<=e.a;++l)for(var n=e.c;n<=e.f;++n)h=b.Ec(d,l,n),k=!1,c.f.hasOwnProperty(h)&&(h=c.get(h),(k=2===h.T())&&(k=!1!==f(h))),k||(g=!1);return g}m.Ue=function(){return 0};m.Xe=function(){return""};m.Ec=function(b,c,d){return b+"/"+c+"/"+d};m.Fc=function(){return this.Ma};m.Za=function(b){return this.pa?this.pa:Cg(b)};m.$b=function(b){var c=this.X();return c&&!$e(c,b)?null:this.c};
function Gg(b,c,d){var e=void 0!==d?d:b.X();d=b.Za(e);if(b.C&&e.f){var f=c;c=f[0];b=Ag(d,f);var e=Dg(e),g=b[0],h=b[1];e[0]<=g&&g<=e[2]&&e[1]<=h&&h<=e[3]?c=f:(f=Pb(e),b[0]+=f*Math.ceil((e[0]-b[0])/f),c=Bg(d,b,c))}e=c[0];b=c[1];f=c[2];d=d.Fa>e||e>d.Ra?!1:(d=(g=d.G())?rg(d,g,e):d.a?d.a[e]:null)?Ee(d,b,f):!0;return d?c:null}m.Wf=Ld;function Jg(b,c){Sa.call(this,b);this.tile=c}y(Jg,Sa);function Kg(b){Eg.call(this,{ca:b.ca,Ke:b.Ke,extent:b.extent,ea:b.ea,dc:b.dc,projection:b.projection,state:b.state,pa:b.pa,ub:b.ub,wrapX:b.wrapX});this.tb=b.tb;this.vb=this.i?this.i.bind(this):eg;this.Va=null;if(b.Va){var c=b.Va;this.Va=c;Lg(this,this.i?this.i.bind(this):cg(c,this.pa))}else b.url&&(c=this.Va=fg(b.url),Lg(this,this.i?this.i.bind(this):cg(c,this.pa)));b.vb&&Lg(this,b.vb)}y(Kg,Eg);
Kg.prototype.V=function(b){b=b.target;switch(b.T()){case 1:this.B(new Jg("tileloadstart",b));break;case 2:this.B(new Jg("tileloadend",b));break;case 3:this.B(new Jg("tileloaderror",b))}};function Lg(b,c){b.c.clear();b.vb=c;b.b()}Kg.prototype.Wf=function(b,c,d){b=this.Ec(b,c,d);this.c.f.hasOwnProperty(b)&&this.c.get(b)};function Mg(b){Kg.call(this,{ca:b.ca,extent:b.extent,ea:b.ea,dc:b.dc,projection:b.projection,state:b.state,pa:b.pa,tb:b.tb?b.tb:Ng,ub:b.ub,vb:b.vb,url:b.url,Va:b.Va,wrapX:b.wrapX});this.crossOrigin=void 0!==b.crossOrigin?b.crossOrigin:null;this.kc=void 0!==b.kc?b.kc:ig;this.g={};this.v={};this.Wa=b.Mf}y(Mg,Kg);m=Mg.prototype;m.sf=function(){if(mg(this.c))return!0;for(var b in this.g)if(mg(this.g[b]))return!0;return!1};
m.tf=function(b,c){var d=this.$b(b);ng(this.c,this.c==d?c:{});for(var e in this.g){var f=this.g[e];ng(f,f==d?c:{})}};m.Ue=function(b){return this.X()&&b&&this.X(),0};m.Fc=function(b){return this.X()&&b&&!$e(this.X(),b)?!1:Mg.U.Fc.call(this,b)};m.Za=function(b){var c=this.X();return!this.pa||c&&!$e(c,b)?(c=w(b).toString(),c in this.v||(this.v[c]=Cg(b)),this.v[c]):this.pa};m.$b=function(b){var c=this.X();if(!c||$e(c,b))return this.c;b=w(b).toString();b in this.g||(this.g[b]=new lg);return this.g[b]};
function Og(b,c,d,e,f,g,h){c=[c,d,e];f=(d=Gg(b,c,g))?b.vb(d,f,g):void 0;f=new b.kc(c,void 0!==f?0:4,void 0!==f?f:"",b.crossOrigin,b.tb);f.key=h;I(f,"change",b.V,b);return f}function Pg(b,c,d,e,f,g){if(b.X()&&g&&!$e(b.X(),g)){f=b.$b(g);d=[c,d,e];c=b.Ec.apply(b,d);if(f.f.hasOwnProperty(c))return f.get(c);var h=b.X();e=b.Za(h);var k=b.Za(g),l=Gg(b,d,g);b=new og(h,e,g,k,d,l,b.D,0,function(b,c,d,e){return Qg(this,b,c,d,e,h)}.bind(b),b.Wa,!1);f.set(c,b);return b}return Qg(b,c,d,e,f,g)}
function Qg(b,c,d,e,f,g){var h=null,k=b.Ec(c,d,e),l=b.Xe();if(b.c.f.hasOwnProperty(k)){if(h=b.c.get(k),h.key!=l){var n=h;h.a&&h.a.key==l?(h=h.a,2==n.T()&&(h.a=n)):(h=Og(b,c,d,e,f,g,l),2==n.T()?h.a=n:n.a&&2==n.a.T()&&(h.a=n.a,n.a=null));h.a&&(h.a.a=null);b.c.replace(k,h)}}else h=Og(b,c,d,e,f,g,l),b.c.set(k,h);return h}function Ng(b,c){b.Oc().src=c};function Rg(b){this.u=b.Td;tg.call(this,{extent:b.extent,origin:b.origin,Qc:b.Qc,Ba:b.Ba,tileSize:b.tileSize,$c:b.$c,sizes:b.sizes})}y(Rg,tg);
function Sg(b,c){var d=[],e=[],f=[],g=[],h=[],k;k=Ne(b.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var l=Se(k),n="ne"==k.g.substr(0,2);b.TileMatrix.sort(function(b,c){return c.ScaleDenominator-b.ScaleDenominator});b.TileMatrix.forEach(function(b){e.push(b.Identifier);var c=2.8E-4*b.ScaleDenominator/l,k=b.TileWidth,u=b.TileHeight;n?f.push([b.TopLeftCorner[1],b.TopLeftCorner[0]]):f.push(b.TopLeftCorner);d.push(c);g.push(k==u?k:[k,u]);h.push([b.MatrixWidth,-b.MatrixHeight])});
return new Rg({extent:c,Qc:f,Ba:d,Td:e,$c:g,sizes:h})};function Tg(b){function c(b){b="KVP"==e?tf(vf([b],g)):b.replace(/\{(\w+?)\}/g,function(b,c){return c.toLowerCase()in g?g[c.toLowerCase()]:b});return function(c){if(c){var d={TileMatrix:f.u[c[0]],TileCol:c[1],TileRow:-c[2]-1};Ua(d,h);c=b;return c="KVP"==e?tf(vf([c],d)):c.replace(/\{(\w+?)\}/g,function(b,c){return d[c]})}}}this.sa=void 0!==b.version?b.version:"1.0.0";this.ha=void 0!==b.format?b.format:"image/jpeg";this.j=void 0!==b.dimensions?b.dimensions:{};this.l="";Ug(this);this.A=b.layer;this.O=
b.matrixSet;this.ra=b.style;var d=b.Va;void 0===d&&void 0!==b.url&&(d=fg(b.url));var e=this.Xa=void 0!==b.requestEncoding?b.requestEncoding:"KVP",f=b.pa,g={layer:this.A,style:this.ra,tilematrixset:this.O};"KVP"==e&&Ua(g,{Service:"WMTS",Request:"GetTile",Version:this.sa,Format:this.ha});var h=this.j,k=d&&0<d.length?dg(d.map(c)):eg;Mg.call(this,{ca:b.ca,crossOrigin:b.crossOrigin,ea:b.ea,projection:b.projection,Mf:b.Mf,kc:b.kc,pa:f,tb:b.tb,ub:b.ub,vb:k,Va:d,wrapX:void 0!==b.wrapX?b.wrapX:!1})}y(Tg,Mg);
Tg.prototype.Xe=function(){return this.l};Tg.prototype.ma=function(){return this.A};function Ug(b){var c=0,d=[],e;for(e in b.j)d[c++]=e+"-"+b.j[e];b.l=d.join("/")}
function Vg(b,c){var d=Uc(b.Contents.Layer,function(b){return b.Identifier==c.layer}),e=b.Contents.TileMatrixSet,f,g;f=1<d.TileMatrixSetLink.length?"projection"in c?Yc(d.TileMatrixSetLink,function(b){return Uc(e,function(c){return c.Identifier==b.TileMatrixSet}).SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3")==c.projection}):Yc(d.TileMatrixSetLink,function(b){return b.TileMatrixSet==c.matrixSet}):0;0>f&&(f=0);g=d.TileMatrixSetLink[f].TileMatrixSet;var h=d.Format[0];"format"in c&&
(h=c.format);f=Yc(d.Style,function(b){return"style"in c?b.Title==c.style:b.isDefault});0>f&&(f=0);f=d.Style[f].Identifier;var k={};"Dimension"in d&&d.Dimension.forEach(function(b){var c=b.Identifier,d=b.Default;void 0===d&&(d=b.Value[0]);k[c]=d});var l=Uc(b.Contents.TileMatrixSet,function(b){return b.Identifier==g}),n;n="projection"in c?Ne(c.projection):Ne(l.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var q=d.WGS84BoundingBox,p,r;void 0!==q&&(r=Ne("EPSG:4326").G(),r=q[0]==
r[0]&&q[2]==r[2],p=df(q,"EPSG:4326",n),(q=n.G())&&(Ib(q,p)||(p=void 0)));var l=Sg(l,p),u=[];p=c.requestEncoding;p=void 0!==p?p:"";if(b.hasOwnProperty("OperationsMetadata")&&b.OperationsMetadata.hasOwnProperty("GetTile")&&0!==p.indexOf("REST"))for(var d=b.OperationsMetadata.GetTile.DCP.HTTP.Get,q=0,v=d.length;q<v;++q){var z=Uc(d[q].Constraint,function(b){return"GetEncoding"==b.name}).AllowedValues.Value;0<z.length&&0<=z.indexOf("KVP")&&(p="KVP",u.push(d[q].href))}else p="REST",d.ResourceURL.forEach(function(b){"tile"==
b.resourceType&&(h=b.format,u.push(b.template))});return{Va:u,layer:c.layer,matrixSet:g,format:h,projection:n,requestEncoding:p,pa:l,style:f,dimensions:k,wrapX:r}};function Wg(b,c){this.b=b;this.a=c}Wg.$inject=["$q","$http"];Wg.prototype.wd=function(b,c){return new pf({source:new Xf({url:b,params:{LAYERS:c}})})};Wg.prototype.createBasicWMSLayer=Wg.prototype.wd;
Wg.prototype.xd=function(b,c){var d=new me,e=new qf,f=this.b;return this.a.get(b).then(function(g){var h;g.data&&(h=d.read(g.data));return void 0!==h?(g=Vg(h,{layer:c,requestEncoding:"REST"}),of(e,new Tg(g)),h=Ma(h.Contents.Layer,function(b){return b.Identifier==c}),e.set("capabilitiesStyles",h.Style),f.resolve(e)):f.reject("Failed to get WMTS capabilities from "+b)})};Wg.prototype.createWMTSLayerFromCapabilitites=Wg.prototype.xd;
Wg.prototype.vd=function(b){var c=new jf;null!=b&&c.set("layers",b);return c};Wg.prototype.createBasicGroup=Wg.prototype.vd;Wg.prototype.Te=function(b,c){kf(Xg(b)).forEach(function(b){if(b.get("groupName")===c)return b});var d=this.vd();d.set("groupName",c);Yg(b,d);return d};Wg.prototype.getGroupFromMap=Wg.prototype.Te;Wg.prototype.Dc=function(b){return Zg(this,b,[])};Wg.prototype.getFlatLayers=Wg.prototype.Dc;
function Zg(b,c,d){c instanceof jf?kf(c).forEach(function(b){Zg(this,b,d)},b):0>d.indexOf(c)&&d.push(c);return d}A.service("ngeoLayerHelper",Wg);function $g(b,c,d,e,f){ib.call(this);this.f=d;this.b=b;this.g=c;this.Qa=e;this.c=f;this.a=null}y($g,ib);$g.$inject=["$http","gmfTreeUrl","$q","ngeoLayerHelper","gettextCatalog"];function ah(b,c){return Ma(b,function(b){return b.name===c})}
function bh(b){var c=b.f,d=function(b){b=b.background_layers.map(function(b){function d(b,c){c.set("label",b.name);c.set("metadata",b.metadata);return c}if("WMTS"===b.type)return this.Qa.xd(b.url,b.name).then(d.bind(this,b)).then(null,function(b){console.error(b||"unknown error");return c.resolve(void 0)})},this);return c.all(b)}.bind(b);return b.a.then(d).then(function(b){var c=[];c.push(new qf({label:this.c.getString("blank"),metadata:{thumbnail:""}}));b.forEach(function(b){b&&c.push(b)});return c}.bind(b))}
$g.prototype.Zg=function(b){return this.a.then(function(c){return ah(c.themes,b)})};$g.prototype.getThemeObject=$g.prototype.Zg;$g.prototype.Gc=function(){return this.a.then(function(b){return b.themes})};$g.prototype.getThemesObject=$g.prototype.Gc;$g.prototype.jf=function(b){var c=function(b){this.B("load");return b.data}.bind(this);this.a=this.b.get(this.g,{params:void 0!==b?{role:b}:{},cache:!1,withCredentials:!0}).then(c)};$g.prototype.loadThemes=$g.prototype.jf;B.service("gmfThemes",$g);function ch(b){return function(){return b}}var dh=ch(!1),eh=ch(!0);function fh(b){var c;c=c||0;return function(){return b.apply(this,Array.prototype.slice.call(arguments,0,c))}}function gh(b){var c=arguments,d=c.length;return function(){for(var b=0;b<d;b++)if(!c[b].apply(this,arguments))return!1;return!0}};function hh(){mb.call(this);this.s=Eb();this.v=-1;this.i={};this.l=this.j=0}y(hh,mb);hh.prototype.G=function(b){this.v!=this.f&&(this.s=this.yc(this.s),this.v=this.f);var c=this.s;b?(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3]):b=c;return b};hh.prototype.transform=function(b,c){this.tc(af(b,c));return this};var ih=/^#(?:[0-9a-f]{3}){1,2}$/i,jh=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i,kh=/^(?:rgba)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|1|0\.\d{0,10})\)$/i;function lh(b){return ea(b)?b:mh(b)}function nh(b){if("string"!==typeof b){var c=b[0];c!=(c|0)&&(c=c+.5|0);var d=b[1];d!=(d|0)&&(d=d+.5|0);var e=b[2];e!=(e|0)&&(e=e+.5|0);b="rgba("+c+","+d+","+e+","+b[3]+")"}return b}
var mh=function(){var b={},c=0;return function(d){var e;if(b.hasOwnProperty(d))e=b[d];else{if(1024<=c){e=0;for(var f in b)0===(e++&3)&&(delete b[f],--c)}var g,h;ih.exec(d)?(h=3==d.length-1?1:2,e=parseInt(d.substr(1+0*h,h),16),f=parseInt(d.substr(1+1*h,h),16),g=parseInt(d.substr(1+2*h,h),16),1==h&&(e=(e<<4)+e,f=(f<<4)+f,g=(g<<4)+g),e=[e,f,g,1]):(h=kh.exec(d))?(e=Number(h[1]),f=Number(h[2]),g=Number(h[3]),h=Number(h[4]),e=[e,f,g,h],e=oh(e,e)):(h=jh.exec(d))?(e=Number(h[1]),f=Number(h[2]),g=Number(h[3]),
e=[e,f,g,1],e=oh(e,e)):e=void 0;b[d]=e;++c}return e}}();function oh(b,c){var d=c||[];d[0]=Be(b[0]+.5|0,0,255);d[1]=Be(b[1]+.5|0,0,255);d[2]=Be(b[2]+.5|0,0,255);d[3]=Be(b[3],0,1);return d};function ph(b){return"string"===typeof b||b instanceof CanvasPattern||b instanceof CanvasGradient?b:nh(b)};var qh="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",rh=-1!==qh.indexOf("firefox"),sh=-1!==qh.indexOf("safari")&&-1===qh.indexOf("chrom"),th=-1!==qh.indexOf("macintosh"),uh=t.devicePixelRatio||1,vh=!1,wh=function(){if(!("HTMLCanvasElement"in t))return!1;try{var b=Gf();return b?(void 0!==b.setLineDash&&(vh=!0),!0):!1}catch(c){return!1}}(),xh="geolocation"in t.navigator,yh="ontouchstart"in t,zh="PointerEvent"in t,Ah=!!t.navigator.msPointerEnabled;var Bh=[0,0,0,1],Ch=[],Dh=[0,0,0,1];function Eh(b,c,d,e){0!==c&&(b.translate(d,e),b.rotate(c),b.translate(-d,-e))};function Fh(b){b=b||{};this.a=void 0!==b.color?b.color:null;this.b=void 0}function Gh(b){void 0===b.b&&(b.b=b.a instanceof CanvasPattern||b.a instanceof CanvasGradient?w(b.a).toString():"f"+(b.a?nh(b.a):"-"));return b.b};function Hh(b){this.N=b.opacity;this.W=b.qb;this.s=b.rotation;this.I=b.scale;this.Z=b.Ua}Hh.prototype.Ha=function(){return this.I};function Ih(){this.b=-1};function Jh(){this.b=-1;this.b=64;this.a=Array(4);this.g=Array(this.b);this.c=this.f=0;this.a[0]=1732584193;this.a[1]=4023233417;this.a[2]=2562383102;this.a[3]=271733878;this.c=this.f=0}y(Jh,Ih);
function Kh(b,c,d){d||(d=0);var e=Array(16);if(ga(c))for(var f=0;16>f;++f)e[f]=c.charCodeAt(d++)|c.charCodeAt(d++)<<8|c.charCodeAt(d++)<<16|c.charCodeAt(d++)<<24;else for(f=0;16>f;++f)e[f]=c[d++]|c[d++]<<8|c[d++]<<16|c[d++]<<24;c=b.a[0];d=b.a[1];var f=b.a[2],g=b.a[3],h=0,h=c+(g^d&(f^g))+e[0]+3614090360&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[1]+3905402710&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+(d^g&(c^d))+e[2]+606105819&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^
c))+e[3]+3250441966&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(g^d&(f^g))+e[4]+4118548399&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[5]+1200080426&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+(d^g&(c^d))+e[6]+2821735955&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^c))+e[7]+4249261313&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(g^d&(f^g))+e[8]+1770035416&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[9]+2336552879&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+
(d^g&(c^d))+e[10]+4294925233&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^c))+e[11]+2304563134&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(g^d&(f^g))+e[12]+1804603682&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[13]+4254626195&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+(d^g&(c^d))+e[14]+2792965006&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^c))+e[15]+1236535329&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(f^g&(d^f))+e[1]+4129170786&4294967295;c=d+(h<<5&4294967295|
h>>>27);h=g+(d^f&(c^d))+e[6]+3225465664&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[11]+643717713&4294967295;f=g+(h<<14&4294967295|h>>>18);h=d+(g^c&(f^g))+e[0]+3921069994&4294967295;d=f+(h<<20&4294967295|h>>>12);h=c+(f^g&(d^f))+e[5]+3593408605&4294967295;c=d+(h<<5&4294967295|h>>>27);h=g+(d^f&(c^d))+e[10]+38016083&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[15]+3634488961&4294967295;f=g+(h<<14&4294967295|h>>>18);h=d+(g^c&(f^g))+e[4]+3889429448&4294967295;d=f+(h<<20&4294967295|
h>>>12);h=c+(f^g&(d^f))+e[9]+568446438&4294967295;c=d+(h<<5&4294967295|h>>>27);h=g+(d^f&(c^d))+e[14]+3275163606&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[3]+4107603335&4294967295;f=g+(h<<14&4294967295|h>>>18);h=d+(g^c&(f^g))+e[8]+1163531501&4294967295;d=f+(h<<20&4294967295|h>>>12);h=c+(f^g&(d^f))+e[13]+2850285829&4294967295;c=d+(h<<5&4294967295|h>>>27);h=g+(d^f&(c^d))+e[2]+4243563512&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[7]+1735328473&4294967295;f=g+(h<<14&4294967295|
h>>>18);h=d+(g^c&(f^g))+e[12]+2368359562&4294967295;d=f+(h<<20&4294967295|h>>>12);h=c+(d^f^g)+e[5]+4294588738&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[8]+2272392833&4294967295;g=c+(h<<11&4294967295|h>>>21);h=f+(g^c^d)+e[11]+1839030562&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[14]+4259657740&4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(d^f^g)+e[1]+2763975236&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[4]+1272893353&4294967295;g=c+(h<<11&4294967295|h>>>21);h=f+(g^
c^d)+e[7]+4139469664&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[10]+3200236656&4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(d^f^g)+e[13]+681279174&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[0]+3936430074&4294967295;g=c+(h<<11&4294967295|h>>>21);h=f+(g^c^d)+e[3]+3572445317&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[6]+76029189&4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(d^f^g)+e[9]+3654602809&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[12]+3873151461&4294967295;
g=c+(h<<11&4294967295|h>>>21);h=f+(g^c^d)+e[15]+530742520&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[2]+3299628645&4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(f^(d|~g))+e[0]+4096336452&4294967295;c=d+(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[7]+1126891415&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[14]+2878612391&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[5]+4237533241&4294967295;d=f+(h<<21&4294967295|h>>>11);h=c+(f^(d|~g))+e[12]+1700485571&4294967295;c=d+
(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[3]+2399980690&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[10]+4293915773&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[1]+2240044497&4294967295;d=f+(h<<21&4294967295|h>>>11);h=c+(f^(d|~g))+e[8]+1873313359&4294967295;c=d+(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[15]+4264355552&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[6]+2734768916&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[13]+1309151649&4294967295;
d=f+(h<<21&4294967295|h>>>11);h=c+(f^(d|~g))+e[4]+4149444226&4294967295;c=d+(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[11]+3174756917&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[2]+718787259&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[9]+3951481745&4294967295;b.a[0]=b.a[0]+c&4294967295;b.a[1]=b.a[1]+(f+(h<<21&4294967295|h>>>11))&4294967295;b.a[2]=b.a[2]+f&4294967295;b.a[3]=b.a[3]+g&4294967295}
function Lh(b,c){var d;ba(d)||(d=c.length);for(var e=d-b.b,f=b.g,g=b.f,h=0;h<d;){if(0==g)for(;h<=e;)Kh(b,c,h),h+=b.b;if(ga(c))for(;h<d;){if(f[g++]=c.charCodeAt(h++),g==b.b){Kh(b,f);g=0;break}}else for(;h<d;)if(f[g++]=c[h++],g==b.b){Kh(b,f);g=0;break}}b.f=g;b.c+=d};function Mh(b){b=b||{};this.a=void 0!==b.color?b.color:null;this.c=b.lineCap;this.f=void 0!==b.H?b.H:null;this.g=b.lineJoin;this.i=b.miterLimit;this.b=b.width;this.j=void 0}
function Nh(b){if(void 0===b.j){var c="s"+(b.a?nh(b.a):"-")+","+(void 0!==b.c?b.c.toString():"-")+","+(b.f?b.f.toString():"-")+","+(void 0!==b.g?b.g:"-")+","+(void 0!==b.i?b.i.toString():"-")+","+(void 0!==b.b?b.b.toString():"-"),d=new Jh;Lh(d,c);c=Array((56>d.f?d.b:2*d.b)-d.f);c[0]=128;for(var e=1;e<c.length-8;++e)c[e]=0;for(var f=8*d.c,e=c.length-8;e<c.length;++e)c[e]=f&255,f/=256;Lh(d,c);c=Array(16);for(e=f=0;4>e;++e)for(var g=0;32>g;g+=8)c[f++]=d.a[e]>>>g&255;if(8192>=c.length)d=String.fromCharCode.apply(null,
c);else for(d="",e=0;e<c.length;e+=8192)f=Ra(c,e,e+8192),d+=String.fromCharCode.apply(null,f);b.j=d}return b.j};function Oh(b){b=b||{};this.i=this.a=this.c=null;this.g=void 0!==b.fill?b.fill:null;this.b=void 0!==b.stroke?b.stroke:null;this.f=b.radius;this.l=[0,0];this.u=this.v=this.j=null;var c=b.zg,d,e=null,f,g=0;this.b&&(f=nh(this.b.a),g=this.b.b,void 0===g&&(g=1),e=this.b.f,vh||(e=null));var h=2*(this.f+g)+1;f={strokeStyle:f,strokeWidth:g,size:h,H:e};if(void 0===c)this.a=document.createElement("CANVAS"),this.a.height=h,this.a.width=h,d=h=this.a.width,c=this.a.getContext("2d"),this.wf(f,c,0,0),this.g?this.i=
this.a:(c=this.i=document.createElement("CANVAS"),c.height=f.size,c.width=f.size,c=c.getContext("2d"),this.vf(f,c,0,0));else{h=Math.round(h);(e=!this.g)&&(d=this.vf.bind(this,f));var g=this.b?Nh(this.b):"-",k=this.g?Gh(this.g):"-";this.c&&g==this.c[1]&&k==this.c[2]&&this.f==this.c[3]||(this.c=["c"+g+k+(void 0!==this.f?this.f.toString():"-"),g,k,this.f]);f=c.a(this.c[0],h,h,this.wf.bind(this,f),d);this.a=f.image;this.l=[f.offsetX,f.offsetY];d=f.image.width;this.i=e?f.Ih:this.a}this.j=[h/2,h/2];this.v=
[h,h];this.u=[d,d];Hh.call(this,{opacity:1,qb:!1,rotation:0,scale:1,Ua:void 0!==b.Ua?b.Ua:!0})}y(Oh,Hh);m=Oh.prototype;m.Yb=function(){return this.j};m.Wd=function(){return this.i};m.Pc=function(){return this.a};m.cc=function(){return 2};m.Jd=function(){return this.u};m.Pa=function(){return this.l};m.ob=function(){return this.v};m.Sd=Ld;m.load=Ld;m.me=Ld;
m.wf=function(b,c,d,e){c.setTransform(1,0,0,1,0,0);c.translate(d,e);c.beginPath();c.arc(b.size/2,b.size/2,this.f,0,2*Math.PI,!0);this.g&&(c.fillStyle=ph(this.g.a),c.fill());this.b&&(c.strokeStyle=b.strokeStyle,c.lineWidth=b.strokeWidth,b.H&&c.setLineDash(b.H),c.stroke());c.closePath()};
m.vf=function(b,c,d,e){c.setTransform(1,0,0,1,0,0);c.translate(d,e);c.beginPath();c.arc(b.size/2,b.size/2,this.f,0,2*Math.PI,!0);c.fillStyle=nh(Bh);c.fill();this.b&&(c.strokeStyle=b.strokeStyle,c.lineWidth=b.strokeWidth,b.H&&c.setLineDash(b.H),c.stroke());c.closePath()};function Ph(b){b=b||{};this.i=null;this.f=Qh;void 0!==b.geometry&&Rh(this,b.geometry);this.c=void 0!==b.fill?b.fill:null;this.g=void 0!==b.image?b.image:null;this.b=void 0!==b.stroke?b.stroke:null;this.j=void 0!==b.text?b.text:null;this.a=b.zIndex}Ph.prototype.J=function(){return this.i};Ph.prototype.va=function(){return this.j};function Rh(b,c){ia(c)?b.f=c:"string"===typeof c?b.f=function(b){return b.get(c)}:c?void 0!==c&&(b.f=function(){return c}):b.f=Qh;b.i=c}
function Sh(b){if(!ia(b)){var c;c=ea(b)?b:[b];b=function(){return c}}return b}var Th=null;function Uh(){if(!Th){var b=new Fh({color:"rgba(255,255,255,0.4)"}),c=new Mh({color:"#3399CC",width:1.25});Th=[new Ph({image:new Oh({fill:b,stroke:c,radius:5}),fill:b,stroke:c})]}return Th}
function Vh(){var b={},c=[255,255,255,1],d=[0,153,255,1];b.Polygon=[new Ph({fill:new Fh({color:[255,255,255,.5]})})];b.MultiPolygon=b.Polygon;b.LineString=[new Ph({stroke:new Mh({color:c,width:5})}),new Ph({stroke:new Mh({color:d,width:3})})];b.MultiLineString=b.LineString;b.Circle=b.Polygon.concat(b.LineString);b.Point=[new Ph({image:new Oh({radius:6,fill:new Fh({color:d}),stroke:new Mh({color:c,width:1.5})}),zIndex:Infinity})];b.MultiPoint=b.Point;b.GeometryCollection=b.Polygon.concat(b.LineString,
b.Point);return b}function Qh(b){return b.J()};function Wh(b){mb.call(this);this.c=void 0;this.a="geometry";this.j=null;this.i=void 0;this.g=null;I(this,L(this.a),this.Hc,this);void 0!==b&&(b instanceof hh||!b?Xh(this,b):this.ka(b))}y(Wh,mb);m=Wh.prototype;m.clone=function(){var b=new Wh(Ua({},this.u));Yh(b,this.a);var c=this.J();c&&Xh(b,c.clone());(c=this.j)&&Zh(b,c);return b};m.J=function(){return this.get(this.a)};m.Ya=function(){return this.c};m.mi=function(){this.b()};
m.Hc=function(){this.g&&(G(this.g),this.g=null);var b=this.J();b&&(this.g=I(b,"change",this.mi,this));this.b()};function Xh(b,c){b.set(b.a,c)}function Zh(b,c){b.j=c;b.i=c?$h(c):void 0;b.b()}function Yh(b,c){cb(b,L(b.a),b.Hc,b);b.a=c;I(b,L(b.a),b.Hc,b);b.Hc()}function $h(b){if(!ia(b)){var c;c=ea(b)?b:[b];b=function(){return c}}return b};function ai(){this.ua=null}function bi(b,c,d){var e;d&&(e={ib:d.ib?d.ib:b.f(c),Fb:d.Fb});var f;e&&(f={Fb:e.Fb,ib:e.ib?e.ib:b.ua,fj:e.fj});return f}function ci(b,c,d){var e=d?Ne(d.Fb):null;d=d?Ne(d.ib):null;return e&&d&&!$e(e,d)?b instanceof hh?(c?b.clone():b).transform(c?e:d,c?d:e):df(c?b.slice():b,c?e:d,c?d:e):b};function di(){this.ua=null}y(di,ai);di.prototype.aa=function(){return"xml"};di.prototype.Sc=function(b,c){if(ld(b))return ei(this,b,c);if(od(b))return this.ae(b,c);if("string"===typeof b){var d=zd(b);return ei(this,d,c)}return[]};function ei(b,c,d){var e=[];for(c=c.firstChild;c;c=c.nextSibling)1==c.nodeType&&Sc(e,b.ae(c,d));return e}di.prototype.f=function(b){return ld(b)?this.ua:od(b)?this.Jf(b):"string"===typeof b?(zd(b),this.ua):null};di.prototype.Jf=function(){return this.ua};function fi(b,c,d,e,f,g){var h=f[0],k=f[1],l=f[4],n=f[5],q=f[12];f=f[13];for(var p=g?g:[],r=0;c<d;c+=e){var u=b[c],v=b[c+1];p[r++]=h*u+l*v+q;p[r++]=k*u+n*v+f}g&&p.length!=r&&(p.length=r);return p};function gi(){hh.call(this);this.layout="XY";this.a=2;this.o=null}y(gi,hh);function hi(b){if("XY"==b)return 2;if("XYZ"==b||"XYM"==b)return 3;if("XYZM"==b)return 4}m=gi.prototype;m.yc=function(b){var c=this.o,d=this.o.length,e=this.a;b=Jb(Infinity,Infinity,-Infinity,-Infinity,b);return Mb(b,c,0,d,e)};
m.Ld=function(b){this.l!=this.f&&(Va(this.i),this.j=0,this.l=this.f);if(0>b||0!==this.j&&b<=this.j)return this;var c=b.toString();if(this.i.hasOwnProperty(c))return this.i[c];var d=this.Ib(b);if(d.o.length<this.o.length)return this.i[c]=d;this.j=b;return this};m.Ib=function(){return this};function ii(b,c,d){b.a=hi(c);b.layout=c;b.o=d}
function ji(b,c,d,e){if(c)d=hi(c);else{for(c=0;c<e;++c){if(0===d.length){b.layout="XY";b.a=2;return}d=d[0]}d=d.length;c=2==d?"XY":3==d?"XYZ":4==d?"XYZM":void 0}b.layout=c;b.a=d}m.tc=function(b){this.o&&(b(this.o,this.o,this.a),this.b())};m.translate=function(b,c){var d=this.o;if(d){var e=d.length,f=this.a,g=d?d:[],h=0,k,l;for(k=0;k<e;k+=f)for(g[h++]=d[k]+b,g[h++]=d[k+1]+c,l=k+2;l<k+f;++l)g[h++]=d[l];d&&g.length!=h&&(g.length=h);this.b()}};function ki(b,c){var d=0,e,f;e=0;for(f=c.length;e<f;++e)b[d++]=c[e];return d}function li(b,c,d,e){var f,g;f=0;for(g=d.length;f<g;++f){var h=d[f],k;for(k=0;k<e;++k)b[c++]=h[k]}return c}function mi(b,c,d,e,f){f=f?f:[];var g=0,h,k;h=0;for(k=d.length;h<k;++h)c=li(b,c,d[h],e),f[g++]=c;f.length=g;return f};function ni(b,c,d,e,f){f=void 0!==f?f:[];for(var g=0;c<d;c+=e)f[g++]=b.slice(c,c+e);f.length=g;return f}function oi(b,c,d,e,f){f=void 0!==f?f:[];var g=0,h,k;h=0;for(k=d.length;h<k;++h){var l=d[h];f[g++]=ni(b,c,l,e,f[g]);c=l}f.length=g;return f};function pi(b,c,d,e,f){var g=NaN,h=NaN,k=(d-c)/e;if(0!==k)if(1==k)g=b[c],h=b[c+1];else if(2==k)g=.5*b[c]+.5*b[c+e],h=.5*b[c+1]+.5*b[c+e+1];else{var h=b[c],k=b[c+1],l=0,g=[0],n;for(n=c+e;n<d;n+=e){var q=b[n],p=b[n+1],l=l+Math.sqrt((q-h)*(q-h)+(p-k)*(p-k));g.push(l);h=q;k=p}d=.5*l;l=0;n=g.length;for(q=!1;l<n;)h=l+(n-l>>1),k=+Qc(g[h],d),0>k?l=h+1:(n=h,q=!k);h=q?l:~l;0>h?(d=(d-g[-h-2])/(g[-h-1]-g[-h-2]),c+=(-h-2)*e,g=b[c],g=g+d*(b[c+e]-g),h=b[c+1],h=h+d*(b[c+e+1]-h)):(g=b[c+h*e],h=b[c+h*e+1])}return f?
(f[0]=g,f[1]=h,f):[g,h]};function qi(b,c,d,e,f,g){for(var h=!1,k=b[d-e],l=b[d-e+1];c<d;c+=e){var n=b[c],q=b[c+1];l>g!=q>g&&f<(n-k)*(g-l)/(q-l)+k&&(h=!h);k=n;l=q}return h};function ri(b,c,d,e,f,g,h){var k=(d-c)/e;if(3>k){for(;c<d;c+=e)g[h++]=b[c],g[h++]=b[c+1];return h}var l=Array(k);l[0]=1;l[k-1]=1;d=[c,d-e];for(var n=0,q;0<d.length;){var p=d.pop(),r=d.pop(),u=0,v=b[r],z=b[r+1],x=b[p],C=b[p+1];for(q=r+e;q<p;q+=e){var H,E=b[q];H=b[q+1];var D=v,R=z,F=x-D,M=C-R;if(0!==F||0!==M){var T=((E-D)*F+(H-R)*M)/(F*F+M*M);1<T?(D=x,R=C):0<T&&(D+=F*T,R+=M*T)}E=D-E;H=R-H;H=E*E+H*H;H>u&&(n=q,u=H)}u>f&&(l[(n-c)/e]=1,r+e<n&&d.push(r,n),n+e<p&&d.push(n,p))}for(q=0;q<k;++q)l[q]&&(g[h++]=
b[c+q*e],g[h++]=b[c+q*e+1]);return h}
function si(b,c,d,e,f,g,h,k){var l,n;l=0;for(n=d.length;l<n;++l){var q=d[l];a:{var p=b,r=q,u=e,v=f,z=g;if(c!=r){var x=v*Math.round(p[c]/v),C=v*Math.round(p[c+1]/v);c+=u;z[h++]=x;z[h++]=C;var H=void 0,E=void 0;do if(H=v*Math.round(p[c]/v),E=v*Math.round(p[c+1]/v),c+=u,c==r){z[h++]=H;z[h++]=E;break a}while(H==x&&E==C);for(;c<r;){var D,R;D=v*Math.round(p[c]/v);R=v*Math.round(p[c+1]/v);c+=u;if(D!=H||R!=E){var F=H-x,M=E-C,T=D-x,K=R-C;F*K==M*T&&(0>F&&T<F||F==T||0<F&&T>F)&&(0>M&&K<M||M==K||0<M&&K>M)||(z[h++]=
H,z[h++]=E,x=H,C=E);H=D;E=R}}z[h++]=H;z[h++]=E}}k.push(h);c=q}return h};function ti(b,c){gi.call(this);this.c=null;this.g=-1;this.Y(b,c)}y(ti,gi);m=ti.prototype;m.clone=function(){var b=new ti(null);b.K(this.layout,this.o.slice());return b};m.ja=function(){return ni(this.o,0,this.o.length,this.a)};function ui(b){if(b.g!=b.f){var c;c=pi(b.o,0,b.o.length,b.a,b.c);b.c=c;b.g=b.f}return b.c}m.Ib=function(b){var c=[];c.length=ri(this.o,0,this.o.length,this.a,b,c,0);b=new ti(null);b.K("XY",c);return b};m.aa=function(){return"LineString"};
m.Y=function(b,c){b?(ji(this,c,b,1),this.o||(this.o=[]),this.o.length=li(this.o,0,b,this.a),this.b()):this.K("XY",null)};m.K=function(b,c){ii(this,b,c);this.b()};function vi(b,c){gi.call(this);this.Y(b,c)}y(vi,gi);m=vi.prototype;m.clone=function(){var b=new vi(null);wi(b,this.layout,this.o.slice());return b};m.ja=function(){return ni(this.o,0,this.o.length,this.a)};m.Ib=function(b){var c=[];c.length=ri(this.o,0,this.o.length,this.a,b,c,0);b=new vi(null);wi(b,"XY",c);return b};m.aa=function(){return"LinearRing"};m.Y=function(b,c){b?(ji(this,c,b,1),this.o||(this.o=[]),this.o.length=li(this.o,0,b,this.a),this.b()):wi(this,"XY",null)};
function wi(b,c,d){ii(b,c,d);b.b()};function xi(b,c){gi.call(this);this.g=[];this.Y(b,c)}y(xi,gi);m=xi.prototype;m.clone=function(){var b=new xi(null);b.K(this.layout,this.o.slice(),this.g.slice());return b};m.ja=function(){return oi(this.o,0,this.g,this.a)};m.Hb=function(){return this.g};function yi(b){var c=b.o,d=b.g;b=b.layout;var e=[],f=0,g,h;g=0;for(h=d.length;g<h;++g){var k=d[g],l=new ti(null);l.K(b,c.slice(f,k));e.push(l);f=k}return e}
function zi(b){var c=[],d=b.o,e=0,f=b.g;b=b.a;var g,h;g=0;for(h=f.length;g<h;++g){var k=f[g],e=pi(d,e,k,b);Sc(c,e);e=k}return c}m.Ib=function(b){var c=[],d=[],e=this.o,f=this.g,g=this.a,h=0,k=0,l,n;l=0;for(n=f.length;l<n;++l){var q=f[l],k=ri(e,h,q,g,b,c,k);d.push(k);h=q}c.length=k;b=new xi(null);b.K("XY",c,d);return b};m.aa=function(){return"MultiLineString"};
m.Y=function(b,c){if(b){ji(this,c,b,2);this.o||(this.o=[]);var d=mi(this.o,0,b,this.a,this.g);this.o.length=0===d.length?0:d[d.length-1];this.b()}else this.K("XY",null,this.g)};m.K=function(b,c,d){ii(this,b,c);this.g=d;this.b()};function Ai(b,c){var d=b.layout,e=[],f=[],g,h;g=0;for(h=c.length;g<h;++g){var k=c[g];0===g&&(d=k.layout);Sc(e,k.o);f.push(e.length)}b.K(d,e,f)};function Bi(b,c){gi.call(this);this.Y(b,c)}y(Bi,gi);m=Bi.prototype;m.clone=function(){var b=new Bi(null);b.K(this.layout,this.o.slice());return b};m.ja=function(){return this.o?this.o.slice():[]};m.yc=function(b){var c=this.o,d=c[0],c=c[1];return Jb(d,c,d,c,b)};m.aa=function(){return"Point"};m.Y=function(b,c){b?(ji(this,c,b,0),this.o||(this.o=[]),this.o.length=ki(this.o,b),this.b()):this.K("XY",null)};m.K=function(b,c){ii(this,b,c);this.b()};function Ci(b,c){gi.call(this);this.Y(b,c)}y(Ci,gi);m=Ci.prototype;m.clone=function(){var b=new Ci(null);b.K(this.layout,this.o.slice());return b};m.ja=function(){return ni(this.o,0,this.o.length,this.a)};m.aa=function(){return"MultiPoint"};m.Y=function(b,c){b?(ji(this,c,b,1),this.o||(this.o=[]),this.o.length=li(this.o,0,b,this.a),this.b()):this.K("XY",null)};m.K=function(b,c){ii(this,b,c);this.b()};function Di(b,c,d,e,f,g,h){var k,l,n,q,p,r=f[g+1],u=[],v=d[0];n=b[v-e];p=b[v-e+1];for(k=c;k<v;k+=e){q=b[k];l=b[k+1];if(r<=p&&l<=r||p<=r&&r<=l)n=(r-p)/(l-p)*(q-n)+n,u.push(n);n=q;p=l}v=NaN;p=-Infinity;u.sort(Qc);n=u[0];k=1;for(l=u.length;k<l;++k){q=u[k];var z=Math.abs(q-n);if(z>p){n=(n+q)/2;var x;a:if(0!==d.length&&qi(b,c,d[0],e,n,r)){var C=x=void 0;x=1;for(C=d.length;x<C;++x)if(qi(b,d[x-1],d[x],e,n,r)){x=!1;break a}x=!0}else x=!1;x&&(v=n,p=z)}n=q}isNaN(v)&&(v=f[g]);return h?(h.push(v,r),h):[v,r]}
;function Ei(b,c,d,e){for(var f=0,g=b[d-e],h=b[d-e+1];c<d;c+=e)var k=b[c],l=b[c+1],f=f+(k-g)*(l+h),g=k,h=l;return 0<f}function Fi(b,c,d,e){var f=0;e=void 0!==e?e:!1;var g,h;g=0;for(h=c.length;g<h;++g){var k=c[g],f=Ei(b,f,k,d);if(0===g){if(e&&f||!e&&!f)return!1}else if(e&&!f||!e&&f)return!1;f=k}return!0}
function Gi(b,c,d,e,f){f=void 0!==f?f:!1;var g,h;g=0;for(h=d.length;g<h;++g){var k=d[g],l=Ei(b,c,k,e);if(0===g?f&&l||!f&&!l:f&&!l||!f&&l)for(var l=b,n=k,q=e;c<n-q;){var p;for(p=0;p<q;++p){var r=l[c+p];l[c+p]=l[n-q+p];l[n-q+p]=r}c+=q;n-=q}c=k}return c}function Hi(b,c,d,e){var f=0,g,h;g=0;for(h=c.length;g<h;++g)f=Gi(b,f,c[g],d,e);return f};function Ii(b,c){gi.call(this);this.c=[];this.A=-1;this.C=null;this.D=-1;this.g=null;this.Y(b,c)}y(Ii,gi);m=Ii.prototype;m.clone=function(){var b=new Ii(null);b.K(this.layout,this.o.slice(),this.c.slice());return b};m.ja=function(b){var c;void 0!==b?(c=Ji(this).slice(),Gi(c,0,this.c,this.a,b)):c=this.o;return oi(c,0,this.c,this.a)};m.Hb=function(){return this.c};function Ki(b){if(b.A!=b.f){var c=Rb(b.G());b.C=Di(Ji(b),0,b.c,b.a,c,0);b.A=b.f}return b.C}
function Ji(b){if(b.D!=b.f){var c=b.o;Fi(c,b.c,b.a)?b.g=c:(b.g=c.slice(),b.g.length=Gi(b.g,0,b.c,b.a));b.D=b.f}return b.g}m.Ib=function(b){var c=[],d=[];c.length=si(this.o,0,this.c,this.a,Math.sqrt(b),c,0,d);b=new Ii(null);b.K("XY",c,d);return b};m.aa=function(){return"Polygon"};m.Y=function(b,c){if(b){ji(this,c,b,2);this.o||(this.o=[]);var d=mi(this.o,0,b,this.a,this.c);this.o.length=0===d.length?0:d[d.length-1];this.b()}else this.K("XY",null,this.c)};m.K=function(b,c,d){ii(this,b,c);this.c=d;this.b()};function Li(b,c){gi.call(this);this.c=[];this.A=-1;this.C=null;this.D=-1;this.g=null;this.Y(b,c)}y(Li,gi);m=Li.prototype;m.clone=function(){for(var b=new Li(null),c=this.c.length,d=Array(c),e=0;e<c;++e)d[e]=this.c[e].slice();Mi(b,this.layout,this.o.slice(),d);return b};m.ja=function(b){var c;void 0!==b?(c=Ni(this).slice(),Hi(c,this.c,this.a,b)):c=this.o;b=c;c=this.c;var d=this.a,e=0,f=[],g=0,h,k;h=0;for(k=c.length;h<k;++h){var l=c[h];f[g++]=oi(b,e,l,d,f[g]);e=l[l.length-1]}f.length=g;return f};
function Oi(b){if(b.A!=b.f){var c=b.o,d=b.c,e=b.a,f=0,g=[],h,k,l=Eb();h=0;for(k=d.length;h<k;++h){var n=d[h],l=Mb(Jb(Infinity,Infinity,-Infinity,-Infinity,void 0),c,f,n[0],e);g.push((l[0]+l[2])/2,(l[1]+l[3])/2);f=n[n.length-1]}c=Ni(b);d=b.c;e=b.a;f=0;h=[];k=0;for(l=d.length;k<l;++k)n=d[k],h=Di(c,f,n,e,g,2*k,h),f=n[n.length-1];b.C=h;b.A=b.f}return b.C}
function Ni(b){if(b.D!=b.f){var c=b.o,d;a:{d=b.c;var e,f;e=0;for(f=d.length;e<f;++e)if(!Fi(c,d[e],b.a,void 0)){d=!1;break a}d=!0}d?b.g=c:(b.g=c.slice(),b.g.length=Hi(b.g,b.c,b.a));b.D=b.f}return b.g}m.Ib=function(b){var c=[],d=[],e=this.o,f=this.c,g=this.a;b=Math.sqrt(b);var h=0,k=0,l,n;l=0;for(n=f.length;l<n;++l){var q=f[l],p=[],k=si(e,h,q,g,b,c,k,p);d.push(p);h=q[q.length-1]}c.length=k;e=new Li(null);Mi(e,"XY",c,d);return e};m.aa=function(){return"MultiPolygon"};
m.Y=function(b,c){if(b){ji(this,c,b,3);this.o||(this.o=[]);var d=this.o,e=this.a,f=this.c,g=0,f=f?f:[],h=0,k,l;k=0;for(l=b.length;k<l;++k)g=mi(d,g,b[k],e,f[h]),f[h++]=g,g=g[g.length-1];f.length=h;0===f.length?this.o.length=0:(d=f[f.length-1],this.o.length=0===d.length?0:d[d.length-1]);this.b()}else Mi(this,"XY",null,this.c)};function Mi(b,c,d,e){ii(b,c,d);b.c=e;b.b()}
function Pi(b,c){var d=b.layout,e=[],f=[],g,h,k;g=0;for(h=c.length;g<h;++g){var l=c[g];0===g&&(d=l.layout);var n=e.length;k=l.Hb();var q,p;q=0;for(p=k.length;q<p;++q)k[q]+=n;Sc(e,l.o);f.push(k)}Mi(b,d,e,f)};function Qi(b){b=b?b:{};this.Bc=b.Bc;this.Ac=b.Ac;this.je=b.je;this.ge="";this.a={};this.a["http://www.opengis.net/gml"]={featureMember:Bd(Qi.prototype.Tc),featureMembers:Bd(Qi.prototype.Tc)};this.ua=null}y(Qi,di);var Ri=/^[\s\xa0]*$/;m=Qi.prototype;
m.Tc=function(b,c){var d=id(b),e;if("FeatureCollection"==d)"http://www.opengis.net/wfs"===b.namespaceURI?e=Q([],this.a,b,c,this):e=Q(null,this.a,b,c,this);else if("featureMembers"==d||"featureMember"==d){var f=c[0],g=f.featureType;e=f.featureNS;var h,k;if(!g&&b.childNodes){g=[];e={};h=0;for(k=b.childNodes.length;h<k;++h){var l=b.childNodes[h];if(1===l.nodeType){var n=l.nodeName.split(":").pop();if(-1===g.indexOf(n)){var q="",p=0,l=l.namespaceURI,r;for(r in e){if(e[r]===l){q=r;break}++p}q||(q="p"+
p,e[q]=l);g.push(q+":"+n)}}}f.featureType=g;f.featureNS=e}"string"===typeof e&&(h=e,e={},e.p0=h);r={};var g=ea(g)?g:[g],u;for(u in e){f={};h=0;for(k=g.length;h<k;++h)(-1===g[h].indexOf(":")?"p0":g[h].split(":")[0])===u&&(f[g[h].split(":").pop()]="featureMembers"==d?Ad(this.$d,this):Bd(this.$d,this));r[e[u]]=f}e=Q([],r,b,c)}e||(e=[]);return e};
m.$d=function(b,c){var d,e=b.getAttribute("fid")||sd(b,"http://www.opengis.net/gml","id"),f={},g;for(d=b.firstElementChild;d;d=d.nextElementSibling){var h=id(d);if(0===d.childNodes.length||1===d.childNodes.length&&(3===d.firstChild.nodeType||4===d.firstChild.nodeType)){var k=ed(d);Ri.test(k)&&(k=void 0);f[h]=k}else{"boundedBy"!==h&&(g=h);var l=d,n=c,k=n[0];k.srsName=l.firstElementChild.getAttribute("srsName");k=(l=Q(null,this.cg,l,n,this))?ci(l,!1,k):void 0;f[h]=k}}d=new Wh(f);g&&Yh(d,g);e&&(d.c=
e,d.b());return d};m.$i=function(b,c){var d=this.Uc(b,c);if(d){var e=new Bi(null);e.K("XYZ",d);return e}};m.Yi=function(b,c){var d=Q([],this.fg,b,c,this);if(d)return new Ci(d)};m.Xi=function(b,c){var d=Q([],this.eg,b,c,this);if(d){var e=new xi(null);Ai(e,d);return e}};m.Zi=function(b,c){var d=Q([],this.gg,b,c,this);if(d){var e=new Li(null);Pi(e,d);return e}};m.Cf=function(b,c){Id(this.hg,b,c,this)};m.hf=function(b,c){Id(this.dg,b,c,this)};m.Df=function(b,c){Id(this.ig,b,c,this)};
m.Hf=function(b,c){var d=this.Uc(b,c);if(d){var e=new ti(null);e.K("XYZ",d);return e}};m.Ui=function(b,c){var d=Q(null,this.se,b,c,this);if(d)return d};m.Wi=function(b,c){var d=this.Uc(b,c);if(d){var e=new vi(null);wi(e,"XYZ",d);return e}};m.If=function(b,c){var d=Q([null],this.bg,b,c,this);if(d&&d[0]){var e=new Ii(null),f=d[0],g=[f.length],h,k;h=1;for(k=d.length;h<k;++h)Sc(f,d[h]),g.push(f.length);e.K("XYZ",f,g);return e}};m.Uc=function(b,c){return Q(null,this.se,b,c,this)};
m.fg={"http://www.opengis.net/gml":{pointMember:Ad(Qi.prototype.Cf),pointMembers:Ad(Qi.prototype.Cf)}};m.eg={"http://www.opengis.net/gml":{lineStringMember:Ad(Qi.prototype.hf),lineStringMembers:Ad(Qi.prototype.hf)}};m.gg={"http://www.opengis.net/gml":{polygonMember:Ad(Qi.prototype.Df),polygonMembers:Ad(Qi.prototype.Df)}};m.hg={"http://www.opengis.net/gml":{Point:Ad(Qi.prototype.Uc)}};m.dg={"http://www.opengis.net/gml":{LineString:Ad(Qi.prototype.Hf)}};m.ig={"http://www.opengis.net/gml":{Polygon:Ad(Qi.prototype.If)}};
m.te={"http://www.opengis.net/gml":{LinearRing:Bd(Qi.prototype.Ui)}};m.ae=function(b,c){var d={Bc:this.Bc,Ac:this.Ac};c&&Ua(d,bi(this,b,c));return this.Tc(b,[d])};m.Jf=function(b){return Ne(this.je?this.je:b.firstElementChild.getAttribute("srsName"))};function Si(b){b=b?b:{};Qi.call(this,b);this.a["http://www.opengis.net/gml"].featureMember=Ad(Qi.prototype.Tc);this.ge=b.ge?b.ge:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd"}y(Si,Qi);m=Si.prototype;
m.Ff=function(b,c){var d=ed(b).replace(/^\s*|\s*$/g,""),e=c[0].srsName,f=b.parentNode.getAttribute("srsDimension"),g="enu";e&&(e=Ne(e))&&(g=e.g);d=d.split(/[\s,]+/);e=2;b.getAttribute("srsDimension")?e=Sd(b.getAttribute("srsDimension")):b.getAttribute("dimension")?e=Sd(b.getAttribute("dimension")):f&&(e=Sd(f));for(var h,k,l=[],n=0,q=d.length;n<q;n+=e)f=parseFloat(d[n]),h=parseFloat(d[n+1]),k=3===e?parseFloat(d[n+2]):0,"en"===g.substr(0,2)?l.push(f,h,k):l.push(h,f,k);return l};
m.Si=function(b,c){var d=Q([null],this.ag,b,c,this);return Jb(d[1][0],d[1][1],d[1][3],d[1][4])};m.Oh=function(b,c){var d=Q(void 0,this.te,b,c,this);d&&c[c.length-1].push(d)};m.Ei=function(b,c){var d=Q(void 0,this.te,b,c,this);d&&(c[c.length-1][0]=d)};m.se={"http://www.opengis.net/gml":{coordinates:Bd(Si.prototype.Ff)}};m.bg={"http://www.opengis.net/gml":{innerBoundaryIs:Si.prototype.Oh,outerBoundaryIs:Si.prototype.Ei}};m.ag={"http://www.opengis.net/gml":{coordinates:Ad(Si.prototype.Ff)}};
m.cg={"http://www.opengis.net/gml":{Point:Bd(Qi.prototype.$i),MultiPoint:Bd(Qi.prototype.Yi),LineString:Bd(Qi.prototype.Hf),MultiLineString:Bd(Qi.prototype.Xi),LinearRing:Bd(Qi.prototype.Wi),Polygon:Bd(Qi.prototype.If),MultiPolygon:Bd(Qi.prototype.Zi),Box:Bd(Si.prototype.Si)}};function Ti(b){b=b?b:{};this.b="http://mapserver.gis.umn.edu/mapserver";this.a=new Si;this.c=b.layers?b.layers:null;this.ua=null}y(Ti,di);
Ti.prototype.ae=function(b,c){var d={featureType:this.Bc,featureNS:this.Ac};c&&Ua(d,bi(this,b,c));var e=[d];b.setAttribute("namespaceURI",this.b);var f=id(b),d=[];if(0!==b.childNodes.length){if("msGMLOutput"==f)for(var g=0,h=b.childNodes.length;g<h;g++){var k=b.childNodes[g];if(1===k.nodeType){var l=e[0],n=k.localName.replace("_layer","");if(!this.c||0<=this.c.indexOf(n)){n+="_feature";l.featureType=n;l.featureNS=this.b;var q={};q[n]=Ad(this.a.$d,this.a);l=P([l.featureNS,null],q);k.setAttribute("namespaceURI",
this.b);(k=Q([],l,k,e,this.a))&&Sc(d,k)}}}"FeatureCollection"==f&&(e=Q([],this.a.a,b,[{}],this.a))&&(d=e)}return d};A.value("ngeoQueryResult",{Yc:[],total:0});function Ui(b,c,d,e){d=void 0!==d?d:{};this.b=void 0!==d.limit?d.limit:50;this.i=void 0!==d.sourceIdProperty?d.sourceIdProperty:"querySourceId";this.j=void 0!==d.sourceIdsProperty?d.sourceIdsProperty:"querySourceIds";this.f=e;this.c=b;this.hc=c;this.g=[];this.a={}}Ui.$inject=["$http","ngeoQueryResult","ngeoQueryOptions","ngeoLayerHelper"];
Ui.prototype.Ee=function(b){var c=b.id;if(!b.wmsSource)if(b.layer&&(b.layer instanceof pf||b.layer instanceof qf)){var d=b.layer.S();d&&d instanceof Xf&&(b.wmsSource=d)}else b.wmsSource=new Xf({url:b.url,params:b.params});b.format?!b.infoFormat&&b.format instanceof Ti&&(b.infoFormat="application/vnd.ogc.gml"):(b.infoFormat||(b.infoFormat="application/vnd.ogc.gml"),d=b.wmsSource.a.LAYERS.split(","),"application/vnd.ogc.gml"===b.infoFormat&&(b.format=new Ti({layers:d})));this.g.push(b);d={features:[],
id:c,identifierAttributeField:void 0!==b.identifierAttributeField?b.identifierAttributeField:c,label:void 0!==b.label?b.label:c,pending:!1};this.hc.Yc.push(d);this.a[c]={source:b,resultSource:d}};Ui.prototype.addSource=Ui.prototype.Ee;Ui.prototype.Fe=function(b){b.forEach(this.Ee,this)};Ui.prototype.addSources=Ui.prototype.Fe;Ui.prototype.clear=function(){Vi(this)};Ui.prototype.clear=Ui.prototype.clear;Ui.prototype.gf=function(b,c){Vi(this);2===c.length&&Wi(this,b,c)};Ui.prototype.issue=Ui.prototype.gf;
function Wi(b,c,d){var e=U(c),f=Re(e.X()),g,h,k,l,n,q,p={},r=e.R();b.f.Dc(Xg(c)).forEach(function(b){if(hf(b)){var c=b.get(this.i);g=c=ha(c)||ga(c)?c:"";h=(b.get(this.j)||[]).slice();if(g&&this.a[g]||h.length){g&&h.push(g);for(var c=0,d=h.length;c<d;c++){g=h[c];n=this.a[g];var e;(e=!n.source.validateLayerParams)||(e=-1!==b.S().a.LAYERS.split(",").indexOf(n.source.wmsSource.a.LAYERS));e&&(n.resultSource.pending=!0,k=n.source.infoFormat,"application/vnd.ogc.gml"===k?(l=n.source.wmsSource.l,p[l]||(p[l]=
[]),p[l].push(n)):n.resultSource.pending=!1)}}}},b);$b(p,function(b){k=b[0].source.infoFormat;var c=b[0].source.wmsSource.a.LAYERS.split(",");q=$f(b[0].source.wmsSource,d,r,f,{INFO_FORMAT:k,FEATURE_COUNT:this.b});for(var e=1,g=b.length;e<g;e++)c=c.concat(b[e].source.wmsSource.a.LAYERS.split(","));c=c.join(",");q=Bf(q,"LAYERS",c);q=Bf(q,"QUERY_LAYERS",c);this.c.get(q).then(function(b,c){b.forEach(function(b){var d=b.source.format.Sc(c.data);b.resultSource.pending=!1;b.resultSource.features=d;this.hc.total+=
d.length},this)}.bind(this,b))},b)}function Vi(b){b.hc.total=0;b.hc.Yc.forEach(function(b){b.features.length=0},b)}A.service("ngeoQuery",Ui);function Xi(b,c,d){this.i=b;this.f=c;this.c=d;this.b=[];this.a={};I(c,"load",this.g,this,!0)}Xi.$inject=["ngeoQuery","gmfThemes","gmfWmsUrl"];Xi.prototype.g=function(){this.f.Gc().then(function(b){for(var c=0,d=b.length;c<d;c++)Yi(this,b[c]);this.i.Fe(this.b)}.bind(this))};
function Yi(b,c){var d=c.metadata,e=c.children,f=c.id,g=d.identifierAttributeField,h=d.wmsLayers||d.queryLayers||c.layers,k=c.name,d=d.wmsUrl||c.url||b.c,l=!1;if(e)for(f=0,g=e.length;f<g;f++)Yi(b,e[f]);else if(!b.a[f]){if(c.childLayers&&c.childLayers.length){var n=[];c.childLayers.forEach(function(b){n.push(b.name)},b);h=n.join(",")}else"WMS"===c.type&&(l=!0);e={id:f,identifierAttributeField:g,label:k,params:{LAYERS:h},url:d,validateLayerParams:l};b.a[f]=e;b.b.push(e)}}
B.service("gmfQueryManager",Xi);A.value("ngeoPopupTemplateUrl",function(b,c){var d=c.ngeoPopupTemplateurl;return void 0!==d?d:"ngeo/popup.html"});function Zi(b){return{restrict:"A",templateUrl:b,link:function(b,d){d.addClass("popover");b.close=function(b){b&&(b.stopPropagation(),b.preventDefault());d.addClass("hidden")};b.$watch("open",function(b){d.css("display",b?"block":"none")})}}}Zi.$inject=["ngeoPopupTemplateUrl"];A.directive("ngeoPopup",Zi);function $i(b,c){this.a=c.$new(!0);this.b=angular.element("<div ngeo-popup></div>");b(this.b)(this.a);angular.element(document.body).append(this.b)}function aj(b,c){return function(){return new $i(b,c)}}aj.$inject=["$compile","$rootScope"];A.factory("ngeoCreatePopup",aj);A.value("ngeoLayertreeTemplateUrl",function(b,c){var d=c.ngeoLayertreeTemplateurl;return void 0!==d?d:"ngeo/layertree.html"});function bj(b,c){return{restrict:"A",scope:!0,templateUrl:c,controller:"NgeoLayertreeController"}}bj.$inject=["$compile","ngeoLayertreeTemplateUrl"];A.directive("ngeoLayertree",bj);
function cj(b,c,d){this.isRoot=c=void 0===d.ngeoLayertreeNotroot;var e=d.ngeoLayertree;this.node=void 0;c?b.$watch(e,function(b){this.node=b}.bind(this)):this.node=b.$eval(e);e=b.$eval(d.ngeoLayertreeMap);this.parent=b.$parent.layertreeCtrl;this.uid=w(this);this.depth=c?0:this.parent.depth+1;b.uid=this.uid;b.depth=this.depth;this.map=e;e=d.ngeoLayertreeNodelayer;void 0===e&&(e=b.$eval(d.ngeoLayertreeNodelayerexpr));this.nodelayerExpr=e;this.layer=c?null:b.$eval(e,{node:this.node,depth:this.depth});
c=d.ngeoLayertreeListeners;void 0===c&&(c=b.$eval(d.ngeoLayertreeListenersexpr));this.listenersExpr=c;null!=c&&b.$eval(c,{treeScope:b,treeCtrl:this});b.layertreeCtrl=this}sa("ngeo.LayertreeController",cj);cj.$inject=["$scope","$element","$attrs"];cj.prototype.Yg=function(b){var c=this.layer,d=this.map;if(void 0!==b)b?Yg(d,c):kf(Xg(d)).remove(c);else return 0<=kf(Xg(d)).a.indexOf(c)};cj.prototype.getSetActive=cj.prototype.Yg;A.controller("NgeoLayertreeController",cj);B.value("gmfLayertreeTemplate",function(){return'<div ngeo-layertree="gmfLayertreeCtrl.tree" ngeo-layertree-map="gmfLayertreeCtrl.map" ngeo-layertree-nodelayer="gmfLayertreeCtrl.getLayer(node, depth)" ngeo-layertree-listeners="gmfLayertreeCtrl.listeners(treeScope, treeCtrl)" ngeo-layertree-templateurl="gmf/layertree.html"</div>'});A.value("ngeoLayertreeTemplateUrl",function(){return"gmf/layertree.html"});
function dj(b){return{scope:{map:"=gmfLayertreeMap",tree:"=gmfLayertreeSource",openLinksInNewWindowFn:"&gmfLayertreeOpenlinksinnewwindow"},bindToController:!0,controller:"GmfLayertreeController",controllerAs:"gmfLayertreeCtrl",template:b}}dj.$inject=["gmfLayertreeTemplate"];B.directive("gmfLayertree",dj);function V(b,c,d,e,f){this.i=b;this.g=c;this.a=f;this.Qa=e;this.j=d();this.f={};this.b={};this.openLinksInNewWindow=!0===this.openLinksInNewWindowFn()?!0:!1;this.c=this.Qa.Te(this.map,"data")}
sa("gmf.LayertreeController",V);V.$inject=["$http","$sce","ngeoCreatePopup","ngeoLayerHelper","gmfWmsUrl"];function ej(b){var c=b.mixed;return void 0!==b.children&&c?"MixedGroup":void 0===b.children||c?"WMTS"===b.type?"WMTS":null!=b.url?"externalWMS":"WMS":"NotMixedGroup"}
V.prototype.ma=function(b,c,d){var e=ej(b),f=null;if(1===c){switch(e){case "MixedGroup":d=new pb;var g,e=[],f=[];fj(this,b,e);for(b=0;b<e.length;b++)g=e[b],c=this.ma(g,1,!0),null!=c&&(d.push(c),f.push(g.name));b=this.Qa.vd(d);this.b[w(b)]=[];return b;case "NotMixedGroup":f=gj(this,b,!0),c=this.Qa.wd(b.url||this.a,""),hj(c,f),this.b[w(c)]=[],f=c}switch(e){case "WMTS":f=ij(this,b);break;case "WMS":case "externalWMS":e=b.url||this.a,f=d?this.Qa.wd(e,b.name):null}}null!=f&&(d=jj(this,b),f.set("querySourceIds",
d),f.set("layerName",b.name),rb(kf(this.c),0,f),d=b.metadata,void 0===b.children&&null!=d&&"true"!=d.isChecked&&f.Ta(!1));return f};V.prototype.getLayer=V.prototype.ma;function ij(b,c){var d=new qf;b.Qa.xd(c.url||"",c.name).then(function(b){of(d,b.S());d.set("capabilitiesStyles",b.get("capabilitiesStyles"))});return d}function fj(b,c,d){var e=c.children;if(void 0!==e)for(c=0;c<e.length;c++)fj(b,e[c],d);else d.push(c)}
function gj(b,c,d){var e=[],f=[];fj(b,c,f);var g;for(g=0;g<f.length;g++)c=f[g],b=c.metadata,(!d||null!=b&&"false"!=b.isChecked)&&e.push(c.name);return e}function kj(b){for(;1<b.depth;)b=b.parent;return b}V.prototype.listeners=function(b,c){var d=this.c;b.$on("$destroy",function(){kf(d).remove(c.layer)}.bind(c))};V.prototype.listeners=V.prototype.listeners;
V.prototype.Wg=function(b){var c,d=U(this.map).R(),e=b.maxResolutionHint;b=b.minResolutionHint;if(void 0!==b&&d<b||void 0!==e&&d>e)c="outOfResolution";return c||null};V.prototype.getResolutionStyle=V.prototype.Wg;
V.prototype.pj=function(b){var c=b.node,d=ej(c),e=b.layer,f;f=kj(b);var g=f.layer;b="on"===this.bf(b)?!0:!1;switch(d){case "WMS":case "WMTS":case "externalWMS":if(g instanceof jf)e.Ta(!b);else{d=g.S();f=f.node;var e=hf(g)?d.a.LAYERS.split(","):[],h,k=[],d=gj(this,f);for(f=0;f<d.length;f++)h=d[f],h===c.name?b||k.push(h):0<=e.indexOf(h)&&k.push(h);hj(g,k)}break;case "MixedGroup":e=[];d=gj(this,c);c=this.Qa.Dc(g);for(f=0;f<c.length;f++)g=c[f],k=c[f].S(),k instanceof Tg?0<=d.indexOf(k.ma())&&e.push(g):
k instanceof Xf&&0<=d.indexOf(k.a.LAYERS)&&e.push(g);for(f=0;f<e.length;f++)e[f].Ta(!b);break;case "NotMixedGroup":d=gj(this,c);k=g.S();c=hf(g)?k.a.LAYERS.split(","):[];if(b)for(f=0;f<d.length;f++)Oa(c,d[f]);else for(f=0;f<d.length;f++)b=c,e=d[f],Na(b,e)||b.push(e);hj(g,c)}};V.prototype.toggleActive=V.prototype.pj;
V.prototype.bf=function(b){var c,d=b.layer,e=b.node,f=ej(e),g=kj(b).layer,h=this.b[w(g)];switch(f){case "WMS":case "WMTS":case "externalWMS":if(g instanceof jf){if(null==d){c=this.Qa.Dc(kj(b).layer);var g=b.node,k;for(k=0;k<c.length;k++)if(f=c[k],d=f.S(),d instanceof Tg&&d.ma()===g.name){b.layer=f;break}else if(d instanceof Xf&&d.a.LAYERS===g.name){b.layer=f;break}d=b.layer}c=null!=d&&hf(d)?"on":"off"}else b=g.S(),c=0>b.a.LAYERS.split(",").indexOf(e.name)||!hf(g)?"off":"on";"on"===c?(e=e.name,Na(h,
e)||h.push(e)):Oa(h,e.name);break;case "MixedGroup":case "NotMixedGroup":e=gj(this,e);for(b=c=0;b<e.length;b++)0<=h.indexOf(e[b])&&c++;c=0===c?"off":c===e.length?"on":"indeterminate"}return c||"off"};V.prototype.getNodeState=V.prototype.bf;function hj(b,c){if(0>=c.length)b.Ta(!1);else{b.Ta(!0);c.reverse();var d=b.S();Ua(d.a,{LAYERS:c.join(",")});Yf(d);d.g=null;d.b()}}
V.prototype.Tg=function(b){b=b.node;var c=b.metadata.legendRule;return void 0!==b.children||void 0===c||"WMTS"===b.type||"external WMS"===b.type||void 0!==b.childLayers&&1<b.childLayers.length?null:lj(this,b,c)};V.prototype.getLegendIconURL=V.prototype.Tg;V.prototype.Ug=function(b){var c=b.node;if(void 0!==c.children)return null;b=b.layer;var d;"WMTS"===c.type&&null!=b?(c=b.get("capabilitiesStyles"),void 0!==c&&(c=c[0].legendURL,void 0!==c&&(d=c[0].href)),d=d||null):d=lj(this,c);return d};
V.prototype.getLegendURL=V.prototype.Ug;function lj(b,c,d){var e,f=U(b.map);e=f.R();f=Se(f.X());e=25.4/.28*f*39.37*e;b=c.url||b.a;void 0!==b&&(b=Bf(b,"FORMAT","image/png"),b=Bf(b,"TRANSPARENT",!0),b=Bf(b,"SERVICE","wms"),b=Bf(b,"VERSION","1.1.1"),b=Bf(b,"REQUEST","GetLegendGraphic"),b=Bf(b,"LAYER",c.name),b=Bf(b,"SCALE",e),void 0!==d&&(b=Bf(b,"RULE",d)));return b||null}
V.prototype.Kg=function(b){var c=b.uid.toString(),d=b.node;b=d.metadata.metadataUrl;if(void 0!==b){c in this.f||(this.f[c]=this.i.get(b).then(function(b){return this.g.trustAsHtml(b.data)}.bind(this)));var e=this.j;this.f[c].then(function(b){e.a.title=d.name;e.a.content=b;e.a.open=!0})}};V.prototype.displayMetadata=V.prototype.Kg;V.prototype.Vg=function(b){b=b.layer;var c;if(c=void 0!==b&&b instanceof qf&&void 0!==b.S)c=null==b.S();return c?"noSource":null};V.prototype.getNoSourceStyle=V.prototype.Vg;
V.prototype.Ij=function(b){var c=U(this.map);b=b.minResolutionHint||b.maxResolutionHint;void 0!==b&&mj(c,b)};V.prototype.zoomToResolution=V.prototype.Ij;function jj(b,c){var d=[],e=c.children||c;e&&e.length?e.forEach(function(b){d=d.concat(jj(this,b))},b):void 0!==c.id&&d.push(c.id);return d}B.controller("GmfLayertreeController",V);function nj(b,c){Sa.call(this,b);this.previous=c}y(nj,Sa);function oj(){kb.call(this);this.a={}}y(oj,kb);oj.prototype.get=function(b){return w(b).toString()in this.a?kf(Xg(b)).item(0):null};
oj.prototype.set=function(b,c){var d=w(b).toString(),e=this.get(b);if(null!==e)if(null!==c){var d=kf(Xg(b)),f=d.get("length");if(0<f)f=d.a[0],d.a[0]=c,d.B(new ob("remove",f,d)),d.B(new ob("add",c,d));else{for(;0>f;++f)rb(d,f,void 0);rb(d,0,c)}}else sb(kf(Xg(b)),0),delete this.a[d];else null!==c&&(rb(kf(Xg(b)),0,c),this.a[d]=!0);this.B(new nj("change",e));return e};A.service("ngeoBackgroundLayerMgr",oj);function pj(b){return function(c,d,e){var f=null;return function(){var g=this,h=arguments;null!==f&&b.cancel(f);f=b(function(){f=null;c.apply(g,h)},d,e)}}}pj.$inject=["$timeout"];A.factory("ngeoDebounce",pj);function qj(b){b=b?b:{};var c=Ua({},b);delete c.style;delete c.Lf;delete c.bd;delete c.cd;nf.call(this,c);this.l=void 0!==b.Lf?b.Lf:100;this.j=null;this.i=void 0;c=b.style;this.j=void 0!==c?c:Uh;this.i=null===c?void 0:Sh(this.j);this.b();this.s=void 0!==b.bd?b.bd:!1;this.v=void 0!==b.cd?b.cd:!1}y(qj,nf);function rj(b,c,d){return function(e,f,g){var h=new XMLHttpRequest;h.open("GET",ia(b)?b(e,f,g):b,!0);"arraybuffer"==c.aa()&&(h.responseType="arraybuffer");h.onload=function(){if(200<=h.status&&300>h.status){var b=c.aa(),e;"json"==b||"text"==b?e=h.responseText:"xml"==b?(e=h.responseXML)||(e=zd(h.responseText)):"arraybuffer"==b&&(e=h.response);e&&d.call(this,c.Sc(e,{Fb:g}),c.f(e))}}.bind(this);h.send()}}function sj(b,c){return rj(b,c,function(b){tj(this,b)})};function uj(){return[[-Infinity,-Infinity,Infinity,Infinity]]};var vj;
(function(){var b={P:{}};(function(){function c(b,d){if(!(this instanceof c))return new c(b,d);this.hd=Math.max(4,b||9);this.ze=Math.max(2,Math.ceil(.4*this.hd));d&&this.rg(d);this.clear()}function d(b,c){b.bbox=e(b,0,b.children.length,c)}function e(b,c,d,e){for(var g=[Infinity,Infinity,-Infinity,-Infinity],h;c<d;c++)h=b.children[c],f(g,b.ga?e(h):h.bbox);return g}function f(b,c){b[0]=Math.min(b[0],c[0]);b[1]=Math.min(b[1],c[1]);b[2]=Math.max(b[2],c[2]);b[3]=Math.max(b[3],c[3])}function g(b,c){return b.bbox[0]-
c.bbox[0]}function h(b,c){return b.bbox[1]-c.bbox[1]}function k(b){return(b[2]-b[0])*(b[3]-b[1])}function l(b){return b[2]-b[0]+(b[3]-b[1])}function n(b,c){return b[0]<=c[0]&&b[1]<=c[1]&&c[2]<=b[2]&&c[3]<=b[3]}function q(b,c){return c[0]<=b[2]&&c[1]<=b[3]&&c[2]>=b[0]&&c[3]>=b[1]}function p(b,c,d,e,f){for(var g=[c,d],h;g.length;)d=g.pop(),c=g.pop(),d-c<=e||(h=c+Math.ceil((d-c)/e/2)*e,r(b,c,d,h,f),g.push(c,h,h,d))}function r(b,c,d,e,f){for(var g,h,k,l,n;d>c;){600<d-c&&(g=d-c+1,h=e-c+1,k=Math.log(g),
l=.5*Math.exp(2*k/3),n=.5*Math.sqrt(k*l*(g-l)/g)*(0>h-g/2?-1:1),k=Math.max(c,Math.floor(e-h*l/g+n)),h=Math.min(d,Math.floor(e+(g-h)*l/g+n)),r(b,k,h,e,f));g=b[e];h=c;l=d;u(b,c,e);for(0<f(b[d],g)&&u(b,c,d);h<l;){u(b,h,l);h++;for(l--;0>f(b[h],g);)h++;for(;0<f(b[l],g);)l--}0===f(b[c],g)?u(b,c,l):(l++,u(b,l,d));l<=e&&(c=l+1);e<=l&&(d=l-1)}}function u(b,c,d){var e=b[c];b[c]=b[d];b[d]=e}c.prototype={all:function(){return this.ue(this.data,[])},search:function(b){var c=this.data,d=[],e=this.wa;if(!q(b,c.bbox))return d;
for(var f=[],g,h,k,l;c;){g=0;for(h=c.children.length;g<h;g++)k=c.children[g],l=c.ga?e(k):k.bbox,q(b,l)&&(c.ga?d.push(k):n(b,l)?this.ue(k,d):f.push(k));c=f.pop()}return d},load:function(b){if(!b||!b.length)return this;if(b.length<this.ze){for(var c=0,d=b.length;c<d;c++)this.insert(b[c]);return this}b=this.we(b.slice(),0,b.length-1,0);this.data.children.length?this.data.height===b.height?this.Ce(this.data,b):(this.data.height<b.height&&(c=this.data,this.data=b,b=c),this.ye(b,this.data.height-b.height-
1,!0)):this.data=b;return this},insert:function(b){b&&this.ye(b,this.data.height-1);return this},clear:function(){this.data={children:[],height:1,bbox:[Infinity,Infinity,-Infinity,-Infinity],ga:!0};return this},remove:function(b){if(!b)return this;for(var c=this.data,d=this.wa(b),e=[],f=[],g,h,k,l;c||e.length;){c||(c=e.pop(),h=e[e.length-1],g=f.pop(),l=!0);if(c.ga&&(k=c.children.indexOf(b),-1!==k)){c.children.splice(k,1);e.push(c);this.pg(e);break}l||c.ga||!n(c.bbox,d)?h?(g++,c=h.children[g],l=!1):
c=null:(e.push(c),f.push(g),g=0,h=c,c=c.children[0])}return this},wa:function(b){return b},sd:function(b,c){return b[0]-c[0]},td:function(b,c){return b[1]-c[1]},toJSON:function(){return this.data},ue:function(b,c){for(var d=[];b;)b.ga?c.push.apply(c,b.children):d.push.apply(d,b.children),b=d.pop();return c},we:function(b,c,e,f){var g=e-c+1,h=this.hd,k;if(g<=h)return k={children:b.slice(c,e+1),height:1,bbox:null,ga:!0},d(k,this.wa),k;f||(f=Math.ceil(Math.log(g)/Math.log(h)),h=Math.ceil(g/Math.pow(h,
f-1)));k={children:[],height:f,bbox:null,ga:!1};var g=Math.ceil(g/h),h=g*Math.ceil(Math.sqrt(h)),l,n,q;for(p(b,c,e,h,this.sd);c<=e;c+=h)for(n=Math.min(c+h-1,e),p(b,c,n,g,this.td),l=c;l<=n;l+=g)q=Math.min(l+g-1,n),k.children.push(this.we(b,l,q,f-1));d(k,this.wa);return k},og:function(b,c,d,e){for(var f,g,h,l,n,p,q,r;;){e.push(c);if(c.ga||e.length-1===d)break;q=r=Infinity;f=0;for(g=c.children.length;f<g;f++)h=c.children[f],n=k(h.bbox),p=h.bbox,p=(Math.max(p[2],b[2])-Math.min(p[0],b[0]))*(Math.max(p[3],
b[3])-Math.min(p[1],b[1]))-n,p<r?(r=p,q=n<q?n:q,l=h):p===r&&n<q&&(q=n,l=h);c=l}return c},ye:function(b,c,d){var e=this.wa;d=d?b.bbox:e(b);var e=[],g=this.og(d,this.data,c,e);g.children.push(b);for(f(g.bbox,d);0<=c;)if(e[c].children.length>this.hd)this.wg(e,c),c--;else break;this.lg(d,e,c)},wg:function(b,c){var e=b[c],f=e.children.length,g=this.ze;this.mg(e,g,f);f=this.ng(e,g,f);f={children:e.children.splice(f,e.children.length-f),height:e.height,bbox:null,ga:!1};e.ga&&(f.ga=!0);d(e,this.wa);d(f,this.wa);
c?b[c-1].children.push(f):this.Ce(e,f)},Ce:function(b,c){this.data={children:[b,c],height:b.height+1,bbox:null,ga:!1};d(this.data,this.wa)},ng:function(b,c,d){var f,g,h,l,n,p,q;n=p=Infinity;for(f=c;f<=d-c;f++)g=e(b,0,f,this.wa),h=e(b,f,d,this.wa),l=Math.max(0,Math.min(g[2],h[2])-Math.max(g[0],h[0]))*Math.max(0,Math.min(g[3],h[3])-Math.max(g[1],h[1])),g=k(g)+k(h),l<n?(n=l,q=f,p=g<p?g:p):l===n&&g<p&&(p=g,q=f);return q},mg:function(b,c,d){var e=b.ga?this.sd:g,f=b.ga?this.td:h,k=this.ve(b,c,d,e);c=this.ve(b,
c,d,f);k<c&&b.children.sort(e)},ve:function(b,c,d,g){b.children.sort(g);g=this.wa;var h=e(b,0,c,g),k=e(b,d-c,d,g),n=l(h)+l(k),p,q;for(p=c;p<d-c;p++)q=b.children[p],f(h,b.ga?g(q):q.bbox),n+=l(h);for(p=d-c-1;p>=c;p--)q=b.children[p],f(k,b.ga?g(q):q.bbox),n+=l(k);return n},lg:function(b,c,d){for(;0<=d;d--)f(c[d].bbox,b)},pg:function(b){for(var c=b.length-1,e;0<=c;c--)0===b[c].children.length?0<c?(e=b[c-1].children,e.splice(e.indexOf(b[c]),1)):this.clear():d(b[c],this.wa)},rg:function(b){var c=["return a",
" - b",";"];this.sd=new Function("a","b",c.join(b[0]));this.td=new Function("a","b",c.join(b[1]));this.wa=new Function("a","return [a"+b.join(", a")+"];")}};"undefined"!==typeof b?b.P=c:"undefined"!==typeof self?self.a=c:window.a=c})();vj=b.P})();function wj(b){this.b=vj(b);this.a={}}m=wj.prototype;m.insert=function(b,c){var d=[b[0],b[1],b[2],b[3],c];this.b.insert(d);this.a[w(c)]=d};m.load=function(b,c){for(var d=Array(c.length),e=0,f=c.length;e<f;e++){var g=b[e],h=c[e],g=[g[0],g[1],g[2],g[3],h];d[e]=g;this.a[w(h)]=g}this.b.load(d)};m.remove=function(b){b=w(b);var c=this.a[b];delete this.a[b];return null!==this.b.remove(c)};function xj(b){return b.b.all().map(function(b){return b[4]})}
function yj(b,c){return b.b.search(c).map(function(b){return b[4]})}m.forEach=function(b,c){return zj(xj(this),b,c)};function Aj(b,c,d,e){return zj(yj(b,c),d,e)}function zj(b,c,d){for(var e,f=0,g=b.length;f<g&&!(e=c.call(d,b[f]));f++);return e}m.Ia=function(){return Wa(this.a)};m.clear=function(){this.b.clear();this.a={}};m.G=function(){return this.b.data.bbox};function Bj(b){b=b||{};ef.call(this,{ca:b.ca,ea:b.ea,projection:void 0,state:"ready",wrapX:void 0!==b.wrapX?b.wrapX:!0});this.v=Ld;void 0!==b.Wh?this.v=b.Wh:void 0!==b.url&&(this.v=sj(b.url,b.format));this.D=void 0!==b.mj?b.mj:uj;var c=void 0!==b.mc?b.mc:!0;this.a=c?new wj:null;this.A=new wj;this.c={};this.g={};this.i={};this.j={};this.l=null;var d,e;b.features instanceof pb?(d=b.features,e=d.a):ea(b.features)&&(e=b.features);c||void 0!==d||(d=new pb(e));void 0!==e&&Cj(this,e);void 0!==d&&Dj(this,
d)}y(Bj,ef);m=Bj.prototype;m.ia=function(b){var c=w(b).toString();if(Ej(this,c,b)){Fj(this,c,b);var d=b.J();d?(c=d.G(),this.a&&this.a.insert(c,b)):this.c[c]=b;this.B(new Gj("addfeature",b))}this.b()};function Fj(b,c,d){b.j[c]=[I(d,"change",b.uf,b),I(d,"propertychange",b.uf,b)]}function Ej(b,c,d){var e=!0,f=d.Ya();void 0!==f?f.toString()in b.g?e=!1:b.g[f.toString()]=d:b.i[c]=d;return e}function tj(b,c){Cj(b,c);b.b()}
function Cj(b,c){var d,e,f,g,h=[],k=[],l=[];e=0;for(f=c.length;e<f;e++)g=c[e],d=w(g).toString(),Ej(b,d,g)&&k.push(g);e=0;for(f=k.length;e<f;e++){g=k[e];d=w(g).toString();Fj(b,d,g);var n=g.J();n?(d=n.G(),h.push(d),l.push(g)):b.c[d]=g}b.a&&b.a.load(h,l);e=0;for(f=k.length;e<f;e++)b.B(new Gj("addfeature",k[e]))}
function Dj(b,c){var d=!1;I(b,"addfeature",function(b){d||(d=!0,c.push(b.feature),d=!1)});I(b,"removefeature",function(b){d||(d=!0,c.remove(b.feature),d=!1)});I(c,"add",function(b){d||(b=b.element,d=!0,this.ia(b),d=!1)},b);I(c,"remove",function(b){d||(b=b.element,d=!0,this.pb(b),d=!1)},b);b.l=c}
m.clear=function(b){if(b){for(var c in this.j)this.j[c].forEach(G);this.l||(this.j={},this.g={},this.i={})}else if(this.a){this.a.forEach(this.fe,this);for(var d in this.c)this.fe(this.c[d])}this.l&&this.l.clear();this.a&&this.a.clear();this.A.clear();this.c={};this.B(new Gj("clear"));this.b()};function Hj(b,c,d,e){b.a?Aj(b.a,c,d,e):b.l&&b.l.forEach(d,e)}m.G=function(){return this.a.G()};
m.uf=function(b){b=b.target;var c=w(b).toString(),d=b.J();if(d)if(d=d.G(),c in this.c)delete this.c[c],this.a&&this.a.insert(d,b);else{if(this.a){var e=this.a,f=w(b);Kb(e.a[f].slice(0,4),d)||(e.remove(b),e.insert(d,b))}}else c in this.c||(this.a&&this.a.remove(b),this.c[c]=b);d=b.Ya();void 0!==d?(d=d.toString(),c in this.i?(delete this.i[c],this.g[d]=b):this.g[d]!==b&&(Ij(this,b),this.g[d]=b)):c in this.i||(Ij(this,b),this.i[c]=b);this.b();this.B(new Gj("changefeature",b))};
m.Ia=function(){return this.a.Ia()&&Wa(this.c)};function Jj(b,c,d,e){var f=b.A;c=b.D(c,d);var g,h;g=0;for(h=c.length;g<h;++g){var k=c[g];Aj(f,k,function(b){return Ib(b.extent,k)})||(b.v.call(b,k,d,e),f.insert(k,{extent:k.slice()}))}}m.pb=function(b){var c=w(b).toString();c in this.c?delete this.c[c]:this.a&&this.a.remove(b);this.fe(b);this.b()};
m.fe=function(b){var c=w(b).toString();this.j[c].forEach(G);delete this.j[c];var d=b.Ya();void 0!==d?delete this.g[d.toString()]:delete this.i[c];this.B(new Gj("removefeature",b))};function Ij(b,c){for(var d in b.g)if(b.g[d]===c){delete b.g[d];break}}function Gj(b,c){Sa.call(this,b);this.feature=c}y(Gj,Sa);function Kj(){this.b={};this.a=[];this.f=new Bj({mc:!1});this.Vd=new qj({source:this.f,style:this.ki.bind(this),bd:!0,cd:!0})}m=Kj.prototype;m.ia=function(b,c){var d=w(b).toString();this.b[d]=c;this.a[c].features[d]=b;this.f.ia(b)};m.pb=function(b,c){var d=w(b).toString();delete this.b[d];delete this.a[c].features[d];this.f.pb(b)};m.clear=function(b){var c=this.a[b],d;for(d in c.features)this.pb(c.features[d],b)};m.ma=function(){return this.Vd};
function Lj(b){var c=b.a.length;b.a.push({Sf:Uh,features:{}});return new Mj(b,c)}m.ki=function(b,c){var d=w(b).toString();return this.a[this.b[d]].Sf(b,c)};function Mj(b,c){this.b=b;this.a=null;this.f=c}m=Mj.prototype;m.ia=function(b){this.b.ia(b,this.f)};m.pb=function(b){this.b.pb(b,this.f)};m.clear=function(){this.b.clear(this.f)};
function Nj(b,c){null!==b.a&&(b.a.clear(),cb(b.a,"add",b.mf,b),cb(b.a,"remove",b.nf,b));null!==c&&(c.forEach(function(b){this.ia(b)},b),I(c,"add",b.mf,b),I(c,"remove",b.nf,b));b.a=c}function Oj(b,c){b.b.a[b.f].Sf=null===c?Uh:Sh(c)}m.mf=function(b){this.ia(b.element)};m.nf=function(b){this.pb(b.element)};A.service("ngeoFeatureOverlayMgr",Kj);function Pj(b,c,d,e){this.top=b;this.right=c;this.bottom=d;this.left=e}m=Pj.prototype;m.clone=function(){return new Pj(this.top,this.right,this.bottom,this.left)};m.contains=function(b){return this&&b?b instanceof Pj?b.left>=this.left&&b.right<=this.right&&b.top>=this.top&&b.bottom<=this.bottom:b.x>=this.left&&b.x<=this.right&&b.y>=this.top&&b.y<=this.bottom:!1};
m.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};m.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};m.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};
m.translate=function(b,c){b instanceof uc?(this.left+=b.x,this.right+=b.x,this.top+=b.y,this.bottom+=b.y):(this.left+=b,this.right+=b,ha(c)&&(this.top+=c,this.bottom+=c));return this};m.scale=function(b,c){var d=ha(c)?c:b;this.left*=b;this.right*=b;this.top*=d;this.bottom*=d;return this};function Qj(b,c,d,e){this.left=b;this.top=c;this.width=d;this.height=e}m=Qj.prototype;m.clone=function(){return new Qj(this.left,this.top,this.width,this.height)};m.contains=function(b){return b instanceof Qj?this.left<=b.left&&this.left+this.width>=b.left+b.width&&this.top<=b.top&&this.top+this.height>=b.top+b.height:b.x>=this.left&&b.x<=this.left+this.width&&b.y>=this.top&&b.y<=this.top+this.height};
m.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};m.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};m.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
m.translate=function(b,c){b instanceof uc?(this.left+=b.x,this.top+=b.y):(this.left+=b,ha(c)&&(this.top+=c));return this};m.scale=function(b,c){var d=ha(c)?c:b;this.left*=b;this.width*=b;this.top*=d;this.height*=d;return this};function Rj(b){Rj[" "](b);return b}Rj[" "]=ca;function Sj(b,c){var d=yc(b);return d.defaultView&&d.defaultView.getComputedStyle&&(d=d.defaultView.getComputedStyle(b,null))?d[c]||d.getPropertyValue(c)||"":""}function Tj(b){var c;try{c=b.getBoundingClientRect()}catch(d){return{left:0,top:0,right:0,bottom:0}}gc&&b.ownerDocument.body&&(b=b.ownerDocument,c.left-=b.documentElement.clientLeft+b.body.clientLeft,c.top-=b.documentElement.clientTop+b.body.clientTop);return c}
function Uj(b){var c=yc(b),d=new uc(0,0),e;e=c?yc(c):document;var f;(f=!gc||9<=Number(rc))||(wc(e),f=!0);if(b==(f?e.documentElement:e.body))return d;b=Tj(b);c=Mc(wc(c));d.x=b.left+c.x;d.y=b.top+c.y;return d}function Vj(b){"number"==typeof b&&(b=b+"px");return b}
function Wj(b){var c=Xj;if("none"!=(Sj(b,"display")||(b.currentStyle?b.currentStyle.display:null)||b.style&&b.style.display))return c(b);var d=b.style,e=d.display,f=d.visibility,g=d.position;d.visibility="hidden";d.position="absolute";d.display="inline";b=c(b);d.display=e;d.position=g;d.visibility=f;return b}function Xj(b){var c=b.offsetWidth,d=b.offsetHeight,e=jc&&!c&&!d;return ba(c)&&!e||!b.getBoundingClientRect?new vc(c,d):(b=Tj(b),new vc(b.right-b.left,b.bottom-b.top))}
function Yj(b){var c=Uj(b);b=Wj(b);return new Qj(c.x,c.y,b.width,b.height)}function Zj(b,c){b.style.display=c?"":"none"}function ak(b,c,d,e){if(/^\d+px?$/.test(c))return parseInt(c,10);var f=b.style[d],g=b.runtimeStyle[d];b.runtimeStyle[d]=b.currentStyle[d];b.style[d]=c;c=b.style[e];b.style[d]=f;b.runtimeStyle[d]=g;return c}function bk(b,c){var d=b.currentStyle?b.currentStyle[c]:null;return d?ak(b,d,"left","pixelLeft"):0}var ck={thin:2,medium:4,thick:6};
function dk(b,c){if("none"==(b.currentStyle?b.currentStyle[c+"Style"]:null))return 0;var d=b.currentStyle?b.currentStyle[c+"Width"]:null;return d in ck?ck[d]:ak(b,d,"left","pixelLeft")};var ek;
function fk(){var b=t.MessageChannel;"undefined"===typeof b&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!Zb("Presto")&&(b=function(){var b=document.createElement("IFRAME");b.style.display="none";b.src="";document.documentElement.appendChild(b);var c=b.contentWindow,b=c.document;b.open();b.write("");b.close();var d="callImmediate"+Math.random(),e="file:"==c.location.protocol?"*":c.location.protocol+"//"+c.location.host,b=pa(function(b){if(("*"==e||b.origin==e)&&b.data==
d)this.port1.onmessage()},this);c.addEventListener("message",b,!1);this.port1={};this.port2={postMessage:function(){c.postMessage(d,e)}}});if("undefined"!==typeof b&&!Zb("Trident")&&!Zb("MSIE")){var c=new b,d={},e=d;c.port1.onmessage=function(){if(ba(d.next)){d=d.next;var b=d.Le;d.Le=null;b()}};return function(b){e.next={Le:b};e=e.next;c.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(b){var c=document.createElement("SCRIPT");
c.onreadystatechange=function(){c.onreadystatechange=null;c.parentNode.removeChild(c);c=null;b();b=null};document.documentElement.appendChild(c)}:function(b){t.setTimeout(b,0)}};function gk(b){if(b.za&&"function"==typeof b.za)return b.za();if(ga(b))return b.split("");if(fa(b)){for(var c=[],d=b.length,e=0;e<d;e++)c.push(b[e]);return c}return ac(b)}
function hk(b,c,d){if(b.forEach&&"function"==typeof b.forEach)b.forEach(c,d);else if(fa(b)||ga(b))Ka(b,c,d);else{var e;if(b.ya&&"function"==typeof b.ya)e=b.ya();else if(b.za&&"function"==typeof b.za)e=void 0;else if(fa(b)||ga(b)){e=[];for(var f=b.length,g=0;g<f;g++)e.push(g)}else e=bc(b);for(var f=gk(b),g=f.length,h=0;h<g;h++)c.call(d,f[h],e&&e[h],b)}};var ik="StopIteration"in t?t.StopIteration:{message:"StopIteration",stack:""};function jk(){}jk.prototype.next=function(){throw ik;};jk.prototype.zb=function(){return this};function kk(b){if(b instanceof jk)return b;if("function"==typeof b.zb)return b.zb(!1);if(fa(b)){var c=0,d=new jk;d.next=function(){for(;;){if(c>=b.length)throw ik;if(c in b)return b[c++];c++}};return d}throw Error("Not implemented");}
function lk(b,c){if(fa(b))try{Ka(b,c,void 0)}catch(d){if(d!==ik)throw d;}else{b=kk(b);try{for(;;)c.call(void 0,b.next(),void 0,b)}catch(d){if(d!==ik)throw d;}}}function mk(b){if(fa(b))return Qa(b);b=kk(b);var c=[];lk(b,function(b){c.push(b)});return c};function nk(b,c){this.b={};this.a=[];this.c=this.f=0;var d=arguments.length;if(1<d){if(d%2)throw Error("Uneven number of arguments");for(var e=0;e<d;e+=2)this.set(arguments[e],arguments[e+1])}else if(b){b instanceof nk?(d=b.ya(),e=b.za()):(d=bc(b),e=ac(b));for(var f=0;f<d.length;f++)this.set(d[f],e[f])}}m=nk.prototype;m.Oa=function(){return this.f};m.za=function(){ok(this);for(var b=[],c=0;c<this.a.length;c++)b.push(this.b[this.a[c]]);return b};m.ya=function(){ok(this);return this.a.concat()};
m.equals=function(b,c){if(this===b)return!0;if(this.f!=b.Oa())return!1;var d=c||pk;ok(this);for(var e,f=0;e=this.a[f];f++)if(!d(this.get(e),b.get(e)))return!1;return!0};function pk(b,c){return b===c}m.Ia=function(){return 0==this.f};m.clear=function(){this.b={};this.c=this.f=this.a.length=0};m.remove=function(b){return qk(this.b,b)?(delete this.b[b],this.f--,this.c++,this.a.length>2*this.f&&ok(this),!0):!1};
function ok(b){if(b.f!=b.a.length){for(var c=0,d=0;c<b.a.length;){var e=b.a[c];qk(b.b,e)&&(b.a[d++]=e);c++}b.a.length=d}if(b.f!=b.a.length){for(var f={},d=c=0;c<b.a.length;)e=b.a[c],qk(f,e)||(b.a[d++]=e,f[e]=1),c++;b.a.length=d}}m.get=function(b,c){return qk(this.b,b)?this.b[b]:c};m.set=function(b,c){qk(this.b,b)||(this.f++,this.a.push(b),this.c++);this.b[b]=c};m.forEach=function(b,c){for(var d=this.ya(),e=0;e<d.length;e++){var f=d[e],g=this.get(f);b.call(c,g,f,this)}};m.clone=function(){return new nk(this)};
m.transpose=function(){for(var b=new nk,c=0;c<this.a.length;c++){var d=this.a[c];b.set(this.b[d],d)}return b};m.zb=function(b){ok(this);var c=0,d=this.c,e=this,f=new jk;f.next=function(){if(d!=e.c)throw Error("The map has changed since the iterator was created");if(c>=e.a.length)throw ik;var f=e.a[c++];return b?f:e.b[f]};return f};function qk(b,c){return Object.prototype.hasOwnProperty.call(b,c)};function rk(){this.a=ra()}new rk;rk.prototype.set=function(b){this.a=b};rk.prototype.get=function(){return this.a};function sk(b){if(b.classList)return b.classList;b=b.className;return ga(b)&&b.match(/\S+/g)||[]}function tk(b,c){return b.classList?b.classList.contains(c):Na(sk(b),c)}function uk(b,c){b.classList?b.classList.add(c):tk(b,c)||(b.className+=0<b.className.length?" "+c:c)}function vk(b,c){if(b.classList)Ka(c,function(c){uk(b,c)});else{var d={};Ka(sk(b),function(b){d[b]=!0});Ka(c,function(b){d[b]=!0});b.className="";for(var e in d)b.className+=0<b.className.length?" "+e:e}}
function wk(b,c){b.classList?b.classList.remove(c):tk(b,c)&&(b.className=La(sk(b),function(b){return b!=c}).join(" "))}function xk(b,c){b.classList?Ka(c,function(c){wk(b,c)}):b.className=La(sk(b),function(b){return!Na(c,b)}).join(" ")};function yk(b,c,d){Sa.call(this,b);this.map=c;this.frameState=void 0!==d?d:null}y(yk,Sa);function zk(b,c,d){Sa.call(this,b);this.a=c;b=d?d:{};this.buttons=Ak(b);this.pressure=Bk(b,this.buttons);this.bubbles="bubbles"in b?b.bubbles:!1;this.cancelable="cancelable"in b?b.cancelable:!1;this.view="view"in b?b.view:null;this.detail="detail"in b?b.detail:null;this.screenX="screenX"in b?b.screenX:0;this.screenY="screenY"in b?b.screenY:0;this.clientX="clientX"in b?b.clientX:0;this.clientY="clientY"in b?b.clientY:0;this.button="button"in b?b.button:0;this.relatedTarget="relatedTarget"in b?b.relatedTarget:
null;this.pointerId="pointerId"in b?b.pointerId:0;this.width="width"in b?b.width:0;this.height="height"in b?b.height:0;this.pointerType="pointerType"in b?b.pointerType:"";this.isPrimary="isPrimary"in b?b.isPrimary:!1;c.preventDefault&&(this.preventDefault=function(){c.preventDefault()})}y(zk,Sa);function Ak(b){if(b.buttons||Ck)b=b.buttons;else switch(b.which){case 1:b=1;break;case 2:b=4;break;case 3:b=2;break;default:b=0}return b}
function Bk(b,c){var d=0;b.pressure?d=b.pressure:d=c?.5:0;return d}var Ck=!1;try{Ck=1===(new MouseEvent("click",{buttons:1})).buttons}catch(b){};function Dk(b,c){this.a=b;this.g=c};function Ek(b){Dk.call(this,b,{mousedown:this.ui,mousemove:this.vi,mouseup:this.yi,mouseover:this.xi,mouseout:this.wi});this.b=b.b;this.f=[]}y(Ek,Dk);function Fk(b,c){for(var d=b.f,e=c.clientX,f=c.clientY,g=0,h=d.length,k;g<h&&(k=d[g]);g++){var l=Math.abs(f-k[1]);if(25>=Math.abs(e-k[0])&&25>=l)return!0}return!1}function Gk(b){var c=Hk(b,b),d=c.preventDefault;c.preventDefault=function(){b.preventDefault();d()};c.pointerId=1;c.isPrimary=!0;c.pointerType="mouse";return c}m=Ek.prototype;
m.ui=function(b){if(!Fk(this,b)){(1).toString()in this.b&&this.cancel(b);var c=Gk(b);this.b[(1).toString()]=b;Ik(this.a,Jk,c,b)}};m.vi=function(b){if(!Fk(this,b)){var c=Gk(b);this.a.move(c,b)}};m.yi=function(b){if(!Fk(this,b)){var c=this.b[(1).toString()];c&&c.button===b.button&&(c=Gk(b),Ik(this.a,Kk,c,b),delete this.b[(1).toString()])}};m.xi=function(b){if(!Fk(this,b)){var c=Gk(b);Lk(this.a,c,b)}};m.wi=function(b){if(!Fk(this,b)){var c=Gk(b);Mk(this.a,c,b)}};
m.cancel=function(b){var c=Gk(b);this.a.cancel(c,b);delete this.b[(1).toString()]};function Nk(b){Dk.call(this,b,{MSPointerDown:this.di,MSPointerMove:this.ei,MSPointerUp:this.hi,MSPointerOut:this.fi,MSPointerOver:this.gi,MSPointerCancel:this.ci,MSGotPointerCapture:this.ai,MSLostPointerCapture:this.bi});this.b=b.b;this.f=["","unavailable","touch","pen","mouse"]}y(Nk,Dk);function Ok(b,c){var d=c;ha(c.pointerType)&&(d=Hk(c,c),d.pointerType=b.f[c.pointerType]);return d}m=Nk.prototype;m.di=function(b){this.b[b.pointerId.toString()]=b;var c=Ok(this,b);Ik(this.a,Jk,c,b)};
m.ei=function(b){var c=Ok(this,b);this.a.move(c,b)};m.hi=function(b){var c=Ok(this,b);Ik(this.a,Kk,c,b);delete this.b[b.pointerId.toString()]};m.fi=function(b){var c=Ok(this,b);Mk(this.a,c,b)};m.gi=function(b){var c=Ok(this,b);Lk(this.a,c,b)};m.ci=function(b){var c=Ok(this,b);this.a.cancel(c,b);delete this.b[b.pointerId.toString()]};m.bi=function(b){this.a.B(new zk("lostpointercapture",b,b))};m.ai=function(b){this.a.B(new zk("gotpointercapture",b,b))};function Pk(b){Dk.call(this,b,{pointerdown:this.Ji,pointermove:this.Ki,pointerup:this.Ni,pointerout:this.Li,pointerover:this.Mi,pointercancel:this.Ii,gotpointercapture:this.ah,lostpointercapture:this.Xh})}y(Pk,Dk);m=Pk.prototype;m.Ji=function(b){Qk(this.a,b)};m.Ki=function(b){Qk(this.a,b)};m.Ni=function(b){Qk(this.a,b)};m.Li=function(b){Qk(this.a,b)};m.Mi=function(b){Qk(this.a,b)};m.Ii=function(b){Qk(this.a,b)};m.Xh=function(b){Qk(this.a,b)};m.ah=function(b){Qk(this.a,b)};function Rk(b,c){Dk.call(this,b,{touchstart:this.vj,touchmove:this.uj,touchend:this.tj,touchcancel:this.sj});this.b=b.b;this.j=c;this.f=void 0;this.i=0;this.c=void 0}y(Rk,Dk);m=Rk.prototype;m.Nf=function(){this.i=0;this.c=void 0};
function Sk(b,c,d){c=Hk(c,d);c.pointerId=d.identifier+2;c.bubbles=!0;c.cancelable=!0;c.detail=b.i;c.button=0;c.buttons=1;c.width=d.webkitRadiusX||d.radiusX||0;c.height=d.webkitRadiusY||d.radiusY||0;c.pressure=d.webkitForce||d.force||.5;c.isPrimary=b.f===d.identifier;c.pointerType="touch";c.clientX=d.clientX;c.clientY=d.clientY;c.screenX=d.screenX;c.screenY=d.screenY;return c}
function Tk(b,c,d){function e(){c.preventDefault()}var f=Array.prototype.slice.call(c.changedTouches),g=f.length,h,k;for(h=0;h<g;++h)k=Sk(b,c,f[h]),k.preventDefault=e,d.call(b,c,k)}
m.vj=function(b){var c=b.touches,d=Object.keys(this.b),e=d.length;if(e>=c.length){var f=[],g,h,k;for(g=0;g<e;++g){h=d[g];k=this.b[h];var l;if(!(l=1==h))a:{l=c.length;for(var n=void 0,q=0;q<l;q++)if(n=c[q],n.identifier===h-2){l=!0;break a}l=!1}l||f.push(k.out)}for(g=0;g<f.length;++g)this.qd(b,f[g])}c=b.changedTouches[0];d=Object.keys(this.b).length;if(0===d||1===d&&(1).toString()in this.b)this.f=c.identifier,void 0!==this.c&&t.clearTimeout(this.c);Uk(this,b);this.i++;Tk(this,b,this.Fi)};
m.Fi=function(b,c){this.b[c.pointerId]={target:c.target,out:c,zf:c.target};var d=this.a;c.bubbles=!0;Ik(d,Vk,c,b);this.a.enter(c,b);Ik(this.a,Jk,c,b)};m.uj=function(b){b.preventDefault();Tk(this,b,this.$h)};m.$h=function(b,c){var d=this.b[c.pointerId];if(d){var e=d.out,f=d.zf;this.a.move(c,b);e&&f!==c.target&&(e.relatedTarget=c.target,c.relatedTarget=f,e.target=f,c.target?(Mk(this.a,e,b),Lk(this.a,c,b)):(c.target=f,c.relatedTarget=null,this.qd(b,c)));d.out=c;d.zf=c.target}};
m.tj=function(b){Uk(this,b);Tk(this,b,this.Aj)};m.Aj=function(b,c){Ik(this.a,Kk,c,b);this.a.out(c,b);this.a.leave(c,b);delete this.b[c.pointerId];c.isPrimary&&(this.f=void 0,this.c=t.setTimeout(this.Nf.bind(this),200))};m.sj=function(b){Tk(this,b,this.qd)};m.qd=function(b,c){this.a.cancel(c,b);this.a.out(c,b);this.a.leave(c,b);delete this.b[c.pointerId];c.isPrimary&&(this.f=void 0,this.c=t.setTimeout(this.Nf.bind(this),200))};
function Uk(b,c){var d=b.j.f,e=c.changedTouches[0];if(b.f===e.identifier){var f=[e.clientX,e.clientY];d.push(f);t.setTimeout(function(){Tc(d,f)},2500)}};function Wk(b){ib.call(this);this.c=b;this.b={};this.f={};this.a=[];zh?Xk(this,new Pk(this)):Ah?Xk(this,new Nk(this)):(b=new Ek(this),Xk(this,b),yh&&Xk(this,new Rk(this,b)));b=this.a.length;for(var c,d=0;d<b;d++)c=this.a[d],Yk(this,Object.keys(c.g))}y(Wk,ib);function Xk(b,c){var d=Object.keys(c.g);d&&(d.forEach(function(b){var d=c.g[b];d&&(this.f[b]=d.bind(c))},b),b.a.push(c))}m=Wk.prototype;m.rf=function(b){var c=this.f[b.type];c&&c(b)};
function Yk(b,c){c.forEach(function(b){I(this.c,b,this.rf,this)},b)}function Zk(b,c){c.forEach(function(b){cb(this.c,b,this.rf,this)},b)}function Hk(b,c){for(var d={},e,f=0,g=$k.length;f<g;f++)e=$k[f][0],d[e]=b[e]||c[e]||$k[f][1];return d}m.move=function(b,c){Ik(this,al,b,c)};m.enter=function(b,c){b.bubbles=!1;Ik(this,bl,b,c)};m.leave=function(b,c){b.bubbles=!1;Ik(this,cl,b,c)};m.out=function(b,c){b.bubbles=!0;Ik(this,dl,b,c)};m.cancel=function(b,c){Ik(this,el,b,c)};
function Mk(b,c,d){b.out(c,d);var e=c.relatedTarget;e&&Lc(c.target,e)||b.leave(c,d)}function Lk(b,c,d){c.bubbles=!0;Ik(b,Vk,c,d);var e=c.relatedTarget;e&&Lc(c.target,e)||b.enter(c,d)}function Ik(b,c,d,e){b.B(new zk(c,e,d))}function Qk(b,c){b.B(new zk(c.type,c,c))}m.L=function(){for(var b=this.a.length,c,d=0;d<b;d++)c=this.a[d],Zk(this,Object.keys(c.g));Wk.U.L.call(this)};
var al="pointermove",Jk="pointerdown",Kk="pointerup",Vk="pointerover",dl="pointerout",bl="pointerenter",cl="pointerleave",el="pointercancel",$k=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",
!1],["type",""],["target",null],["currentTarget",null],["which",0]];function fl(b,c,d,e,f){yk.call(this,b,c,f);this.originalEvent=d;b=c.a.getBoundingClientRect();d=d.changedTouches?d.changedTouches[0]:d;this.pixel=[d.clientX-b.left,d.clientY-b.top];this.coordinate=c.Gb(this.pixel);this.dragging=void 0!==e?e:!1}y(fl,yk);fl.prototype.preventDefault=function(){fl.U.preventDefault.call(this);this.originalEvent.preventDefault()};fl.prototype.stopPropagation=function(){fl.U.stopPropagation.call(this);this.originalEvent.stopPropagation()};
function gl(b,c,d,e,f){fl.call(this,b,c,d.a,e,f);this.a=d}y(gl,fl);function hl(b){ib.call(this);this.f=b;this.i=0;this.j=!1;this.c=[];this.b=null;b=this.f.a;this.v=0;this.s={};this.g=new Wk(b);this.a=null;this.u=I(this.g,Jk,this.vh,this);this.l=I(this.g,al,this.bj,this)}y(hl,ib);function il(b,c){var d;d=new gl(jl,b.f,c);b.B(d);0!==b.i?(t.clearTimeout(b.i),b.i=0,d=new gl(kl,b.f,c),b.B(d)):b.i=t.setTimeout(function(){this.i=0;var b=new gl(ll,this.f,c);this.B(b)}.bind(b),250)}
function ml(b,c){c.type==nl||c.type==ol?delete b.s[c.pointerId]:c.type==pl&&(b.s[c.pointerId]=!0);b.v=Object.keys(b.s).length}m=hl.prototype;m.ef=function(b){ml(this,b);var c=new gl(nl,this.f,b);this.B(c);!this.j&&0===b.button&&il(this,this.b);0===this.v&&(this.c.forEach(G),this.c.length=0,this.j=!1,this.b=null,hb(this.a),this.a=null)};
m.vh=function(b){ml(this,b);var c=new gl(pl,this.f,b);this.B(c);this.b=b;0===this.c.length&&(this.a=new Wk(document),this.c.push(I(this.a,ql,this.si,this),I(this.a,nl,this.ef,this),I(this.g,ol,this.ef,this)))};m.si=function(b){if(b.clientX!=this.b.clientX||b.clientY!=this.b.clientY){this.j=!0;var c=new gl(rl,this.f,b,this.j);this.B(c)}b.preventDefault()};m.bj=function(b){this.B(new gl(b.type,this.f,b,!(!this.b||b.clientX==this.b.clientX&&b.clientY==this.b.clientY)))};
m.L=function(){this.l&&(G(this.l),this.l=null);this.u&&(G(this.u),this.u=null);this.c.forEach(G);this.c.length=0;this.a&&(hb(this.a),this.a=null);this.g&&(hb(this.g),this.g=null);hl.U.L.call(this)};var ll="singleclick",jl="click",kl="dblclick",rl="pointerdrag",ql="pointermove",pl="pointerdown",nl="pointerup",ol="pointercancel",sl={Wj:ll,Kj:jl,Lj:kl,Oj:rl,Rj:ql,Nj:pl,Uj:nl,Tj:"pointerover",Sj:"pointerout",Pj:"pointerenter",Qj:"pointerleave",Mj:ol};function tl(b,c,d,e,f,g,h,k){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;0===c&&0===d||xb(b,c,d);if(1!=e||1!=f){c=b[1]*e;d=b[2]*e;var l=b[3]*e,n=b[4]*f,q=b[5]*f,p=b[6]*f;f=b[7]*f;var r=1*b[8],u=1*b[9],v=1*b[10],z=1*b[11],x=b[12],C=b[13],H=b[14],E=b[15];b[0]*=e;b[1]=c;b[2]=d;b[3]=l;b[4]=n;b[5]=q;b[6]=p;b[7]=f;b[8]=r;b[9]=u;b[10]=v;b[11]=z;b[12]=x;b[13]=C;b[14]=H;b[15]=E}0!==g&&(e=b[0],c=b[1],d=b[2],l=b[3],n=b[4],q=b[5],p=b[6],
f=b[7],r=Math.cos(g),g=Math.sin(g),b[0]=e*r+n*g,b[1]=c*r+q*g,b[2]=d*r+p*g,b[3]=l*r+f*g,b[4]=e*-g+n*r,b[5]=c*-g+q*r,b[6]=d*-g+p*r,b[7]=l*-g+f*r);0===h&&0===k||xb(b,h,k);return b}function ul(b,c,d){var e=b[1],f=b[5],g=b[13],h=c[0];c=c[1];d[0]=b[0]*h+b[4]*c+b[12];d[1]=e*h+f*c+g;return d};function vl(b){kb.call(this);this.I=b}y(vl,kb);function wl(b,c,d){return function(e,f){return Fg(b,c,e,f,function(b){d[e]||(d[e]={});d[e][b.oa.toString()]=b})}}vl.prototype.ma=function(){return this.I};vl.prototype.O=function(b){2===b.target.T()&&xl(this)};function xl(b){var c=b.ma();hf(c)&&"ready"==c.Md()&&b.b()}function yl(b,c){c.sf()&&b.Rc.push(qa(function(b,c,f){c=w(b).toString();b.tf(f.M.projection,f.oe[c])},c))}
function zl(b,c){if(c){var d,e,f;e=0;for(f=c.length;e<f;++e)d=c[e],b[w(d).toString()]=d}}function Al(b,c){var d=c.qa;void 0!==d&&("string"===typeof d?b.Mb[d]="":ka(d)&&(b.Mb[d.src]=d.href))}function Bl(b,c,d,e){c=w(c).toString();d=d.toString();c in b?d in b[c]?b[c][d].extend(e):b[c][d]=e:(b[c]={},b[c][d]=e)}function Cl(b,c,d){return[c*(Math.round(b[0]/c)+d[0]%2/2),c*(Math.round(b[1]/c)+d[1]%2/2)]}
function Dl(b,c,d,e,f,g,h,k){var l=w(c).toString();l in b.nc||(b.nc[l]={});var n=b.nc[l];b=b.oj;var q=d.Fa,p,r,u,v,z,x;for(x=h;x>=q;--x)for(r=rg(d,g,x,r),u=d.R(x),v=r.b;v<=r.a;++v)for(z=r.c;z<=r.f;++z)h-x<=k?(p=Pg(c,x,v,z,e,f),0==p.T()&&(n[p.oa.toString()]=!0,p.bc()in b.f||b.i([p,l,Ag(d,p.oa),u]))):c.Wf(x,v,z,f)};function El(b){b=b||{};this.g=void 0!==b.anchor?b.anchor:[.5,.5];this.c=null;this.b=void 0!==b.jd?b.jd:"top-left";this.j=void 0!==b.kd?b.kd:"fraction";this.u=void 0!==b.ld?b.ld:"fraction";var c=void 0!==b.crossOrigin?b.crossOrigin:null,d=void 0!==b.Mh?b.Mh:null,e=void 0!==b.Nh?b.Nh:null,f=b.src;void 0!==f&&0!==f.length||!d||(f=d.src||w(d).toString());var g=void 0!==b.src?0:2,h=void 0!==b.color?lh(b.color):null,k=Fl.We(),l=k.get(f,c,h);l||(l=new Gl(d,f,e,c,g,h),k.set(f,c,h,l));this.a=l;this.v=void 0!==
b.offset?b.offset:[0,0];this.f=void 0!==b.pf?b.pf:"top-left";this.i=null;this.l=void 0!==b.size?b.size:null;Hh.call(this,{opacity:void 0!==b.opacity?b.opacity:1,rotation:void 0!==b.rotation?b.rotation:0,scale:void 0!==b.scale?b.scale:1,Ua:void 0!==b.Ua?b.Ua:!0,qb:void 0!==b.qb?b.qb:!1})}y(El,Hh);m=El.prototype;
m.Yb=function(){if(this.c)return this.c;var b=this.g,c=this.ob();if("fraction"==this.j||"fraction"==this.u){if(!c)return null;b=this.g.slice();"fraction"==this.j&&(b[0]*=c[0]);"fraction"==this.u&&(b[1]*=c[1])}if("top-left"!=this.b){if(!c)return null;b===this.g&&(b=this.g.slice());if("top-right"==this.b||"bottom-right"==this.b)b[0]=-b[0]+c[0];if("bottom-left"==this.b||"bottom-right"==this.b)b[1]=-b[1]+c[1]}return this.c=b};m.Pc=function(){var b=this.a;return b.c?b.c:b.a};m.Jd=function(){return this.a.f};
m.cc=function(){return this.a.b};m.Wd=function(){var b=this.a;if(!b.j)if(b.u){var c=b.f[0],d=b.f[1],e=Gf(c,d);e.fillRect(0,0,c,d);b.j=e.canvas}else b.j=b.a;return b.j};m.Pa=function(){if(this.i)return this.i;var b=this.v;if("top-left"!=this.f){var c=this.ob(),d=this.a.f;if(!c||!d)return null;b=b.slice();if("top-right"==this.f||"bottom-right"==this.f)b[0]=d[0]-c[0]-b[0];if("bottom-left"==this.f||"bottom-right"==this.f)b[1]=d[1]-c[1]-b[1]}return this.i=b};m.ob=function(){return this.l?this.l:this.a.f};
m.Sd=function(b,c){return I(this.a,"change",b,c)};m.load=function(){this.a.load()};m.me=function(b,c){cb(this.a,"change",b,c)};function Gl(b,c,d,e,f,g){ib.call(this);this.j=null;this.a=b?b:new Image;null!==e&&(this.a.crossOrigin=e);this.c=g?document.createElement("CANVAS"):null;this.i=g;this.g=null;this.b=f;this.f=d;this.l=c;this.u=!1;2==this.b&&Hl(this)}y(Gl,ib);function Hl(b){var c=Gf(1,1);try{c.drawImage(b.a,0,0),c.getImageData(0,0,1,1)}catch(d){b.u=!0}}
Gl.prototype.s=function(){this.b=3;this.g.forEach(G);this.g=null;this.B("change")};
Gl.prototype.v=function(){this.b=2;this.f=[this.a.width,this.a.height];this.g.forEach(G);this.g=null;Hl(this);if(!this.u&&null!==this.i){this.c.width=this.a.width;this.c.height=this.a.height;var b=this.c.getContext("2d");b.drawImage(this.a,0,0);for(var c=b.getImageData(0,0,this.a.width,this.a.height),d=c.data,e=this.i[0]/255,f=this.i[1]/255,g=this.i[2]/255,h=0,k=d.length;h<k;h+=4)d[h]*=e,d[h+1]*=f,d[h+2]*=g;b.putImageData(c,0,0)}this.B("change")};
Gl.prototype.load=function(){if(0==this.b){this.b=1;this.g=[I(this.a,"error",this.s,this,!0),I(this.a,"load",this.v,this,!0)];try{this.a.src=this.l}catch(b){this.s()}}};function Fl(){this.a={};this.b=0}(function(){var b=Fl;b.We=function(){return b.ff?b.ff:b.ff=new b}})();Fl.prototype.clear=function(){this.a={};this.b=0};Fl.prototype.get=function(b,c,d){b=c+":"+b+":"+(d?nh(d):"null");return b in this.a?this.a[b]:null};Fl.prototype.set=function(b,c,d,e){this.a[c+":"+b+":"+(d?nh(d):"null")]=e;++this.b};function Il(b,c){db.call(this);this.u=c;this.b={};this.g={}}y(Il,db);Il.prototype.L=function(){for(var b in this.b)hb(this.b[b]);Il.U.L.call(this)};function Jl(){var b=Fl.We();if(32<b.b){var c=0,d,e;for(d in b.a)e=b.a[d],0!==(c++&3)||jb(e)||(delete b.a[d],--b.b)}}Il.prototype.s=function(){this.u.render()};Il.prototype.l=Ld;Il.prototype.C=function(b,c){for(var d in this.b)if(!(c&&d in c.Qd)){var e=d,f=this.b[e];delete this.b[e];G(this.g[e]);delete this.g[e];hb(f)}};
function Xc(b,c){return b.zIndex-c.zIndex};function Kl(b,c){this.l=b;this.g=c;this.a=[];this.b=[];this.f={}}Kl.prototype.clear=function(){this.a.length=0;this.b.length=0;Va(this.f)};Kl.prototype.i=function(b){var c=this.l(b);return Infinity!=c?(this.a.push(b),this.b.push(c),this.f[this.g(b)]=!0,Ll(this,0,this.a.length-1),!0):!1};Kl.prototype.Oa=function(){return this.a.length};Kl.prototype.Ia=function(){return 0===this.a.length};
function Ml(b,c){for(var d=b.a,e=b.b,f=d.length,g=d[c],h=e[c],k=c;c<f>>1;){var l=2*c+1,n=2*c+2,l=n<f&&e[n]<e[l]?n:l;d[c]=d[l];e[c]=e[l];c=l}d[c]=g;e[c]=h;Ll(b,k,c)}function Ll(b,c,d){var e=b.a;b=b.b;for(var f=e[d],g=b[d];d>c;){var h=d-1>>1;if(b[h]>g)e[d]=e[h],b[d]=b[h],d=h;else break}e[d]=f;b[d]=g};function Nl(b,c){Kl.call(this,function(c){return b.apply(null,c)},function(b){return b[0].bc()});this.s=c;this.c=0;this.j={}}y(Nl,Kl);Nl.prototype.i=function(b){var c=Nl.U.i.call(this,b);c&&I(b[0],"change",this.u,this);return c};Nl.prototype.u=function(b){b=b.target;var c=b.T();if(2===c||3===c||4===c)cb(b,"change",this.u,this),b=b.bc(),b in this.j&&(delete this.j[b],--this.c),this.s()};function Ol(b){return function(c){if(c)return[Be(c[0],b[0],b[2]),Be(c[1],b[1],b[3])]}}function Pl(b){return b};function Ql(b){return function(c,d,e){if(void 0!==c)return c=Rc(b,c,e),c=Be(c+d,0,b.length-1),b[c]}}function Rl(b,c,d){return function(e,f,g){if(void 0!==e)return e=Math.max(Math.floor(Math.log(c/e)/Math.log(b)+(0<g?0:0>g?1:.5))+f,0),void 0!==d&&(e=Math.min(e,d)),c/Math.pow(b,e)}};function Sl(b){if(void 0!==b)return 0}function Tl(b,c){if(void 0!==b)return b+c}function Ul(b){var c=2*Math.PI/b;return function(b,e){if(void 0!==b)return b=Math.floor((b+e)/c+.5)*c}}function Vl(){var b=5*Math.PI/180;return function(c,d){if(void 0!==c)return Math.abs(c+d)<=b?0:c+d}};function Wl(b,c,d){this.center=b;this.resolution=c;this.rotation=d};function Xl(b){mb.call(this);b=b||{};this.i=[0,0];var c={};c.center=void 0!==b.center?b.center:null;this.l=Ze(b.projection);var d,e,f,g=void 0!==b.Fa?b.Fa:0;d=void 0!==b.Ra?b.Ra:28;var h=void 0!==b.b?b.b:2;if(void 0!==b.Ba)d=b.Ba,e=d[0],f=d[d.length-1],d=Ql(d);else{e=Ze(b.projection);f=e.G();var k=(f?Math.max(Pb(f),Qb(f)):360*Je.degrees/Se(e))/256/Math.pow(2,0),l=k/Math.pow(2,28);e=b.bb;void 0!==e?g=0:e=k/Math.pow(h,g);f=b.Sa;void 0===f&&(f=void 0!==b.Ra?void 0!==b.bb?e/Math.pow(h,d):k/Math.pow(h,
d):l);d=g+Math.floor(Math.log(e/f)/Math.log(h));f=e/Math.pow(h,d-g);d=Rl(h,e,d-g)}this.c=e;this.j=f;this.g=g;g=void 0!==b.extent?Ol(b.extent):Pl;(void 0!==b.a?b.a:1)?(e=b.ud,e=void 0===e||!0===e?Vl():!1===e?Tl:ha(e)?Ul(e):Tl):e=Sl;this.a=new Wl(g,d,e);void 0!==b.resolution?c.resolution=b.resolution:void 0!==b.zoom&&(c.resolution=this.xa(this.c,b.zoom-this.g));c.rotation=void 0!==b.rotation?b.rotation:0;this.ka(c)}y(Xl,mb);m=Xl.prototype;m.xa=function(b,c,d){return this.a.resolution(b,c||0,d||0)};
m.ud=function(b,c){return this.a.rotation(b,c||0)};function Yl(b){return b.get("center")}m.X=function(){return this.l};m.R=function(){return this.get("resolution")};function Zl(b){return b.get("rotation")}m.T=function(){var b=Yl(this),c=this.X(),d=this.R(),e=Zl(this);return{center:[Math.round(b[0]/d)*d,Math.round(b[1]/d)*d],projection:void 0!==c?c:null,resolution:d,rotation:e}};
function $l(b){var c,d=b.R();if(void 0!==d){var e,f=0;do{e=b.xa(b.c,f);if(e==d){c=f;break}++f}while(e>b.j)}return void 0!==c?b.g+c:c}
function am(b,c,d,e){if(!(c instanceof gi)){var f=c[0],g=c[1],h=c[2],k=c[3],f=[f,g,f,k,h,k,h,g,f,g],g=new Ii(null);g.K("XY",f,[f.length]);c=g}f=e||{};e=void 0!==f.padding?f.padding:[0,0,0,0];var k=void 0!==f.xa?f.xa:!0,g=void 0!==f.ji?f.ji:!1,l;void 0!==f.Sa?l=f.Sa:void 0!==f.Ra?l=b.xa(b.c,f.Ra-b.g,0):l=0;var n=c.o,h=Zl(b),f=Math.cos(-h),h=Math.sin(-h),q=Infinity,p=Infinity,r=-Infinity,u=-Infinity;c=c.a;for(var v=0,z=n.length;v<z;v+=c)var x=n[v]*f-n[v+1]*h,C=n[v]*h+n[v+1]*f,q=Math.min(q,x),p=Math.min(p,
C),r=Math.max(r,x),u=Math.max(u,C);c=[q,p,r,u];d=[d[0]-e[1]-e[3],d[1]-e[0]-e[2]];d=Math.max(Pb(c)/d[0],Qb(c)/d[1]);d=isNaN(d)?l:Math.max(d,l);k&&(l=b.xa(d,0,0),!g&&l<d&&(l=b.xa(l,-1,0)),d=l);mj(b,d);h=-h;l=(q+r)/2+(e[1]-e[3])/2*d;d=(p+u)/2+(e[0]-e[2])/2*d;bm(b,[l*f-d*h,d*f+l*h])}function cm(b){return!!Yl(b)&&void 0!==b.R()}m.rotate=function(b,c){if(void 0!==c){var d,e=Yl(this);void 0!==e&&(d=[e[0]-c[0],e[1]-c[1]],Ab(d,b-Zl(this)),zb(d,c));bm(this,d)}this.set("rotation",b)};
function bm(b,c){b.set("center",c)}function dm(b,c){b.i[1]+=c}function mj(b,c){b.set("resolution",c)}function em(b,c){var d=b.xa(b.c,c-b.g,0);mj(b,d)};function fm(b){mb.call(this);this.element=b.element?b.element:null;this.i=this.A=null;this.j=[];this.render=b.render?b.render:Ld;b.target&&(this.A=zc(b.target))}y(fm,mb);fm.prototype.L=function(){Ic(this.element);fm.U.L.call(this)};fm.prototype.setMap=function(b){this.i&&Ic(this.element);for(var c=0,d=this.j.length;c<d;++c)G(this.j[c]);this.j.length=0;if(this.i=b)(this.A?this.A:b.s).appendChild(this.element),this.render!==Ld&&this.j.push(I(b,"postrender",this.render,this)),b.render()};function gm(b){b=b?b:{};this.C=document.createElement("UL");this.l=document.createElement("LI");this.C.appendChild(this.l);Zj(this.l,!1);this.g=void 0!==b.collapsed?b.collapsed:!0;this.s=void 0!==b.Gg?b.Gg:!0;this.s||(this.g=!1);var c=void 0!==b.className?b.className:"ol-attribution",d=void 0!==b.le?b.le:"Attributions",e=void 0!==b.Fg?b.Fg:"\u00bb";this.D="string"===typeof e?Ec("SPAN",{},e):e;e=void 0!==b.label?b.label:"i";this.I="string"===typeof e?Ec("SPAN",{},e):e;d=Ec("BUTTON",{type:"button",
title:d},this.s&&!this.g?this.D:this.I);I(d,"click",this.V,this);c=Ec("DIV",c+" ol-unselectable ol-control"+(this.g&&this.s?" ol-collapsed":"")+(this.s?"":" ol-uncollapsible"),this.C,d);fm.call(this,{element:c,render:b.render?b.render:hm,target:b.target});this.v=!0;this.c={};this.a={};this.O={}}y(gm,fm);
function hm(b){if(b=b.frameState){var c,d,e,f,g,h,k,l,n,q,p,r=b.Rd,u=Ua({},b.ca),v={},z=b.M.projection;d=0;for(c=r.length;d<c;d++)if(h=r[d].layer.S())if(q=w(h).toString(),n=h.s())for(e=0,f=n.length;e<f;e++)if(k=n[e],l=w(k).toString(),!(l in u)){if(g=b.oe[q]){var x=h.Za(z);a:{p=k;var C=z;if(p.a){var H=void 0,E=void 0,D=void 0,R=void 0;for(R in g)if(R in p.a)for(var D=g[R],F,H=0,E=p.a[R].length;H<E;++H){F=p.a[R][H];if(Fe(F,D)){p=!0;break a}var M=rg(x,Dg(C),parseInt(R,10)),T=M.a-M.b+1;if(D.b<M.b||D.a>
M.a)if(Fe(F,new De(yb(D.b,T),yb(D.a,T),D.c,D.f))||D.a-D.b+1>T&&Fe(F,M)){p=!0;break a}}p=!1}else p=!0}}else p=!1;p?(l in v&&delete v[l],u[l]=k):v[l]=k}c=[u,v];d=c[0];c=c[1];for(var K in this.c)K in d?(this.a[K]||(Zj(this.c[K],!0),this.a[K]=!0),delete d[K]):K in c?(this.a[K]&&(Zj(this.c[K],!1),delete this.a[K]),delete c[K]):(Ic(this.c[K]),delete this.c[K],delete this.a[K]);for(K in d)e=document.createElement("LI"),e.innerHTML=d[K].b,this.C.appendChild(e),this.c[K]=e,this.a[K]=!0;for(K in c)e=document.createElement("LI"),
e.innerHTML=c[K].b,Zj(e,!1),this.C.appendChild(e),this.c[K]=e;K=!Wa(this.a)||!Wa(b.Mb);this.v!=K&&(Zj(this.element,K),this.v=K);K&&Wa(this.a)?uk(this.element,"ol-logo-only"):wk(this.element,"ol-logo-only");var Z;b=b.Mb;K=this.O;for(Z in K)Z in b||(Ic(K[Z]),delete K[Z]);for(var X in b)X in K||(Z=new Image,Z.src=X,d=b[X],""===d?d=Z:(d=Ec("A",{href:d}),d.appendChild(Z)),this.l.appendChild(d),K[X]=d);Zj(this.l,!Wa(b))}else this.v&&(Zj(this.element,!1),this.v=!1)}
gm.prototype.V=function(b){b.preventDefault();b=this.element;tk(b,"ol-collapsed")?wk(b,"ol-collapsed"):uk(b,"ol-collapsed");if(this.g){b=this.I;var c=b.parentNode;c&&c.replaceChild(this.D,b)}else b=this.D,(c=b.parentNode)&&c.replaceChild(this.I,b);this.g=!this.g};function im(b){return 1-Math.pow(1-b,3)}function jm(b){return 3*b*b-2*b*b*b}function km(b){return b};function lm(b){var c=b.source,d=b.start?b.start:Date.now(),e=c[0],f=c[1],g=void 0!==b.duration?b.duration:1E3,h=b.la?b.la:jm;return function(b,c){if(c.time<d)return c.animate=!0,c.fa[0]+=1,!0;if(c.time<d+g){var n=1-h((c.time-d)/g),q=e-c.M.center[0],p=f-c.M.center[1];c.animate=!0;c.M.center[0]+=n*q;c.M.center[1]+=n*p;c.fa[0]+=1;return!0}return!1}}
function mm(b){var c=b.rotation?b.rotation:0,d=b.start?b.start:Date.now(),e=void 0!==b.duration?b.duration:1E3,f=b.la?b.la:jm,g=b.anchor?b.anchor:null;return function(b,k){if(k.time<d)return k.animate=!0,k.fa[0]+=1,!0;if(k.time<d+e){var l=1-f((k.time-d)/e),l=(c-k.M.rotation)*l;k.animate=!0;k.M.rotation+=l;if(g){var n=k.M.center;n[0]-=g[0];n[1]-=g[1];Ab(n,l);zb(n,g)}k.fa[0]+=1;return!0}return!1}}
function nm(b){var c=b.resolution,d=b.start?b.start:Date.now(),e=void 0!==b.duration?b.duration:1E3,f=b.la?b.la:jm;return function(b,h){if(h.time<d)return h.animate=!0,h.fa[0]+=1,!0;if(h.time<d+e){var k=1-f((h.time-d)/e),l=c-h.M.resolution;h.animate=!0;h.M.resolution+=k*l;h.fa[0]+=1;return!0}return!1}};function om(b){b=b?b:{};var c=void 0!==b.className?b.className:"ol-rotate",d=void 0!==b.label?b.label:"\u21e7";this.a=null;"string"===typeof d?this.a=Ec("SPAN","ol-compass",d):(this.a=d,uk(this.a,"ol-compass"));d=Ec("BUTTON",{"class":c+"-reset",type:"button",title:b.le?b.le:"Reset rotation"},this.a);I(d,"click",om.prototype.v,this);c=Ec("DIV",c+" ol-unselectable ol-control",d);d=b.render?b.render:pm;this.g=b.ej?b.ej:void 0;fm.call(this,{element:c,render:d,target:b.target});this.l=void 0!==b.duration?
b.duration:250;this.c=void 0!==b.Ag?b.Ag:!0;this.s=void 0;this.c&&uk(this.element,"ol-hidden")}y(om,fm);om.prototype.v=function(b){b.preventDefault();if(void 0!==this.g)this.g();else{b=this.i;var c=U(b);if(c){var d=Zl(c);void 0!==d&&(0<this.l&&(d%=2*Math.PI,d<-Math.PI&&(d+=2*Math.PI),d>Math.PI&&(d-=2*Math.PI),b.Ea(mm({rotation:d,duration:this.l,la:im}))),c.set("rotation",0))}}};
function pm(b){if(b=b.frameState){b=b.M.rotation;if(b!=this.s){var c="rotate("+b+"rad)";if(this.c){var d=this.element;0===b?uk(d,"ol-hidden"):wk(d,"ol-hidden")}this.a.style.msTransform=c;this.a.style.webkitTransform=c;this.a.style.transform=c}this.s=b}};function qm(b){b=b?b:{};var c=void 0!==b.className?b.className:"ol-zoom",d=void 0!==b.jb?b.jb:1,e=void 0!==b.Gj?b.Gj:"\u2212",f=void 0!==b.Hj?b.Hj:"Zoom out",g=Ec("BUTTON",{"class":c+"-in",type:"button",title:void 0!==b.Fj?b.Fj:"Zoom in"},void 0!==b.Ej?b.Ej:"+");I(g,"click",qa(qm.prototype.c,d),this);e=Ec("BUTTON",{"class":c+"-out",type:"button",title:f},e);I(e,"click",qa(qm.prototype.c,-d),this);c=Ec("DIV",c+" ol-unselectable ol-control",g,e);fm.call(this,{element:c,target:b.target});this.a=void 0!==
b.duration?b.duration:250}y(qm,fm);qm.prototype.c=function(b,c){c.preventDefault();var d=this.i,e=U(d);if(e){var f=e.R();f&&(0<this.a&&d.Ea(nm({resolution:f,duration:this.a,la:im})),d=e.xa(f,b),mj(e,d))}};function rm(){this.a=[];this.b=this.f=0}function sm(b,c){var d=b.b,e=.05-d,f=Math.log(.05/b.b)/-.005;return lm({source:c,duration:f,la:function(b){return d*(Math.exp(-.005*b*f)-1)/e}})};function tm(b){mb.call(this);this.g=null;this.setActive(!0);this.handleEvent=b.handleEvent}y(tm,mb);tm.prototype.getActive=function(){return this.get("active")};tm.prototype.setActive=function(b){this.set("active",b)};tm.prototype.setMap=function(b){this.g=b};function um(b,c,d,e,f){if(void 0!==d){var g=Zl(c),h=Yl(c);void 0!==g&&h&&f&&0<f&&(b.Ea(mm({rotation:g,duration:f,la:im})),e&&b.Ea(lm({source:h,duration:f,la:im})));c.rotate(d,e)}}
function vm(b,c,d,e,f){var g=c.R();d=c.xa(g,d,0);wm(b,c,d,e,f)}function wm(b,c,d,e,f){if(d){var g=c.R(),h=Yl(c);void 0!==g&&h&&d!==g&&f&&0<f&&(b.Ea(nm({resolution:g,duration:f,la:im})),e&&b.Ea(lm({source:h,duration:f,la:im})));if(e){var k;b=Yl(c);f=c.R();void 0!==b&&void 0!==f&&(k=[e[0]-d*(e[0]-b[0])/f,e[1]-d*(e[1]-b[1])/f]);bm(c,k)}mj(c,d)}};function xm(b){b=b?b:{};this.a=b.jb?b.jb:1;tm.call(this,{handleEvent:ym});this.c=void 0!==b.duration?b.duration:250}y(xm,tm);function ym(b){var c=!1,d=b.originalEvent;if(b.type==kl){var c=b.map,e=b.coordinate,d=d.shiftKey?-this.a:this.a,f=U(c);vm(c,f,d,e,this.c);b.preventDefault();c=!0}return!c};function zm(b){b=b.originalEvent;return b.altKey&&!(b.metaKey||b.ctrlKey)&&b.shiftKey}function Am(b){b=b.originalEvent;return 0==b.button&&!(jc&&th&&b.ctrlKey)}function Bm(b){b=b.originalEvent;return!b.altKey&&!(b.metaKey||b.ctrlKey)&&!b.shiftKey}function Cm(b){b=b.originalEvent;return!b.altKey&&!(b.metaKey||b.ctrlKey)&&b.shiftKey}function Dm(b){b=b.originalEvent.target.tagName;return"INPUT"!==b&&"SELECT"!==b&&"TEXTAREA"!==b}function Em(b){return"mouse"==b.a.pointerType};function Fm(b){b=b?b:{};tm.call(this,{handleEvent:b.handleEvent?b.handleEvent:Gm});this.Wa=b.$a?b.$a:dh;this.Xa=b.Kb?b.Kb:Ld;this.xb=b.sh?b.sh:Ld;this.yb=b.ab?b.ab:dh;this.A=!1;this.V={};this.i=[]}y(Fm,tm);function Hm(b){for(var c=b.length,d=0,e=0,f=0;f<c;f++)d+=b[f].clientX,e+=b[f].clientY;return[d/c,e/c]}
function Gm(b){if(!(b instanceof gl))return!0;var c=!1,d=b.type;if(d===pl||d===rl||d===nl){d=b.a;b.type==nl?delete this.V[d.pointerId]:b.type==pl?this.V[d.pointerId]=d:d.pointerId in this.V&&(this.V[d.pointerId]=d);var d=this.V,e=[],f;for(f in d)e.push(d[f]);this.i=e}this.A&&(b.type==rl?this.Xa(b):b.type==nl&&(this.A=this.yb(b)));b.type==pl?(this.A=b=this.Wa(b),c=this.sb(b)):b.type==ql&&this.xb(b);return!c}Fm.prototype.sb=function(b){return b};function Im(b){Fm.call(this,{$a:Jm,Kb:Km,ab:Lm});b=b?b:{};this.a=b.Rh;this.c=this.j=null;this.s=b.ta?b.ta:Bm;this.l=!1}y(Im,Fm);function Km(b){var c=Hm(this.i);this.a&&this.a.a.push(c[0],c[1],Date.now());if(this.c){var d=this.c[0]-c[0],e=c[1]-this.c[1];b=b.map;var f=U(b),g=f.T(),e=d=[d,e],h=g.resolution;e[0]*=h;e[1]*=h;Ab(d,g.rotation);zb(d,g.center);d=f.a.center(d);b.render();bm(f,d)}this.c=c}
function Lm(b){b=b.map;var c=U(b);if(0===this.i.length){var d;if(d=!this.l&&this.a)if(d=this.a,6>d.a.length)d=!1;else{var e=Date.now()-100,f=d.a.length-3;if(d.a[f+2]<e)d=!1;else{for(var g=f-3;0<g&&d.a[g+2]>e;)g-=3;var e=d.a[f+2]-d.a[g+2],h=d.a[f]-d.a[g],f=d.a[f+1]-d.a[g+1];d.f=Math.atan2(f,h);d.b=Math.sqrt(h*h+f*f)/e;d=.05<d.b}}d&&(d=(.05-this.a.b)/-.005,f=this.a.f,g=Yl(c),this.j=sm(this.a,g),b.Ea(this.j),g=Mm(b,g),d=b.Gb([g[0]-d*Math.cos(f),g[1]-d*Math.sin(f)]),d=c.a.center(d),bm(c,d));dm(c,-1);
b.render();return!1}this.c=null;return!0}function Jm(b){if(0<this.i.length&&this.s(b)){var c=b.map,d=U(c);this.c=null;this.A||dm(d,1);c.render();this.j&&Tc(c.D,this.j)&&(bm(d,b.frameState.M.center),this.j=null);this.a&&(b=this.a,b.a.length=0,b.f=0,b.b=0);this.l=1<this.i.length;return!0}return!1}Im.prototype.sb=dh;function Nm(b){b=b?b:{};Fm.call(this,{$a:Om,Kb:Pm,ab:Qm});this.c=b.ta?b.ta:zm;this.a=void 0;this.j=void 0!==b.duration?b.duration:250}y(Nm,Fm);function Pm(b){if(Em(b)){var c=b.map,d=Rm(c);b=b.pixel;d=Math.atan2(d[1]/2-b[1],b[0]-d[0]/2);if(void 0!==this.a){b=d-this.a;var e=U(c),f=Zl(e);c.render();um(c,e,f-b)}this.a=d}}function Qm(b){if(!Em(b))return!0;b=b.map;var c=U(b);dm(c,-1);var d=Zl(c),e=this.j,d=c.ud(d,0);um(b,c,d,void 0,e);return!1}
function Om(b){return Em(b)&&Am(b)&&this.c(b)?(b=b.map,dm(U(b),1),b.render(),this.a=void 0,!0):!1}Nm.prototype.sb=dh;function Sm(b){this.c=null;this.b=document.createElement("div");this.b.style.position="absolute";this.b.className="ol-box "+b;this.f=this.g=this.a=null}y(Sm,db);Sm.prototype.L=function(){this.setMap(null);Sm.U.L.call(this)};function Tm(b){var c=b.g,d=b.f;b=b.b.style;b.left=Math.min(c[0],d[0])+"px";b.top=Math.min(c[1],d[1])+"px";b.width=Math.abs(d[0]-c[0])+"px";b.height=Math.abs(d[1]-c[1])+"px"}
Sm.prototype.setMap=function(b){if(this.a){this.a.v.removeChild(this.b);var c=this.b.style;c.left=c.top=c.width=c.height="inherit"}(this.a=b)&&this.a.v.appendChild(this.b)};function Um(b){var c=b.g,d=b.f,c=[c,[c[0],d[1]],d,[d[0],c[1]]].map(b.a.Gb,b.a);c[4]=c[0].slice();b.c?b.c.Y([c]):b.c=new Ii([c])}Sm.prototype.J=function(){return this.c};function Vm(b,c,d){Sa.call(this,b);this.coordinate=c;this.mapBrowserEvent=d}y(Vm,Sa);function Wm(b){Fm.call(this,{$a:Xm,Kb:Ym,ab:Zm});b=b?b:{};this.a=new Sm(b.className||"ol-dragbox");this.c=null;this.v=b.ta?b.ta:eh;this.s=b.Dg?b.Dg:$m}y(Wm,Fm);function $m(b,c,d){b=d[0]-c[0];c=d[1]-c[1];return 64<=b*b+c*c}function Ym(b){if(Em(b)){var c=this.a,d=b.pixel;c.g=this.c;c.f=d;Um(c);Tm(c);this.B(new Vm("boxdrag",b.coordinate,b))}}Wm.prototype.J=function(){return this.a.J()};Wm.prototype.l=Ld;
function Zm(b){if(!Em(b))return!0;this.a.setMap(null);this.s(b,this.c,b.pixel)&&(this.l(b),this.B(new Vm("boxend",b.coordinate,b)));return!1}function Xm(b){if(Em(b)&&Am(b)&&this.v(b)){this.c=b.pixel;this.a.setMap(b.map);var c=this.a,d=this.c;c.g=this.c;c.f=d;Um(c);Tm(c);this.B(new Vm("boxstart",b.coordinate,b));return!0}return!1};function bn(b){b=b?b:{};var c=b.ta?b.ta:Cm;this.j=void 0!==b.duration?b.duration:200;Wm.call(this,{ta:c,className:b.className||"ol-dragzoom"})}y(bn,Wm);bn.prototype.l=function(){var b=this.g,c=U(b),d=Rm(b),e=this.J().G(),d=c.xa(Math.max(Pb(e)/d[0],Qb(e)/d[1])),f=c.R(),g=Yl(c);b.Ea(nm({resolution:f,duration:this.j,la:im}));b.Ea(lm({source:g,duration:this.j,la:im}));bm(c,Rb(e));mj(c,d)};function cn(b){tm.call(this,{handleEvent:dn});b=b||{};this.a=void 0!==b.ta?b.ta:gh(Bm,Dm);this.c=void 0!==b.duration?b.duration:100;this.i=void 0!==b.Hi?b.Hi:128}y(cn,tm);
function dn(b){var c=!1;if("keydown"==b.type){var d=b.originalEvent.keyCode;if(this.a(b)&&(40==d||37==d||39==d||38==d)){var e=b.map,c=U(e),f=c.R()*this.i,g=0,h=0;40==d?h=-f:37==d?g=-f:39==d?g=f:h=f;d=[g,h];Ab(d,Zl(c));f=this.c;if(g=Yl(c))f&&0<f&&e.Ea(lm({source:g,duration:f,la:km})),e=c.a.center([g[0]+d[0],g[1]+d[1]]),bm(c,e);b.preventDefault();c=!0}}return!c};function en(b){tm.call(this,{handleEvent:fn});b=b?b:{};this.c=b.ta?b.ta:Dm;this.a=b.jb?b.jb:1;this.i=void 0!==b.duration?b.duration:100}y(en,tm);function fn(b){var c=!1;if("keydown"==b.type||"keypress"==b.type){var d=b.originalEvent.charCode;if(this.c(b)&&(43==d||45==d)){c=b.map;d=43==d?this.a:-this.a;c.render();var e=U(c);vm(c,e,d,void 0,this.i);b.preventDefault();c=!0}}return!c};function gn(b){tm.call(this,{handleEvent:hn});b=b||{};this.a=0;this.s=void 0!==b.duration?b.duration:250;this.v=void 0!==b.Bj?b.Bj:!0;this.i=null;this.j=this.c=void 0}y(gn,tm);
function hn(b){var c=!1;if("wheel"==b.type||"mousewheel"==b.type){var c=b.map,d=b.originalEvent;this.v&&(this.i=b.coordinate);var e;"wheel"==b.type?(e=d.deltaY,rh&&d.deltaMode===t.WheelEvent.DOM_DELTA_PIXEL&&(e/=uh),d.deltaMode===t.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"==b.type&&(e=-d.wheelDeltaY,sh&&(e/=3));this.a+=e;void 0===this.c&&(this.c=Date.now());e=Math.max(80-(Date.now()-this.c),0);t.clearTimeout(this.j);this.j=t.setTimeout(this.l.bind(this,c),e);b.preventDefault();c=!0}return!c}
gn.prototype.l=function(b){var c=Be(this.a,-1,1),d=U(b);b.render();vm(b,d,-c,this.i,this.s);this.a=0;this.i=null;this.j=this.c=void 0};function jn(b){Fm.call(this,{$a:kn,Kb:ln,ab:mn});b=b||{};this.c=null;this.j=void 0;this.a=!1;this.l=0;this.v=void 0!==b.threshold?b.threshold:.3;this.s=void 0!==b.duration?b.duration:250}y(jn,Fm);
function ln(b){var c=0,d=this.i[0],e=this.i[1],d=Math.atan2(e.clientY-d.clientY,e.clientX-d.clientX);void 0!==this.j&&(c=d-this.j,this.l+=c,!this.a&&Math.abs(this.l)>this.v&&(this.a=!0));this.j=d;b=b.map;d=b.a.getBoundingClientRect();e=Hm(this.i);e[0]-=d.left;e[1]-=d.top;this.c=b.Gb(e);this.a&&(d=U(b),e=Zl(d),b.render(),um(b,d,e+c,this.c))}function mn(b){if(2>this.i.length){b=b.map;var c=U(b);dm(c,-1);if(this.a){var d=Zl(c),e=this.c,f=this.s,d=c.ud(d,0);um(b,c,d,e,f)}return!1}return!0}
function kn(b){return 2<=this.i.length?(b=b.map,this.c=null,this.j=void 0,this.a=!1,this.l=0,this.A||dm(U(b),1),b.render(),!0):!1}jn.prototype.sb=dh;function nn(b){Fm.call(this,{$a:on,Kb:pn,ab:qn});b=b?b:{};this.c=null;this.l=void 0!==b.duration?b.duration:400;this.a=void 0;this.j=1}y(nn,Fm);function pn(b){var c=1,d=this.i[0],e=this.i[1],f=d.clientX-e.clientX,d=d.clientY-e.clientY,f=Math.sqrt(f*f+d*d);void 0!==this.a&&(c=this.a/f);this.a=f;1!=c&&(this.j=c);b=b.map;var f=U(b),d=f.R(),e=b.a.getBoundingClientRect(),g=Hm(this.i);g[0]-=e.left;g[1]-=e.top;this.c=b.Gb(g);b.render();wm(b,f,d*c,this.c)}
function qn(b){if(2>this.i.length){b=b.map;var c=U(b);dm(c,-1);var d=c.R(),e=this.c,f=this.l,d=c.xa(d,0,this.j-1);wm(b,c,d,e,f);return!1}return!0}function on(b){return 2<=this.i.length?(b=b.map,this.c=null,this.a=void 0,this.j=1,this.A||dm(U(b),1),b.render(),!0):!1}nn.prototype.sb=dh;function rn(b){b=b?b:{};var c=new pb,d=new rm;(void 0!==b.Ge?b.Ge:1)&&c.push(new Nm);(void 0!==b.Mg?b.Mg:1)&&c.push(new xm({jb:b.Dj,duration:b.dd}));(void 0!==b.Ng?b.Ng:1)&&c.push(new Im({Rh:d}));(void 0!==b.Xd?b.Xd:1)&&c.push(new jn);(void 0!==b.Gi?b.Gi:1)&&c.push(new nn({duration:b.dd}));if(void 0!==b.Qh?b.Qh:1)c.push(new cn),c.push(new en({jb:b.Dj,duration:b.dd}));(void 0!==b.Zh?b.Zh:1)&&c.push(new gn({duration:b.dd}));(void 0!==b.hj?b.hj:1)&&c.push(new bn({duration:b.dd}));return c};function sn(b){Ke.call(this,{code:b,units:"m",extent:tn,global:!0,Cj:un})}y(sn,Ke);sn.prototype.lb=function(b,c){return b/Ce(c[1]/6378137)};var vn=6378137*Math.PI,tn=[-vn,-vn,vn,vn],un=[-180,-85,180,85],wn="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(b){return new sn(b)});
function xn(b,c,d){var e=b.length;d=1<d?d:2;void 0===c&&(2<d?c=b.slice():c=Array(e));for(var f=0;f<e;f+=d)c[f]=6378137*Math.PI*b[f]/180,c[f+1]=6378137*Math.log(Math.tan(Math.PI*(b[f+1]+90)/360));return c}function yn(b,c,d){var e=b.length;d=1<d?d:2;void 0===c&&(2<d?c=b.slice():c=Array(e));for(var f=0;f<e;f+=d)c[f]=180*b[f]/(6378137*Math.PI),c[f+1]=360*Math.atan(Math.exp(b[f+1]/6378137))/Math.PI-90;return c};var zn=new Ge(6378137);function An(b,c){Ke.call(this,{code:b,units:"degrees",extent:Bn,od:c,global:!0,lf:Cn,Cj:Bn})}y(An,Ke);An.prototype.lb=function(b){return b};var Bn=[-180,-90,180,90],Cn=Math.PI*zn.radius/180,Dn=[new An("CRS:84"),new An("EPSG:4326","neu"),new An("urn:ogc:def:crs:EPSG::4326","neu"),new An("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new An("urn:ogc:def:crs:OGC:1.3:CRS84"),new An("urn:ogc:def:crs:OGC:2:84"),new An("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new An("urn:x-ogc:def:crs:EPSG:4326","neu")];function En(b,c,d,e,f){this.Wa={};this.f=b;this.W=c;this.j=d;this.A=e;this.ed=f;this.g=this.a=this.b=this.ra=this.ha=this.qa=null;this.Da=this.sa=this.v=this.I=this.D=this.C=0;this.Ka=!1;this.i=this.La=0;this.Ma=!1;this.O=0;this.c="";this.l=this.Z=this.xb=this.Xa=0;this.V=this.s=this.u=null;this.N=[];this.yb=vb()}
function Fn(b,c,d){if(b.g){c=fi(c,0,d,2,b.A,b.N);d=b.f;var e=b.yb,f=d.globalAlpha;1!=b.v&&(d.globalAlpha=f*b.v);var g=b.La;b.Ka&&(g+=b.ed);var h,k;h=0;for(k=c.length;h<k;h+=2){var l=c[h]-b.C,n=c[h+1]-b.D;b.Ma&&(l=Math.round(l),n=Math.round(n));if(0!==g||1!=b.i){var q=l+b.C,p=n+b.D;tl(e,q,p,b.i,b.i,g,-q,-p);d.setTransform(e[0],e[1],e[4],e[5],e[12],e[13])}d.drawImage(b.g,b.sa,b.Da,b.O,b.I,l,n,b.O,b.I)}0===g&&1==b.i||d.setTransform(1,0,0,1,0,0);1!=b.v&&(d.globalAlpha=f)}}
function Gn(b,c,d,e){var f=0;if(b.V&&""!==b.c){b.u&&Hn(b,b.u);b.s&&In(b,b.s);var g=b.V,h=b.f,k=b.ra;k?(k.font!=g.font&&(k.font=h.font=g.font),k.textAlign!=g.textAlign&&(k.textAlign=h.textAlign=g.textAlign),k.textBaseline!=g.textBaseline&&(k.textBaseline=h.textBaseline=g.textBaseline)):(h.font=g.font,h.textAlign=g.textAlign,h.textBaseline=g.textBaseline,b.ra={font:g.font,textAlign:g.textAlign,textBaseline:g.textBaseline});c=fi(c,f,d,e,b.A,b.N);for(g=b.f;f<d;f+=e){h=c[f]+b.Xa;k=c[f+1]+b.xb;if(0!==b.Z||
1!=b.l){var l=tl(b.yb,h,k,b.l,b.l,b.Z,-h,-k);g.setTransform(l[0],l[1],l[4],l[5],l[12],l[13])}b.s&&g.strokeText(b.c,h,k);b.u&&g.fillText(b.c,h,k)}0===b.Z&&1==b.l||g.setTransform(1,0,0,1,0,0)}}function Jn(b,c,d,e,f,g){var h=b.f;b=fi(c,d,e,f,b.A,b.N);h.moveTo(b[0],b[1]);for(c=2;c<b.length;c+=2)h.lineTo(b[c],b[c+1]);g&&h.lineTo(b[0],b[1]);return e}function Kn(b,c,d,e,f){var g=b.f,h,k;h=0;for(k=e.length;h<k;++h)d=Jn(b,c,d,e[h],f,!0),g.closePath();return d}m=En.prototype;
m.Ad=function(b){if(Ub(this.j,b.G())){if(this.b||this.a){this.b&&Hn(this,this.b);this.a&&In(this,this.a);var c;c=this.A;var d=this.N,e=b.o;c=e?fi(e,0,e.length,b.a,c,d):null;d=c[2]-c[0];e=c[3]-c[1];d=Math.sqrt(d*d+e*e);e=this.f;e.beginPath();e.arc(c[0],c[1],d,0,2*Math.PI);this.b&&e.fill();this.a&&e.stroke()}""!==this.c&&Gn(this,b.o.slice(0,b.a),2,2)}};m.Og=function(b,c){var d=b.a,e,f;e=0;for(f=d.length;e<f;++e){var g=d[e];Ln[g.aa()].call(this,g,c)}};
m.Fd=function(b){var c=b.o;b=b.a;this.g&&Fn(this,c,c.length);""!==this.c&&Gn(this,c,c.length,b)};m.Dd=function(b){var c=b.o;b=b.a;this.g&&Fn(this,c,c.length);""!==this.c&&Gn(this,c,c.length,b)};m.Bd=function(b){if(Ub(this.j,b.G())){if(this.a){In(this,this.a);var c=this.f,d=b.o;c.beginPath();Jn(this,d,0,d.length,b.a,!1);c.stroke()}""!==this.c&&(b=ui(b),Gn(this,b,2,2))}};
m.Cd=function(b){var c=b.G();if(Ub(this.j,c)){if(this.a){In(this,this.a);var c=this.f,d=b.o,e=0,f=b.Hb(),g=b.a;c.beginPath();var h,k;h=0;for(k=f.length;h<k;++h)e=Jn(this,d,e,f[h],g,!1);c.stroke()}""!==this.c&&(b=zi(b),Gn(this,b,b.length,2))}};m.Gd=function(b){if(Ub(this.j,b.G())){if(this.a||this.b){this.b&&Hn(this,this.b);this.a&&In(this,this.a);var c=this.f;c.beginPath();Kn(this,Ji(b),0,b.Hb(),b.a);this.b&&c.fill();this.a&&c.stroke()}""!==this.c&&(b=Ki(b),Gn(this,b,2,2))}};
m.Ed=function(b){if(Ub(this.j,b.G())){if(this.a||this.b){this.b&&Hn(this,this.b);this.a&&In(this,this.a);var c=this.f,d=Ni(b),e=0,f=b.c,g=b.a,h,k;h=0;for(k=f.length;h<k;++h){var l=f[h];c.beginPath();e=Kn(this,d,e,l,g);this.b&&c.fill();this.a&&c.stroke()}}""!==this.c&&(b=Oi(b),Gn(this,b,b.length,2))}};function Mn(b){var c=Object.keys(b.Wa).map(Number);c.sort(Qc);var d,e,f,g,h;d=0;for(e=c.length;d<e;++d)for(f=b.Wa[c[d].toString()],g=0,h=f.length;g<h;++g)f[g](b)}
function Hn(b,c){var d=b.f,e=b.qa;e?e.fillStyle!=c.fillStyle&&(e.fillStyle=d.fillStyle=c.fillStyle):(d.fillStyle=c.fillStyle,b.qa={fillStyle:c.fillStyle})}
function In(b,c){var d=b.f,e=b.ha;e?(e.lineCap!=c.lineCap&&(e.lineCap=d.lineCap=c.lineCap),vh&&!Vc(e.H,c.H)&&d.setLineDash(e.H=c.H),e.lineJoin!=c.lineJoin&&(e.lineJoin=d.lineJoin=c.lineJoin),e.lineWidth!=c.lineWidth&&(e.lineWidth=d.lineWidth=c.lineWidth),e.miterLimit!=c.miterLimit&&(e.miterLimit=d.miterLimit=c.miterLimit),e.strokeStyle!=c.strokeStyle&&(e.strokeStyle=d.strokeStyle=c.strokeStyle)):(d.lineCap=c.lineCap,vh&&d.setLineDash(c.H),d.lineJoin=c.lineJoin,d.lineWidth=c.lineWidth,d.miterLimit=
c.miterLimit,d.strokeStyle=c.strokeStyle,b.ha={lineCap:c.lineCap,H:c.H,lineJoin:c.lineJoin,lineWidth:c.lineWidth,miterLimit:c.miterLimit,strokeStyle:c.strokeStyle})}m.rb=function(b,c){if(b){var d=b.a;this.b={fillStyle:ph(d?d:Bh)}}else this.b=null;if(c){var d=c.a,e=c.c,f=c.f,g=c.g,h=c.b,k=c.i;this.a={lineCap:void 0!==e?e:"round",H:f?f:Ch,lineJoin:void 0!==g?g:"round",lineWidth:this.W*(void 0!==h?h:1),miterLimit:void 0!==k?k:10,strokeStyle:nh(d?d:Dh)}}else this.a=null};
m.he=function(b){if(b){var c=b.Yb(),d=b.Pc(1),e=b.Pa(),f=b.ob();this.C=c[0];this.D=c[1];this.I=f[1];this.g=d;this.v=b.N;this.sa=e[0];this.Da=e[1];this.Ka=b.W;this.La=b.s;this.i=b.Ha();this.Ma=b.Z;this.O=f[0]}else this.g=null};
m.eb=function(b){if(b){var c=b.a;c?(c=c.a,this.u={fillStyle:ph(c?c:Bh)}):this.u=null;var d=b.i;if(d){var c=d.a,e=d.c,f=d.f,g=d.g,h=d.b,d=d.i;this.s={lineCap:void 0!==e?e:"round",H:f?f:Ch,lineJoin:void 0!==g?g:"round",lineWidth:void 0!==h?h:1,miterLimit:void 0!==d?d:10,strokeStyle:nh(c?c:Dh)}}else this.s=null;var c=b.b,e=b.f,f=b.c,g=b.g,h=b.Ha(),d=b.va(),k=b.j;b=b.u;this.V={font:void 0!==c?c:"10px sans-serif",textAlign:void 0!==k?k:"center",textBaseline:void 0!==b?b:"middle"};this.c=void 0!==d?d:"";
this.Xa=void 0!==e?this.W*e:0;this.xb=void 0!==f?this.W*f:0;this.Z=void 0!==g?g:0;this.l=this.W*(void 0!==h?h:1)}else this.c=""};var Ln={Point:En.prototype.Fd,LineString:En.prototype.Bd,Polygon:En.prototype.Gd,MultiPoint:En.prototype.Dd,MultiLineString:En.prototype.Cd,MultiPolygon:En.prototype.Ed,GeometryCollection:En.prototype.Og,Circle:En.prototype.Ad};function Nn(b){vl.call(this,b);this.V=vb()}y(Nn,vl);
Nn.prototype.i=function(b,c,d){On(this,"precompose",d,b,void 0);var e=this.a?this.a.Nc():null;if(e){var f=c.extent,g=void 0!==f;if(g){var h=b.na,k=b.size[0]*h,l=b.size[1]*h,n=b.M.rotation,q=[f[0],f[3]],p=[f[2],f[3]],r=[f[2],f[1]],f=[f[0],f[1]];ul(b.Cb,q,q);ul(b.Cb,p,p);ul(b.Cb,r,r);ul(b.Cb,f,f);d.save();Eh(d,-n,k/2,l/2);d.beginPath();d.moveTo(q[0]*h,q[1]*h);d.lineTo(p[0]*h,p[1]*h);d.lineTo(r[0]*h,r[1]*h);d.lineTo(f[0]*h,f[1]*h);d.clip();Eh(d,n,k/2,l/2)}h=this.l;k=d.globalAlpha;d.globalAlpha=c.opacity;
d.drawImage(e,0,0,+e.width,+e.height,Math.round(h[12]),Math.round(h[13]),Math.round(e.width*h[0]),Math.round(e.height*h[5]));d.globalAlpha=k;g&&d.restore()}On(this,"postcompose",d,b,void 0)};function On(b,c,d,e,f){var g=b.ma();if(jb(g,c)){var h=e.size[0]*e.na,k=e.size[1]*e.na,l=e.M.rotation;Eh(d,-l,h/2,k/2);b=void 0!==f?f:Pn(b,e,0);b=new En(d,e.na,e.extent,b,e.M.rotation);g.B(new mf(c,g,b,e,d,null));Mn(b);Eh(d,l,h/2,k/2)}}
function Pn(b,c,d){var e=c.M,f=c.na;return tl(b.V,f*c.size[0]/2,f*c.size[1]/2,f/e.resolution,-f/e.resolution,-e.rotation,-e.center[0]+d,-e.center[1])};var Qn=["Polygon","LineString","Image","Text"];function Rn(b,c,d){this.Da=b;this.V=c;this.c=null;this.g=0;this.resolution=d;this.I=this.D=null;this.b=[];this.coordinates=[];this.ha=vb();this.a=[];this.qa=[];this.ra=vb();this.sa=vb()}y(Rn,lf);
function Sn(b,c,d,e,f,g){var h=b.coordinates.length,k=b.Id(),l=[c[d],c[d+1]],n=[NaN,NaN],q=!0,p,r,u;for(p=d+f;p<e;p+=f){n[0]=c[p];n[1]=c[p+1];u=k[1];var v=k[2],z=k[3],x=n[0],C=n[1],H=0;x<k[0]?H=H|16:x>v&&(H=H|4);C<u?H|=8:C>z&&(H|=2);0===H&&(H=1);u=H;u!==r?(q&&(b.coordinates[h++]=l[0],b.coordinates[h++]=l[1]),b.coordinates[h++]=n[0],b.coordinates[h++]=n[1],q=!1):1===u?(b.coordinates[h++]=n[0],b.coordinates[h++]=n[1],q=!1):q=!0;l[0]=n[0];l[1]=n[1];r=u}p===d+f&&(b.coordinates[h++]=l[0],b.coordinates[h++]=
l[1]);g&&(b.coordinates[h++]=c[d],b.coordinates[h++]=c[d+1]);return h}function Tn(b,c){b.D=[0,c,0];b.b.push(b.D);b.I=[0,c,0];b.a.push(b.I)}function Un(b){var c=b.a;c.reverse();var d,e=c.length,f,g,h=-1;for(d=0;d<e;++d)if(f=c[d],g=f[0],6==g)h=d;else if(0==g){f[2]=d;f=b.a;for(g=d;h<g;){var k=f[h];f[h]=f[g];f[g]=k;++h;--g}h=-1}}function Vn(b,c){b.D[2]=b.b.length;b.D=null;b.I[2]=b.a.length;b.I=null;var d=[6,c];b.b.push(d);b.a.push(d)}Rn.prototype.finish=Ld;Rn.prototype.Id=function(){return this.V};
function Wn(b,c,d){Rn.call(this,b,c,d);this.u=this.O=null;this.C=this.A=this.Z=this.W=this.N=this.v=this.s=this.l=this.j=this.i=this.f=void 0}y(Wn,Rn);Wn.prototype.Fd=function(b,c){if(this.u){Tn(this,c);var d=b.o,e=this.coordinates.length,d=Sn(this,d,0,d.length,b.a,!1);this.b.push([4,e,d,this.u,this.f,this.i,this.j,this.l,this.s,this.v,this.N,this.W,this.Z,this.A,this.C]);this.a.push([4,e,d,this.O,this.f,this.i,this.j,this.l,this.s,this.v,this.N,this.W,this.Z,this.A,this.C]);Vn(this,c)}};
Wn.prototype.Dd=function(b,c){if(this.u){Tn(this,c);var d=b.o,e=this.coordinates.length,d=Sn(this,d,0,d.length,b.a,!1);this.b.push([4,e,d,this.u,this.f,this.i,this.j,this.l,this.s,this.v,this.N,this.W,this.Z,this.A,this.C]);this.a.push([4,e,d,this.O,this.f,this.i,this.j,this.l,this.s,this.v,this.N,this.W,this.Z,this.A,this.C]);Vn(this,c)}};Wn.prototype.finish=function(){Un(this);this.i=this.f=void 0;this.u=this.O=null;this.C=this.A=this.W=this.N=this.v=this.s=this.l=this.Z=this.j=void 0};
Wn.prototype.he=function(b){var c=b.Yb(),d=b.ob(),e=b.Wd(1),f=b.Pc(1),g=b.Pa();this.f=c[0];this.i=c[1];this.O=e;this.u=f;this.j=d[1];this.l=b.N;this.s=g[0];this.v=g[1];this.N=b.W;this.W=b.s;this.Z=b.Ha();this.A=b.Z;this.C=d[0]};function Xn(b,c,d){Rn.call(this,b,c,d);this.f={Xb:void 0,Sb:void 0,Tb:null,Ub:void 0,Vb:void 0,Wb:void 0,Pd:0,strokeStyle:void 0,lineCap:void 0,H:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}y(Xn,Rn);
function Yn(b,c,d,e,f){var g=b.coordinates.length;c=Sn(b,c,d,e,f,!1);g=[8,g,c];b.b.push(g);b.a.push(g);return e}m=Xn.prototype;m.Id=function(){this.c||(this.c=Hb(this.V),0<this.g&&Gb(this.c,this.resolution*(this.g+1)/2,this.c));return this.c};
function Zn(b){var c=b.f,d=c.strokeStyle,e=c.lineCap,f=c.H,g=c.lineJoin,h=c.lineWidth,k=c.miterLimit;c.Xb==d&&c.Sb==e&&Vc(c.Tb,f)&&c.Ub==g&&c.Vb==h&&c.Wb==k||(c.Pd!=b.coordinates.length&&(b.b.push([12]),c.Pd=b.coordinates.length),b.b.push([10,d,h,e,g,k,f],[1]),c.Xb=d,c.Sb=e,c.Tb=f,c.Ub=g,c.Vb=h,c.Wb=k)}
m.Bd=function(b,c){var d=this.f,e=d.lineWidth;void 0!==d.strokeStyle&&void 0!==e&&(Zn(this),Tn(this,c),this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.H],[1]),d=b.o,Yn(this,d,0,d.length,b.a),this.a.push([12]),Vn(this,c))};
m.Cd=function(b,c){var d=this.f,e=d.lineWidth;if(void 0!==d.strokeStyle&&void 0!==e){Zn(this);Tn(this,c);this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.H],[1]);var d=b.Hb(),e=b.o,f=b.a,g=0,h,k;h=0;for(k=d.length;h<k;++h)g=Yn(this,e,g,d[h],f);this.a.push([12]);Vn(this,c)}};m.finish=function(){this.f.Pd!=this.coordinates.length&&this.b.push([12]);Un(this);this.f=null};
m.rb=function(b,c){var d=c.a;this.f.strokeStyle=nh(d?d:Dh);d=c.c;this.f.lineCap=void 0!==d?d:"round";d=c.f;this.f.H=d?d:Ch;d=c.g;this.f.lineJoin=void 0!==d?d:"round";d=c.b;this.f.lineWidth=void 0!==d?d:1;d=c.i;this.f.miterLimit=void 0!==d?d:10;this.f.lineWidth>this.g&&(this.g=this.f.lineWidth,this.c=null)};
function $n(b,c,d){Rn.call(this,b,c,d);this.f={Qe:void 0,Xb:void 0,Sb:void 0,Tb:null,Ub:void 0,Vb:void 0,Wb:void 0,fillStyle:void 0,strokeStyle:void 0,lineCap:void 0,H:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}y($n,Rn);
function ao(b,c,d,e,f){var g=b.f,h=[1];b.b.push(h);b.a.push(h);var k,h=0;for(k=e.length;h<k;++h){var l=e[h],n=b.coordinates.length;d=Sn(b,c,d,l,f,!0);d=[8,n,d];n=[3];b.b.push(d,n);b.a.push(d,n);d=l}c=[7];b.a.push(c);void 0!==g.fillStyle&&b.b.push(c);void 0!==g.strokeStyle&&(g=[12],b.b.push(g),b.a.push(g));return d}m=$n.prototype;
m.Ad=function(b,c){var d=this.f,e=d.strokeStyle;if(void 0!==d.fillStyle||void 0!==e){bo(this);Tn(this,c);this.a.push([9,nh(Bh)]);void 0!==d.strokeStyle&&this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.H]);var f=b.o,e=this.coordinates.length;Sn(this,f,0,f.length,b.a,!1);f=[1];e=[2,e];this.b.push(f,e);this.a.push(f,e);e=[7];this.a.push(e);void 0!==d.fillStyle&&this.b.push(e);void 0!==d.strokeStyle&&(d=[12],this.b.push(d),this.a.push(d));Vn(this,c)}};
m.Gd=function(b,c){var d=this.f,e=d.strokeStyle;if(void 0!==d.fillStyle||void 0!==e)bo(this),Tn(this,c),this.a.push([9,nh(Bh)]),void 0!==d.strokeStyle&&this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.H]),d=b.Hb(),e=Ji(b),ao(this,e,0,d,b.a),Vn(this,c)};
m.Ed=function(b,c){var d=this.f,e=d.strokeStyle;if(void 0!==d.fillStyle||void 0!==e){bo(this);Tn(this,c);this.a.push([9,nh(Bh)]);void 0!==d.strokeStyle&&this.a.push([10,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.H]);var d=b.c,e=Ni(b),f=b.a,g=0,h,k;h=0;for(k=d.length;h<k;++h)g=ao(this,e,g,d[h],f);Vn(this,c)}};m.finish=function(){Un(this);this.f=null;var b=this.Da;if(0!==b){var c=this.coordinates,d,e;d=0;for(e=c.length;d<e;++d)c[d]=b*Math.round(c[d]/b)}};
m.Id=function(){this.c||(this.c=Hb(this.V),0<this.g&&Gb(this.c,this.resolution*(this.g+1)/2,this.c));return this.c};
m.rb=function(b,c){var d=this.f;if(b){var e=b.a;d.fillStyle=ph(e?e:Bh)}else d.fillStyle=void 0;c?(e=c.a,d.strokeStyle=nh(e?e:Dh),e=c.c,d.lineCap=void 0!==e?e:"round",e=c.f,d.H=e?e.slice():Ch,e=c.g,d.lineJoin=void 0!==e?e:"round",e=c.b,d.lineWidth=void 0!==e?e:1,e=c.i,d.miterLimit=void 0!==e?e:10,d.lineWidth>this.g&&(this.g=d.lineWidth,this.c=null)):(d.strokeStyle=void 0,d.lineCap=void 0,d.H=null,d.lineJoin=void 0,d.lineWidth=void 0,d.miterLimit=void 0)};
function bo(b){var c=b.f,d=c.fillStyle,e=c.strokeStyle,f=c.lineCap,g=c.H,h=c.lineJoin,k=c.lineWidth,l=c.miterLimit;void 0!==d&&c.Qe!=d&&(b.b.push([9,d]),c.Qe=c.fillStyle);void 0===e||c.Xb==e&&c.Sb==f&&c.Tb==g&&c.Ub==h&&c.Vb==k&&c.Wb==l||(b.b.push([10,e,k,f,h,l,g]),c.Xb=e,c.Sb=f,c.Tb=g,c.Ub=h,c.Vb=k,c.Wb=l)}function co(b,c,d){Rn.call(this,b,c,d);this.A=this.Z=this.W=null;this.u="";this.N=this.v=this.s=this.l=0;this.j=this.i=this.f=null}y(co,Rn);
function eo(b,c,d,e,f){if(""!==b.u&&b.j&&(b.f||b.i)){if(b.f){var g=b.f,h=b.W;if(!h||h.fillStyle!=g.fillStyle){var k=[9,g.fillStyle];b.b.push(k);b.a.push(k);h?h.fillStyle=g.fillStyle:b.W={fillStyle:g.fillStyle}}}b.i&&(g=b.i,h=b.Z,h&&h.lineCap==g.lineCap&&h.H==g.H&&h.lineJoin==g.lineJoin&&h.lineWidth==g.lineWidth&&h.miterLimit==g.miterLimit&&h.strokeStyle==g.strokeStyle||(k=[10,g.strokeStyle,g.lineWidth,g.lineCap,g.lineJoin,g.miterLimit,g.H,!1],b.b.push(k),b.a.push(k),h?(h.lineCap=g.lineCap,h.H=g.H,
h.lineJoin=g.lineJoin,h.lineWidth=g.lineWidth,h.miterLimit=g.miterLimit,h.strokeStyle=g.strokeStyle):b.Z={lineCap:g.lineCap,H:g.H,lineJoin:g.lineJoin,lineWidth:g.lineWidth,miterLimit:g.miterLimit,strokeStyle:g.strokeStyle}));g=b.j;h=b.A;h&&h.font==g.font&&h.textAlign==g.textAlign&&h.textBaseline==g.textBaseline||(k=[11,g.font,g.textAlign,g.textBaseline],b.b.push(k),b.a.push(k),h?(h.font=g.font,h.textAlign=g.textAlign,h.textBaseline=g.textBaseline):b.A={font:g.font,textAlign:g.textAlign,textBaseline:g.textBaseline});
Tn(b,f);g=b.coordinates.length;c=Sn(b,c,0,d,e,!1);c=[5,g,c,b.u,b.l,b.s,b.v,b.N,!!b.f,!!b.i];b.b.push(c);b.a.push(c);Vn(b,f)}}
co.prototype.eb=function(b){if(b){var c=b.a;c?(c=c.a,c=ph(c?c:Bh),this.f?this.f.fillStyle=c:this.f={fillStyle:c}):this.f=null;var d=b.i;if(d){var c=d.a,e=d.c,f=d.f,g=d.g,h=d.b,d=d.i,e=void 0!==e?e:"round",f=f?f.slice():Ch,g=void 0!==g?g:"round",h=void 0!==h?h:1,d=void 0!==d?d:10,c=nh(c?c:Dh);if(this.i){var k=this.i;k.lineCap=e;k.H=f;k.lineJoin=g;k.lineWidth=h;k.miterLimit=d;k.strokeStyle=c}else this.i={lineCap:e,H:f,lineJoin:g,lineWidth:h,miterLimit:d,strokeStyle:c}}else this.i=null;var l=b.b,c=b.f,
e=b.c,f=b.g,h=b.Ha(),d=b.va(),g=b.j,k=b.u;b=void 0!==l?l:"10px sans-serif";g=void 0!==g?g:"center";k=void 0!==k?k:"middle";this.j?(l=this.j,l.font=b,l.textAlign=g,l.textBaseline=k):this.j={font:b,textAlign:g,textBaseline:k};this.u=void 0!==d?d:"";this.l=void 0!==c?c:0;this.s=void 0!==e?e:0;this.v=void 0!==f?f:0;this.N=void 0!==h?h:1}else this.u=""};function fo(b,c,d){this.c=b;this.b=c;this.f=d;this.a={};Gf(1,1);vb()}fo.prototype.finish=function(){for(var b in this.a){var c=this.a[b],d;for(d in c)c[d].finish()}};
function go(b,c,d){var e=void 0!==c?c.toString():"0";c=b.a[e];void 0===c&&(c={},b.a[e]=c);e=c[d];void 0===e&&(e=new ho[d](b.c,b.b,b.f),c[d]=e);return e}fo.prototype.Ia=function(){return Wa(this.a)};
function io(b,c,d,e,f,g){var h=Object.keys(b.a).map(Number);h.sort(Qc);var k=b.b,l=k[0],n=k[1],q=k[2],k=k[3],l=[l,n,l,k,q,k,q,n];fi(l,0,8,2,e,l);c.save();c.beginPath();c.moveTo(l[0],l[1]);c.lineTo(l[2],l[3]);c.lineTo(l[4],l[5]);c.lineTo(l[6],l[7]);c.closePath();c.clip();for(var p,r,l=0,n=h.length;l<n;++l)for(p=b.a[h[l].toString()],q=0,k=Qn.length;q<k;++q)if(r=p[Qn[q]],void 0!==r){var u=r,v=c,z=d,x=e,C=f,H=g;r=r.b;var E=void 0,E=u.ha;if(x[0]==E[0]&&x[1]==E[1]&&x[4]==E[4]&&x[5]==E[5]&&x[12]==E[12]&&
x[13]==E[13])E=u.qa;else{var E=fi(u.coordinates,0,u.coordinates.length,2,x,u.qa),D=u.ha;D[0]=x[0];D[1]=x[1];D[2]=x[2];D[3]=x[3];D[4]=x[4];D[5]=x[5];D[6]=x[6];D[7]=x[7];D[8]=x[8];D[9]=x[9];D[10]=x[10];D[11]=x[11];D[12]=x[12];D[13]=x[13];D[14]=x[14];D[15]=x[15]}for(var x=!Wa(H),D=0,R=r.length,F=0,M=void 0,T=u.ra,u=u.sa,K=void 0,Z=void 0,X=void 0,W=void 0;D<R;){var J=r[D],aa,ja,Cb,za;switch(J[0]){case 0:F=J[1];x&&H[w(F).toString()]||!F.J()?D=J[2]:++D;break;case 1:v.beginPath();++D;break;case 2:F=J[1];
M=E[F];J=E[F+1];X=E[F+2]-M;F=E[F+3]-J;v.arc(M,J,Math.sqrt(X*X+F*F),0,2*Math.PI,!0);++D;break;case 3:v.closePath();++D;break;case 4:F=J[1];M=J[2];aa=J[3];Cb=J[4]*z;var Hg=J[5]*z,Ig=J[6];ja=J[7];var ue=J[8],yd=J[9],X=J[11],W=J[12],wf=J[13],ve=J[14];for(J[10]&&(X+=C);F<M;F+=2){J=E[F]-Cb;za=E[F+1]-Hg;wf&&(J=Math.round(J),za=Math.round(za));if(1!=W||0!==X){var Pc=J+Cb,xf=za+Hg;tl(T,Pc,xf,W,W,X,-Pc,-xf);v.transform(T[0],T[1],T[4],T[5],T[12],T[13])}Pc=v.globalAlpha;1!=ja&&(v.globalAlpha=Pc*ja);var xf=ve+
ue>aa.width?aa.width-ue:ve,an=Ig+yd>aa.height?aa.height-yd:Ig;v.drawImage(aa,ue,yd,xf,an,J,za,xf*z,an*z);1!=ja&&(v.globalAlpha=Pc);if(1!=W||0!==X)wb(T,u),v.transform(u[0],u[1],u[4],u[5],u[12],u[13])}++D;break;case 5:F=J[1];M=J[2];Cb=J[3];Hg=J[4]*z;Ig=J[5]*z;X=J[6];W=J[7]*z;aa=J[8];for(ja=J[9];F<M;F+=2){J=E[F]+Hg;za=E[F+1]+Ig;if(1!=W||0!==X)tl(T,J,za,W,W,X,-J,-za),v.transform(T[0],T[1],T[4],T[5],T[12],T[13]);ue=Cb.split("\n");yd=ue.length;1<yd?(wf=Math.round(1.5*v.measureText("M").width),za-=(yd-1)/
2*wf):wf=0;for(ve=0;ve<yd;ve++)Pc=ue[ve],ja&&v.strokeText(Pc,J,za),aa&&v.fillText(Pc,J,za),za+=wf;if(1!=W||0!==X)wb(T,u),v.transform(u[0],u[1],u[4],u[5],u[12],u[13])}++D;break;case 6:++D;break;case 7:v.fill();++D;break;case 8:F=J[1];M=J[2];J=E[F];za=E[F+1];X=J+.5|0;W=za+.5|0;if(X!==K||W!==Z)v.moveTo(J,za),K=X,Z=W;for(F+=2;F<M;F+=2)if(J=E[F],za=E[F+1],X=J+.5|0,W=za+.5|0,X!==K||W!==Z)v.lineTo(J,za),K=X,Z=W;++D;break;case 9:v.fillStyle=J[1];++D;break;case 10:K=void 0!==J[7]?J[7]:!0;Z=J[2];v.strokeStyle=
J[1];v.lineWidth=K?Z*z:Z;v.lineCap=J[3];v.lineJoin=J[4];v.miterLimit=J[5];vh&&v.setLineDash(J[6]);Z=K=NaN;++D;break;case 11:v.font=J[1];v.textAlign=J[2];v.textBaseline=J[3];++D;break;case 12:v.stroke();++D;break;default:++D}}}c.restore()}var ho={Image:Wn,LineString:Xn,Polygon:$n,Text:co};function jo(b,c){return w(b)-w(c)}function ko(b,c){var d=.5*b/c;return d*d}function lo(b,c,d,e,f,g){var h=!1,k,l;if(k=d.g)l=k.cc(),2==l||3==l?k.me(f,g):(0==l&&k.load(),k.Sd(f,g),h=!0);if(f=(0,d.f)(c))e=f.Ld(e),(0,mo[e.aa()])(b,e,d,c);return h}
var mo={Point:function(b,c,d,e){var f=d.g;if(f){if(2!=f.cc())return;var g=go(b,d.a,"Image");g.he(f);g.Fd(c,e)}if(f=d.va())b=go(b,d.a,"Text"),b.eb(f),eo(b,c.o,2,2,e)},LineString:function(b,c,d,e){var f=d.b;if(f){var g=go(b,d.a,"LineString");g.rb(null,f);g.Bd(c,e)}if(f=d.va())b=go(b,d.a,"Text"),b.eb(f),eo(b,ui(c),2,2,e)},Polygon:function(b,c,d,e){var f=d.c,g=d.b;if(f||g){var h=go(b,d.a,"Polygon");h.rb(f,g);h.Gd(c,e)}if(f=d.va())b=go(b,d.a,"Text"),b.eb(f),eo(b,Ki(c),2,2,e)},MultiPoint:function(b,c,d,
e){var f=d.g;if(f){if(2!=f.cc())return;var g=go(b,d.a,"Image");g.he(f);g.Dd(c,e)}if(f=d.va())b=go(b,d.a,"Text"),b.eb(f),d=c.o,eo(b,d,d.length,c.a,e)},MultiLineString:function(b,c,d,e){var f=d.b;if(f){var g=go(b,d.a,"LineString");g.rb(null,f);g.Cd(c,e)}if(f=d.va())b=go(b,d.a,"Text"),b.eb(f),c=zi(c),eo(b,c,c.length,2,e)},MultiPolygon:function(b,c,d,e){var f=d.c,g=d.b;if(g||f){var h=go(b,d.a,"Polygon");h.rb(f,g);h.Ed(c,e)}if(f=d.va())b=go(b,d.a,"Text"),b.eb(f),c=Oi(c),eo(b,c,c.length,2,e)},GeometryCollection:function(b,
c,d,e){c=c.a;var f,g;f=0;for(g=c.length;f<g;++f)(0,mo[c[f].aa()])(b,c[f],d,e)},Circle:function(b,c,d,e){var f=d.c,g=d.b;if(f||g){var h=go(b,d.a,"Polygon");h.rb(f,g);h.Ad(c,e)}if(f=d.va())b=go(b,d.a,"Text"),b.eb(f),eo(b,c.o.slice(0,c.a),2,2,e)}};function no(b){Nn.call(this,b);this.a=null;this.l=vb()}y(no,Nn);
no.prototype.j=function(b,c){var d=b.na,e=b.M,f=e.center,g=e.resolution,h=this.ma().S(),k=b.fa,l=b.extent;void 0!==c.extent&&(l=Tb(l,c.extent));if(!k[0]&&!k[1]&&!Ob(l)){if(k=e=Qf(h,l,g,d,e.projection))k=e,l=k.T(),2!=l&&3!=l&&I(k,"change",this.O,this),0==l&&(k.load(),l=k.T()),k=2==l;k&&(this.a=e)}if(this.a){var e=this.a,k=e.G(),l=e.R(),n=e.c,g=d*l/(g*n);tl(this.l,d*b.size[0]/2,d*b.size[1]/2,g,g,0,n*(k[0]-f[0])/l,n*(f[1]-k[3])/l);zl(b.ca,e.s());Al(b,h)}return!!this.a};function oo(b){Nn.call(this,b);this.g=null;this.c=Gf();this.u=null;this.s=Eb()}y(oo,Nn);
oo.prototype.i=function(b,c,d){var e=b.na,f=b.M,g=f.center,h=f.projection,k=b.size,f=e/f.resolution,l=this.ma(),n=l.S(),q=n.Ue(h),p=n.Fc(h),r=Pn(this,b,0);On(this,"precompose",d,b,r);jb(l,"render")?(this.c.canvas.width=d.canvas.width,this.c.canvas.height=d.canvas.height,l=this.c):l=d;var u=Math.round(e*k[0]/2),e=Math.round(e*k[1]/2),k=l.globalAlpha;l.globalAlpha=c.opacity;c=n.Za(h);var v=this.u,z,x,C,H,E,D,R,F,M,T,K;C=0;for(H=v.length;C<H;++C){R=v[C];F=pg(c,R.oa,this.s);if(z=!p&&this.g[R.oa.toString()]){l.save();
l.beginPath();l.moveTo((F[0]-g[0])*f+u,(g[1]-F[1])*f+e);l.lineTo((F[2]-g[0])*f+u,(g[1]-F[1])*f+e);l.lineTo((F[2]-g[0])*f+u,(g[1]-F[3])*f+e);l.lineTo((F[0]-g[0])*f+u,(g[1]-F[3])*f+e);l.closePath();E=0;for(D=z.length;E<D;++E)x=z[E],l.moveTo((x[0]-g[0])*f+u,(g[1]-x[1])*f+e),l.lineTo((x[0]-g[0])*f+u,(g[1]-x[3])*f+e),l.lineTo((x[2]-g[0])*f+u,(g[1]-x[3])*f+e),l.lineTo((x[2]-g[0])*f+u,(g[1]-x[1])*f+e),l.closePath();l.clip()}x=R.oa[0];D=n;K=x;M=D.Za(h);E=D.D;K=Bb(sg(M,K),D.I);M=void 0;1==E?M=K:(D=D.I,void 0===
D&&(D=[0,0]),D[0]=K[0]*E+.5|0,D[1]=K[1]*E+.5|0,M=D);D=M;E=[F[0],F[3]];K=Math.round(Pb(F)*f);F=Math.round(Qb(F)*f);x=pg(c,Bg(c,g,x));x=[x[0],x[1]];M=u+Math.round((x[0]-g[0])*f);T=e+Math.round((g[1]-x[1])*f);l.drawImage(R.Oc(),q,q,D[0],D[1],Math.round((E[0]-x[0])*f/K)*K+M,Math.round((x[1]-E[1])*f/F)*F+T,K,F);z&&l.restore()}l!=d&&(On(this,"render",l,b,r),d.drawImage(l.canvas,0,0));l.globalAlpha=k;On(this,"postcompose",d,b,r)};
oo.prototype.j=function(b,c){function d(b){b=b.T();return 2==b||4==b||3==b&&!v}var e=b.na,f=b.M,g=f.projection,h=this.ma(),k=h.S(),l=k.Za(g),n=qg(l,f.resolution),q=l.R(n),p=f.center;q==f.resolution?(p=Cl(p,q,b.size),f=Sb(p,q,f.rotation,b.size)):f=b.extent;void 0!==c.extent&&(f=Tb(f,c.extent));if(Ob(f))return!1;var q=yg(l,f,q),r={};r[n]={};var u=wl(k,g,r),v=h.get("useInterimTilesOnError"),p=Eb(),z=new De(0,0,0,0),x,C,H,E;for(H=q.b;H<=q.a;++H)for(E=q.c;E<=q.f;++E)x=Pg(k,n,H,E,e,g),!d(x)&&x.a&&(x=x.a),
d(x)?r[n][x.oa.toString()]=x:(C=wg(l,x.oa,u,null,z,p),C||(x=xg(l,x.oa,z,p))&&u(n+1,x));u=Object.keys(r).map(Number);u.sort(Qc);H=[];var D,R;E=0;for(C=u.length;E<C;++E)for(D in x=u[E],R=r[x],R)x=R[D],2==x.T()&&H.push(x);this.u=H;if(!k.Fc(g)){var F={},M;for(E=H.length-1;0<=E;--E)M=H[E].oa,wg(l,M,function(b,c){var d=r[b];if(d){var e,f;for(e in d)if(f=d[e],c.contains(f.oa)&&2==f.T())return e in F||(F[e]=[]),F[e].push(pg(l,M)),!0}return!1},this,z,p);this.g=F}Bl(b.oe,k,n,q);Dl(b,k,l,e,g,f,n,h.get("preload"));
yl(b,k);Al(b,k);return!0};function po(b){Nn.call(this,b);this.c=!1;this.C=-1;this.A=NaN;this.s=Eb();this.g=this.v=null;this.u=Gf()}y(po,Nn);
po.prototype.i=function(b,c,d){var e=b.extent,f=b.na,g=c.kf?b.jj:{},h=b.M,k=h.projection,h=h.rotation,l=k.G(),n=this.ma().S(),q=Pn(this,b,0);On(this,"precompose",d,b,q);var p=this.g;if(p&&!p.Ia()){var r;jb(this.ma(),"render")?(this.u.canvas.width=d.canvas.width,this.u.canvas.height=d.canvas.height,r=this.u):r=d;var u=r.globalAlpha;r.globalAlpha=c.opacity;c=b.size[0]*f;var v=b.size[1]*f;Eh(r,-h,c/2,v/2);io(p,r,f,q,h,g);if(n.C&&k.b&&!Ib(l,e)){for(var k=e[0],n=Pb(l),z=0;k<l[0];)--z,q=n*z,q=Pn(this,b,
q),io(p,r,f,q,h,g),k+=n;z=0;for(k=e[2];k>l[2];)++z,q=n*z,q=Pn(this,b,q),io(p,r,f,q,h,g),k-=n;q=Pn(this,b,0)}Eh(r,h,c/2,v/2);r!=d&&(On(this,"render",r,b,q),d.drawImage(r.canvas,0,0));r.globalAlpha=u}On(this,"postcompose",d,b,q)};po.prototype.D=function(){xl(this)};
po.prototype.j=function(b){function c(b){var c,e=b.i;e?c=e.call(b,n):(e=d.i)&&(c=e(b,n));if(c){if(c){e=!1;if(ea(c))for(var f=0,g=c.length;f<g;++f)e=lo(r,b,c[f],ko(n,q),this.D,this)||e;else e=lo(r,b,c,ko(n,q),this.D,this)||e;b=e}else b=!1;this.c=this.c||b}}var d=this.ma(),e=d.S();zl(b.ca,e.s());Al(b,e);var f=b.fa[0],g=b.fa[1],h=d.s,k=d.v;if(!this.c&&!h&&f||!k&&g)return!0;var l=b.extent,k=b.M,f=k.projection,n=k.resolution,q=b.na,g=d.f,p=d.l,h=d.get("renderOrder");void 0===h&&(h=jo);l=Gb(l,p*n);p=k.projection.G();
e.C&&k.projection.b&&!Ib(p,b.extent)&&(b=Math.max(Pb(l)/2,Pb(p)),l[0]=p[0]-b,l[2]=p[2]+b);if(!this.c&&this.A==n&&this.C==g&&this.v==h&&Ib(this.s,l))return!0;hb(this.g);this.g=null;this.c=!1;var r=new fo(.5*n/q,l,n);Jj(e,l,n,f);if(h){var u=[];Hj(e,l,function(b){u.push(b)},this);u.sort(h);u.forEach(c,this)}else Hj(e,l,c,this);r.finish();this.A=n;this.C=g;this.v=h;this.s=l;this.g=r;return!0};function qo(b,c){Il.call(this,0,c);this.f=Gf();this.j=Gf();this.a=this.f.canvas;this.a.style.width="100%";this.a.style.height="100%";this.a.className="ol-unselectable";b.insertBefore(this.a,b.childNodes[0]||null);this.i=this.j.canvas;this.N=[0,0];this.A=Eb();this.c=!0;this.v=vb()}y(qo,Il);
function ro(b,c,d){var e=b.u,f=b.f;if(jb(e,c)){var g=d.extent,h=d.na,k=d.M.rotation,l=d.na,n=d.M,q=n.resolution;b=tl(b.v,b.a.width/2,b.a.height/2,l/q,-l/q,-n.rotation,-n.center[0],-n.center[1]);g=new En(f,h,g,b,k);e.B(new mf(c,e,g,d,f,null));Mn(g)}}qo.prototype.aa=function(){return"canvas"};
qo.prototype.l=function(b){if(b){var c,d=b.na,e=b.size[0]*d,f=b.size[1]*d;this.a.width=e;this.a.height=f;var g=b.M.rotation,h;if(g){c=this.j;h=Sb(this.N,d,g,b.size,this.A);var d=Pb(h),k=Qb(h);this.i.width=d+.5;this.i.height=k+.5;this.j.translate(Math.round((d-e)/2),Math.round((k-f)/2))}else c=this.f;d=b.M;k=b.Cb;tl(k,b.size[0]/2,b.size[1]/2,1/d.resolution,-1/d.resolution,-d.rotation,-d.center[0],-d.center[1]);wb(k,b.Bf);ro(this,"precompose",b);d=b.Rd;Wc(d);var k=b.M.resolution,l,n,q,p;l=0;for(n=d.length;l<
n;++l){p=d[l];q=p.layer;var r=q;q=w(r).toString();q in this.b?q=this.b[q]:(r=r instanceof pf?new no(r):r instanceof qf?new oo(r):r instanceof qj?new po(r):null,this.b[q]=r,this.g[q]=I(r,"change",this.s,this),q=r);p.visible&&k>=p.Sa&&k<p.bb&&"ready"==p.lj&&q.j(b,p)&&q.i(b,p,c)}g&&(this.f.translate(e/2,f/2),this.f.rotate(g),this.f.drawImage(this.i,Math.round(h[0]),Math.round(h[1])),this.f.rotate(-g),this.f.translate(-e/2,-f/2));ro(this,"postcompose",b);this.c||(Zj(this.a,!0),this.c=!0);for(var u in this.b)if(!(u in
b.Qd)){b.Rc.push(this.C.bind(this));break}b.Rc.push(Jl)}else this.c&&(Zj(this.a,!1),this.c=!1)};var so=["canvas","webgl","dom"];
function to(b){mb.call(this);var c=uo(b);this.La=void 0!==b.Uh?b.Uh:!1;this.Ma=void 0!==b.Vh?b.Vh:!1;this.Xa=void 0!==b.na?b.na:uh;this.Wa=c.Mb;this.He=function(){this.gb=void 0;this.cj.call(this,Date.now())}.bind(this);this.Da=vb();this.xb=vb();this.Ka=0;this.j=null;this.ra=Eb();this.C=this.I=null;this.a=document.createElement("DIV");this.a.className="ol-viewport";this.a.style.position="relative";this.a.style.overflow="hidden";this.a.style.width="100%";this.a.style.height="100%";this.a.style.msTouchAction=
"none";this.a.style.touchAction="none";yh&&uk(this.a,"ol-touch");this.v=document.createElement("DIV");this.v.className="ol-overlaycontainer";this.a.appendChild(this.v);this.s=document.createElement("DIV");this.s.className="ol-overlaycontainer-stopevent";b=["click","dblclick","mousedown","touchstart","mspointerdown",pl,ic?"DOMMouseScroll":"mousewheel"];for(var d=0,e=b.length;d<e;++d)I(this.s,b[d],Ta);this.a.appendChild(this.s);b=new hl(this);for(var f in sl)I(b,sl[f],this.cf,this);gb(this,qa(hb,b));
this.V=c.ac;this.l=null;I(this.a,"wheel",this.Jb,this);I(this.a,"mousewheel",this.Jb,this);this.A=c.controls;this.i=c.mb;this.c=c.ec;this.Af={};this.sa=new c.dj(this.a,this);gb(this,qa(hb,this.sa));this.O=null;this.D=[];this.ha=[];this.qa=new Nl(this.$g.bind(this),this.Dh.bind(this));this.yb={};I(this,L("layergroup"),this.lh,this);I(this,L("view"),this.Eh,this);I(this,L("size"),this.Ah,this);I(this,L("target"),this.Ch,this);this.ka(c.values);this.A.forEach(function(b){b.setMap(this)},this);I(this.A,
"add",function(b){b.element.setMap(this)},this);I(this.A,"remove",function(b){b.element.setMap(null)},this);this.i.forEach(function(b){b.setMap(this)},this);I(this.i,"add",function(b){b.element.setMap(this)},this);I(this.i,"remove",function(b){b.element.setMap(null)},this);this.c.forEach(this.De,this);I(this.c,"add",function(b){this.De(b.element)},this);I(this.c,"remove",function(b){var c=b.element.Ya();void 0!==c&&delete this.Af[c.toString()];b.element.setMap(null)},this)}y(to,mb);
function Yg(b,c){kf(Xg(b)).push(c)}m=to.prototype;m.De=function(b){var c=b.Ya();void 0!==c&&(this.Af[c.toString()]=b);b.setMap(this)};m.Ea=function(b){this.render();Array.prototype.push.apply(this.D,arguments)};m.L=function(){cb(this.a,"wheel",this.Jb,this);cb(this.a,"mousewheel",this.Jb,this);void 0!==this.g&&(t.removeEventListener("resize",this.g,!1),this.g=void 0);this.gb&&(t.cancelAnimationFrame(this.gb),this.gb=void 0);Ic(this.a);to.U.L.call(this)};
function vo(b){b=b.get("target");return void 0!==b?zc(b):null}m.Gb=function(b){var c=this.j;return c?(b=b.slice(),ul(c.Bf,b,b)):null};function Xg(b){return b.get("layergroup")}function Mm(b,c){var d=b.j;if(d){var e=c.slice(0,2);return ul(d.Cb,e,e)}return null}function Rm(b){return b.get("size")}function U(b){return b.get("view")}
m.$g=function(b,c,d,e){var f=this.j;if(!(f&&c in f.nc&&f.nc[c][b.oa.toString()]))return Infinity;b=d[0]-f.focus[0];d=d[1]-f.focus[1];return 65536*Math.log(e)+Math.sqrt(b*b+d*d)/e};m.Jb=function(b,c){var d=new fl(c||b.type,this,b);this.cf(d)};m.cf=function(b){if(this.j){this.O=b.coordinate;b.frameState=this.j;var c=this.i.a,d;if(!1!==this.B(b))for(d=c.length-1;0<=d;d--){var e=c[d];if(e.getActive()&&!e.handleEvent(b))break}}};
m.yh=function(){var b=this.j,c=this.qa;if(!c.Ia()){var d=16,e=d;if(b){var f=b.fa;f[0]&&(d=this.La?8:0,e=2);f[1]&&(d=this.Ma?8:0,e=2)}if(c.c<d){var f=c.l,g=c.a,h=c.b,k=0,l=g.length,n,q,p;for(q=0;q<l;++q)n=g[q],p=f(n),Infinity==p?delete c.f[c.g(n)]:(h[k]=p,g[k++]=n);g.length=k;h.length=k;for(f=(c.a.length>>1)-1;0<=f;f--)Ml(c,f);for(f=0;c.c<d&&f<e&&0<c.Oa();)g=c,k=g.a,l=g.b,h=k[0],1==k.length?(k.length=0,l.length=0):(k[0]=k.pop(),l[0]=l.pop(),Ml(g,0)),k=g.g(h),delete g.f[k],g=h[0],0===g.T()&&(c.j[g.bc()]=
!0,++c.c,++f,g.load())}}c=this.ha;e=0;for(d=c.length;e<d;++e)c[e](this,b);c.length=0};m.Ah=function(){this.render()};m.Ch=function(){var b=vo(this);if(this.l){for(var c=0,d=this.l.length;c<d;++c)G(this.l[c]);this.l=null}b?(b.appendChild(this.a),b=this.V?this.V:b,this.l=[I(b,"keydown",this.Jb,this),I(b,"keypress",this.Jb,this)],this.g||(this.g=this.ne.bind(this),t.addEventListener("resize",this.g,!1))):(Ic(this.a),void 0!==this.g&&(t.removeEventListener("resize",this.g,!1),this.g=void 0));this.ne()};
m.Dh=function(){this.render()};m.Fh=function(){this.render()};m.Eh=function(){this.I&&(G(this.I),this.I=null);var b=U(this);b&&(this.I=I(b,"propertychange",this.Fh,this));this.render()};m.mh=function(){this.render()};m.nh=function(){this.render()};m.lh=function(){this.C&&(this.C.forEach(G),this.C=null);var b=Xg(this);b&&(this.C=[I(b,"propertychange",this.nh,this),I(b,"change",this.mh,this)]);this.render()};m.render=function(){void 0===this.gb&&(this.gb=t.requestAnimationFrame(this.He))};
m.cj=function(b){var c,d,e,f=Rm(this),g=U(this),h=null;if(void 0!==f&&0<f[0]&&0<f[1]&&g&&cm(g)){var h=g.i.slice(),k=Xg(this).Kd(),l={};c=0;for(d=k.length;c<d;++c)l[w(k[c].layer)]=k[c];e=g.T();h={animate:!1,ca:{},Cb:this.Da,extent:null,focus:this.O?this.O:e.center,index:this.Ka++,Qd:l,Rd:k,Mb:Ua({},this.Wa),na:this.Xa,Bf:this.xb,Rc:[],size:f,jj:this.yb,oj:this.qa,time:b,oe:{},M:e,fa:h,nc:{}}}if(h){b=this.D;c=f=0;for(d=b.length;c<d;++c)g=b[c],g(this,h)&&(b[f++]=g);b.length=f;h.extent=Sb(e.center,e.resolution,
e.rotation,h.size)}this.j=h;this.sa.l(h);h&&(h.animate&&this.render(),Array.prototype.push.apply(this.ha,h.Rc),0!==this.D.length||h.fa[0]||h.fa[1]||Kb(h.extent,this.ra)||(this.B(new yk("moveend",this,h)),Hb(h.extent,this.ra)));this.B(new yk("postrender",this,h));d=c=this.yh;this&&(d=pa(c,this));!ia(t.setImmediate)||t.Window&&t.Window.prototype&&!Zb("Edge")&&t.Window.prototype.setImmediate==t.setImmediate?(ek||(ek=fk()),ek(d)):t.setImmediate(d)};
m.ne=function(){var b=vo(this);if(b){var c=yc(b),d=gc&&b.currentStyle,e;if(e=d)wc(c),e=!0;if(e&&"auto"!=d.width&&"auto"!=d.height&&!d.boxSizing)c=ak(b,d.width,"width","pixelWidth"),b=ak(b,d.height,"height","pixelHeight"),b=new vc(c,b);else{d=new vc(b.offsetWidth,b.offsetHeight);if(gc){c=bk(b,"paddingLeft");e=bk(b,"paddingRight");var f=bk(b,"paddingTop"),g=bk(b,"paddingBottom"),c=new Pj(f,e,g,c)}else c=Sj(b,"paddingLeft"),e=Sj(b,"paddingRight"),f=Sj(b,"paddingTop"),g=Sj(b,"paddingBottom"),c=new Pj(parseFloat(f),
parseFloat(e),parseFloat(g),parseFloat(c));!gc||9<=Number(rc)?(e=Sj(b,"borderLeftWidth"),f=Sj(b,"borderRightWidth"),g=Sj(b,"borderTopWidth"),b=Sj(b,"borderBottomWidth"),b=new Pj(parseFloat(g),parseFloat(f),parseFloat(b),parseFloat(e))):(e=dk(b,"borderLeft"),f=dk(b,"borderRight"),g=dk(b,"borderTop"),b=dk(b,"borderBottom"),b=new Pj(g,f,b,e));b=new vc(d.width-b.left-c.left-c.right-b.right,d.height-b.top-c.top-c.bottom-b.bottom)}this.set("size",[b.width,b.height])}else this.set("size",void 0)};
function uo(b){var c=null;void 0!==b.ac&&(c="string"===typeof b.ac?document.getElementById(b.ac):b.ac);var d={},e={};if(void 0===b.ea||"boolean"===typeof b.ea&&b.ea)e["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]=
"http://openlayers.org/";else{var f=b.ea;"string"===typeof f?e[f]="":ka(f)&&(e[f.src]=f.href)}f=b.layers instanceof jf?b.layers:new jf({layers:b.layers});d.layergroup=f;d.target=b.target;d.view=void 0!==b.view?b.view:new Xl;var f=Il,g;void 0!==b.Vc?ea(b.Vc)?g=b.Vc:"string"===typeof b.Vc&&(g=[b.Vc]):g=so;var h,k;h=0;for(k=g.length;h<k;++h)if("canvas"==g[h]&&wh){f=qo;break}void 0!==b.controls?g=ea(b.controls)?new pb(b.controls.slice()):b.controls:(g={},h=new pb,(void 0!==g.zoom?g.zoom:1)&&h.push(new qm(g.mk)),
(void 0!==g.rotate?g.rotate:1)&&h.push(new om(g.kk)),(void 0!==g.attribution?g.attribution:1)&&h.push(new gm(g.bk)),g=h);var l;void 0!==b.mb?l=ea(b.mb)?new pb(b.mb.slice()):b.mb:l=rn();b=void 0!==b.ec?ea(b.ec)?new pb(b.ec.slice()):b.ec:new pb;return{controls:g,mb:l,ac:c,Mb:e,ec:b,dj:f,values:d}}Oe(wn);Oe(Dn);Dn.forEach(function(b){wn.forEach(function(c){Pe(b,c,xn);Pe(c,b,yn)})});function wo(b){mb.call(this);this.D=b.id;this.C=void 0!==b.Ph?b.Ph:!0;this.I=void 0!==b.Rf?b.Rf:!0;this.c=document.createElement("DIV");this.c.className="ol-overlay-container";this.c.style.position="absolute";this.md=void 0!==b.md?b.md:!1;this.j=void 0!==b.Bg?b.Bg:{};this.s=void 0!==b.Cg?b.Cg:20;this.a={uc:"",Kc:"",Xc:"",ad:"",visible:!0};this.i=null;I(this,L("element"),this.kh,this);I(this,L("map"),this.rh,this);I(this,L("offset"),this.uh,this);I(this,L("position"),this.wh,this);I(this,L("positioning"),
this.xh,this);void 0!==b.element&&this.set("element",b.element);this.set("offset",void 0!==b.offset?b.offset:[0,0]);this.set("positioning",void 0!==b.Yd?b.Yd:"top-left");void 0!==b.position&&this.setPosition(b.position)}y(wo,mb);m=wo.prototype;m.Ya=function(){return this.D};m.kh=function(){Hc(this.c);var b=this.get("element");b&&this.c.appendChild(b)};
m.rh=function(){this.i&&(Ic(this.c),G(this.i),this.i=null);var b=this.get("map");b&&(this.i=I(b,"postrender",this.render,this),xo(this),b=this.I?b.s:b.v,this.C?b.insertBefore(this.c,b.childNodes[0]||null):b.appendChild(this.c))};m.render=function(){xo(this)};m.uh=function(){xo(this)};
m.wh=function(){xo(this);if(void 0!==this.get("position")&&this.md){var b=this.get("map");if(void 0!==b&&vo(b)){var c=yo(vo(b),Rm(b)),d=this.get("element"),e=d.offsetWidth,f=d.currentStyle||window.getComputedStyle(d),e=e+(parseInt(f.marginLeft,10)+parseInt(f.marginRight,10)),f=d.offsetHeight,g=d.currentStyle||window.getComputedStyle(d),f=f+(parseInt(g.marginTop,10)+parseInt(g.marginBottom,10)),h=yo(d,[e,f]),d=this.s;Ib(c,h)||(e=h[0]-c[0],f=c[2]-h[2],g=h[1]-c[1],h=c[3]-h[3],c=[0,0],0>e?c[0]=e-d:0>
f&&(c[0]=Math.abs(f)+d),0>g?c[1]=g-d:0>h&&(c[1]=Math.abs(h)+d),0===c[0]&&0===c[1])||(d=Yl(U(b)),e=Mm(b,d),c=[e[0]+c[0],e[1]+c[1]],this.j&&(this.j.source=d,b.Ea(lm(this.j))),bm(U(b),b.Gb(c)))}}};m.xh=function(){xo(this)};m.setMap=function(b){this.set("map",b)};m.setPosition=function(b){this.set("position",b)};function yo(b,c){var d=Uj(b);return[d.x,d.y,d.x+c[0],d.y+c[1]]}m.Ta=function(b){this.a.visible!==b&&(Zj(this.c,b),this.a.visible=b)};
function xo(b){var c=b.get("map"),d=b.get("position");if(void 0!==c&&c.j&&void 0!==d){var d=Mm(c,d),e=Rm(c),c=b.c.style,f=b.get("offset"),g=b.get("positioning"),h=f[0],f=f[1];if("bottom-right"==g||"center-right"==g||"top-right"==g)""!==b.a.Kc&&(b.a.Kc=c.left=""),h=Math.round(e[0]-d[0]-h)+"px",b.a.Xc!=h&&(b.a.Xc=c.right=h);else{""!==b.a.Xc&&(b.a.Xc=c.right="");if("bottom-center"==g||"center-center"==g||"top-center"==g)h-=Wj(b.c).width/2;h=Math.round(d[0]+h)+"px";b.a.Kc!=h&&(b.a.Kc=c.left=h)}if("bottom-left"==
g||"bottom-center"==g||"bottom-right"==g)""!==b.a.ad&&(b.a.ad=c.top=""),d=Math.round(e[1]-d[1]-f)+"px",b.a.uc!=d&&(b.a.uc=c.bottom=d);else{""!==b.a.uc&&(b.a.uc=c.bottom="");if("center-left"==g||"center-center"==g||"center-right"==g)f-=Wj(b.c).height/2;d=Math.round(d[1]+f)+"px";b.a.ad!=d&&(b.a.ad=c.top=d)}b.Ta(!0)}else b.Ta(!1)};var zo=!gc||9<=Number(rc),Ao=!gc||9<=Number(rc),Bo=gc&&!pc("9");!jc||pc("528");ic&&pc("1.9b")||gc&&pc("8")||fc&&pc("9.5")||jc&&pc("528");ic&&!pc("8")||gc&&pc("9");function Co(b,c){this.type=b;this.a=this.target=c;this.defaultPrevented=this.f=!1;this.Of=!0}Co.prototype.stopPropagation=function(){this.f=!0};Co.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Of=!1};function Do(b,c){Co.call(this,b?b.type:"");this.relatedTarget=this.a=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.c=!1;this.b=this.state=null;if(b){var d=this.type=b.type,e=b.changedTouches?b.changedTouches[0]:null;this.target=b.target||b.srcElement;this.a=c;var f=b.relatedTarget;if(f){if(ic){var g;a:{try{Rj(f.nodeName);g=!0;break a}catch(h){}g=!1}g||(f=null)}}else"mouseover"==d?f=b.fromElement:"mouseout"==d&&(f=b.toElement);this.relatedTarget=
f;null===e?(this.offsetX=jc||void 0!==b.offsetX?b.offsetX:b.layerX,this.offsetY=jc||void 0!==b.offsetY?b.offsetY:b.layerY,this.clientX=void 0!==b.clientX?b.clientX:b.pageX,this.clientY=void 0!==b.clientY?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0);this.button=b.button;this.c=b.ctrlKey;this.state=b.state;this.b=b;b.defaultPrevented&&
this.preventDefault()}}y(Do,Co);var Eo=[1,4,2];Do.prototype.stopPropagation=function(){Do.U.stopPropagation.call(this);this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0};Do.prototype.preventDefault=function(){Do.U.preventDefault.call(this);var b=this.b;if(b.preventDefault)b.preventDefault();else if(b.returnValue=!1,Bo)try{if(b.ctrlKey||112<=b.keyCode&&123>=b.keyCode)b.keyCode=-1}catch(c){}};var Fo="closure_listenable_"+(1E6*Math.random()|0),Go=0;function Ho(b,c,d,e,f){this.listener=b;this.a=null;this.src=c;this.type=d;this.wc=!!e;this.Jc=f;this.key=++Go;this.Ob=this.hb=!1}function Io(b){b.Ob=!0;b.listener=null;b.a=null;b.src=null;b.Jc=null};function Jo(b){this.src=b;this.listeners={};this.a=0}function Ko(b,c,d,e,f){var g=c.toString();c=b.listeners[g];c||(c=b.listeners[g]=[],b.a++);var h=Lo(c,d,e,f);-1<h?(b=c[h],b.hb=!1):(b=new Ho(d,b.src,g,!!e,f),b.hb=!1,c.push(b));return b}Jo.prototype.remove=function(b,c,d,e){b=b.toString();if(!(b in this.listeners))return!1;var f=this.listeners[b];c=Lo(f,c,d,e);return-1<c?(Io(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete this.listeners[b],this.a--),!0):!1};
function Mo(b,c){var d=c.type;d in b.listeners&&Oa(b.listeners[d],c)&&(Io(c),0==b.listeners[d].length&&(delete b.listeners[d],b.a--))}function No(b,c,d,e,f){b=b.listeners[c.toString()];c=-1;b&&(c=Lo(b,d,e,f));return-1<c?b[c]:null}function Lo(b,c,d,e){for(var f=0;f<b.length;++f){var g=b[f];if(!g.Ob&&g.listener==c&&g.wc==!!d&&g.Jc==e)return f}return-1};var Oo="closure_lm_"+(1E6*Math.random()|0),Po={},Qo=0;
function Ro(b,c,d,e,f){if(ea(c)){for(var g=0;g<c.length;g++)Ro(b,c[g],d,e,f);return null}d=So(d);if(b&&b[Fo])b=b.Aa(c,d,e,f);else{if(!c)throw Error("Invalid event type");var g=!!e,h=To(b);h||(b[Oo]=h=new Jo(b));d=Ko(h,c,d,e,f);if(!d.a){e=Uo();d.a=e;e.src=b;e.listener=d;if(b.addEventListener)b.addEventListener(c.toString(),e,g);else if(b.attachEvent)b.attachEvent(Vo(c.toString()),e);else throw Error("addEventListener and attachEvent are unavailable.");Qo++}b=d}return b}
function Uo(){var b=Wo,c=Ao?function(d){return b.call(c.src,c.listener,d)}:function(d){d=b.call(c.src,c.listener,d);if(!d)return d};return c}function Xo(b,c,d,e,f){if(ea(c))for(var g=0;g<c.length;g++)Xo(b,c[g],d,e,f);else d=So(d),b&&b[Fo]?b.Qb(c,d,e,f):b&&(b=To(b))&&(c=No(b,c,d,!!e,f))&&Yo(c)}
function Yo(b){if(!ha(b)&&b&&!b.Ob){var c=b.src;if(c&&c[Fo])Mo(c.g,b);else{var d=b.type,e=b.a;c.removeEventListener?c.removeEventListener(d,e,b.wc):c.detachEvent&&c.detachEvent(Vo(d),e);Qo--;(d=To(c))?(Mo(d,b),0==d.a&&(d.src=null,c[Oo]=null)):Io(b)}}}function Vo(b){return b in Po?Po[b]:Po[b]="on"+b}function Zo(b,c,d,e){var f=!0;if(b=To(b))if(c=b.listeners[c.toString()])for(c=c.concat(),b=0;b<c.length;b++){var g=c[b];g&&g.wc==d&&!g.Ob&&(g=$o(g,e),f=f&&!1!==g)}return f}
function $o(b,c){var d=b.listener,e=b.Jc||b.src;b.hb&&Yo(b);return d.call(e,c)}
function Wo(b,c){if(b.Ob)return!0;if(!Ao){var d;if(!(d=c))a:{d=["window","event"];for(var e=t,f;f=d.shift();)if(null!=e[f])e=e[f];else{d=null;break a}d=e}f=d;d=new Do(f,this);e=!0;if(!(0>f.keyCode||void 0!=f.returnValue)){a:{var g=!1;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(l){g=!0}if(g||void 0==f.returnValue)f.returnValue=!0}f=[];for(g=d.a;g;g=g.parentNode)f.push(g);for(var g=b.type,h=f.length-1;!d.f&&0<=h;h--){d.a=f[h];var k=Zo(f[h],g,!0,d),e=e&&k}for(h=0;!d.f&&h<f.length;h++)d.a=f[h],k=Zo(f[h],
g,!1,d),e=e&&k}return e}return $o(b,new Do(c,this))}function To(b){b=b[Oo];return b instanceof Jo?b:null}var ap="__closure_events_fn_"+(1E9*Math.random()>>>0);function So(b){if(ia(b))return b;b[ap]||(b[ap]=function(c){return b.handleEvent(c)});return b[ap]};function bp(b){b=void 0!==b?b:{};this.g=null;var c;b.element?(c=b.element,delete b.element):c=$("<div />")[0];this.l=$("<button>",{"class":"close",html:"&times;"});this.v=$("<div/>").append(this.l).append(c);b.element=$("<div />")[0];wo.call(this,b)}y(bp,wo);
bp.prototype.setMap=function(b){var c=this.get("element");this.get("map")&&(this.g&&(Yo(this.g),this.g=null),$(c).popover("destroy"));bp.U.setMap.call(this,b);if(b){var d=this.v;window.setTimeout(function(){$(c).popover({content:d,html:!0,placement:"top",template:'<div class="popover ngeo-popover" role="tooltip">  <div class="arrow"></div>  <h3 class="popover-title"></h3>  <div class="popover-content"></div></div>'}).popover("show")},0);this.g=Ro(this.l[0],"click",this.A,!1,this)}};
bp.prototype.setMap=bp.prototype.setMap;bp.prototype.A=function(){var b=this.get("map");b&&b.c.remove(this)};function cp(){};function dp(){}y(dp,cp);dp.prototype.Oa=function(){var b=0;lk(this.zb(!0),function(){b++});return b};dp.prototype.clear=function(){var b=mk(this.zb(!0)),c=this;Ka(b,function(b){c.remove(b)})};function ep(b){this.a=b}y(ep,dp);function fp(b){if(!b.a)return!1;try{return b.a.setItem("__sak","1"),b.a.removeItem("__sak"),!0}catch(c){return!1}}m=ep.prototype;m.set=function(b,c){try{this.a.setItem(b,c)}catch(d){if(0==this.a.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded";}};m.get=function(b){b=this.a.getItem(b);if(!ga(b)&&null!==b)throw"Storage mechanism: Invalid value was encountered";return b};m.remove=function(b){this.a.removeItem(b)};m.Oa=function(){return this.a.length};
m.zb=function(b){var c=0,d=this.a,e=new jk;e.next=function(){if(c>=d.length)throw ik;var e=d.key(c++);if(b)return e;e=d.getItem(e);if(!ga(e))throw"Storage mechanism: Invalid value was encountered";return e};return e};m.clear=function(){this.a.clear()};m.key=function(b){return this.a.key(b)};function gp(){var b=null;try{b=window.localStorage||null}catch(c){}this.a=b}y(gp,ep);function hp(b,c){this.f=this.j=this.c="";this.u=null;this.g=this.a="";this.i=!1;var d;b instanceof hp?(this.i=ba(c)?c:b.i,ip(this,b.c),this.j=b.j,this.f=b.f,jp(this,b.u),this.a=b.a,kp(this,b.b.clone()),this.g=b.g):b&&(d=String(b).match(rf))?(this.i=!!c,ip(this,d[1]||"",!0),this.j=lp(d[2]||""),this.f=lp(d[3]||"",!0),jp(this,d[4]),this.a=lp(d[5]||"",!0),kp(this,d[6]||"",!0),this.g=lp(d[7]||"")):(this.i=!!c,this.b=new mp(null,0,this.i))}
hp.prototype.toString=function(){var b=[],c=this.c;c&&b.push(np(c,op,!0),":");var d=this.f;if(d||"file"==c)b.push("//"),(c=this.j)&&b.push(np(c,op,!0),"@"),b.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,null!=d&&b.push(":",String(d));if(d=this.a)this.f&&"/"!=d.charAt(0)&&b.push("/"),b.push(np(d,"/"==d.charAt(0)?pp:qp,!0));(d=this.b.toString())&&b.push("?",d);(d=this.g)&&b.push("#",np(d,rp));return b.join("")};
hp.prototype.resolve=function(b){var c=this.clone(),d=!!b.c;d?ip(c,b.c):d=!!b.j;d?c.j=b.j:d=!!b.f;d?c.f=b.f:d=null!=b.u;var e=b.a;if(d)jp(c,b.u);else if(d=!!b.a){if("/"!=e.charAt(0))if(this.f&&!this.a)e="/"+e;else{var f=c.a.lastIndexOf("/");-1!=f&&(e=c.a.substr(0,f+1)+e)}f=e;if(".."==f||"."==f)e="";else if(-1!=f.indexOf("./")||-1!=f.indexOf("/.")){for(var e=0==f.lastIndexOf("/",0),f=f.split("/"),g=[],h=0;h<f.length;){var k=f[h++];"."==k?e&&h==f.length&&g.push(""):".."==k?((1<g.length||1==g.length&&
""!=g[0])&&g.pop(),e&&h==f.length&&g.push("")):(g.push(k),e=!0)}e=g.join("/")}else e=f}d?c.a=e:d=""!==b.b.toString();d?kp(c,lp(b.b.toString())):d=!!b.g;d&&(c.g=b.g);return c};hp.prototype.clone=function(){return new hp(this)};function ip(b,c,d){b.c=d?lp(c,!0):c;b.c&&(b.c=b.c.replace(/:$/,""))}function jp(b,c){if(c){c=Number(c);if(isNaN(c)||0>c)throw Error("Bad port number "+c);b.u=c}else b.u=null}function kp(b,c,d){c instanceof mp?(b.b=c,sp(b.b,b.i)):(d||(c=np(c,tp)),b.b=new mp(c,0,b.i))}
function up(b){return b instanceof hp?b.clone():new hp(b,void 0)}function vp(b,c){b instanceof hp||(b=up(b));c instanceof hp||(c=up(c));return b.resolve(c)}function lp(b,c){return b?c?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function np(b,c,d){return ga(b)?(b=encodeURI(b).replace(c,wp),d&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function wp(b){b=b.charCodeAt(0);return"%"+(b>>4&15).toString(16)+(b&15).toString(16)}
var op=/[#\/\?@]/g,qp=/[\#\?:]/g,pp=/[\#\?]/g,tp=/[\#\?@]/g,rp=/#/g;function mp(b,c,d){this.b=this.a=null;this.f=b||null;this.c=!!d}function xp(b){b.a||(b.a=new nk,b.b=0,b.f&&sf(b.f,function(c,d){yp(b,decodeURIComponent(c.replace(/\+/g," ")),d)}))}m=mp.prototype;m.Oa=function(){xp(this);return this.b};function yp(b,c,d){xp(b);b.f=null;c=zp(b,c);var e=b.a.get(c);e||b.a.set(c,e=[]);e.push(d);b.b=b.b+1}
m.remove=function(b){xp(this);b=zp(this,b);return qk(this.a.b,b)?(this.f=null,this.b=this.b-this.a.get(b).length,this.a.remove(b)):!1};m.clear=function(){this.a=this.f=null;this.b=0};m.Ia=function(){xp(this);return 0==this.b};function Ap(b,c){xp(b);c=zp(b,c);return qk(b.a.b,c)}m.ya=function(){xp(this);for(var b=this.a.za(),c=this.a.ya(),d=[],e=0;e<c.length;e++)for(var f=b[e],g=0;g<f.length;g++)d.push(c[e]);return d};
m.za=function(b){xp(this);var c=[];if(ga(b))Ap(this,b)&&(c=Pa(c,this.a.get(zp(this,b))));else{b=this.a.za();for(var d=0;d<b.length;d++)c=Pa(c,b[d])}return c};m.set=function(b,c){xp(this);this.f=null;b=zp(this,b);Ap(this,b)&&(this.b=this.b-this.a.get(b).length);this.a.set(b,[c]);this.b=this.b+1;return this};m.get=function(b,c){var d=b?this.za(b):[];return 0<d.length?String(d[0]):c};
m.toString=function(){if(this.f)return this.f;if(!this.a)return"";for(var b=[],c=this.a.ya(),d=0;d<c.length;d++)for(var e=c[d],f=encodeURIComponent(String(e)),e=this.za(e),g=0;g<e.length;g++){var h=f;""!==e[g]&&(h+="="+encodeURIComponent(String(e[g])));b.push(h)}return this.f=b.join("&")};m.clone=function(){var b=new mp;b.f=this.f;this.a&&(b.a=this.a.clone(),b.b=this.b);return b};function zp(b,c){var d=String(c);b.c&&(d=d.toLowerCase());return d}
function sp(b,c){c&&!b.c&&(xp(b),b.f=null,b.a.forEach(function(b,c){var f=c.toLowerCase();c!=f&&(this.remove(c),this.remove(f),0<b.length&&(this.f=null,this.a.set(zp(this,f),Qa(b)),this.b=this.b+b.length))},b));b.c=c}m.extend=function(b){for(var c=0;c<arguments.length;c++)hk(arguments[c],function(b,c){yp(this,c,b)},this)};function Bp(b){this.a=up(b)}function Cp(b,c){var d=b.a.b;$b(c,function(b,c){d.set(c,b)})}function Dp(b,c){var d=c.history,e=new Bp(c.location),f=e.a.toString();b.$watch(function(){var c=e.a.toString();f!==c&&b.$evalAsync(function(){f=c;void 0!==d&&void 0!==d.replaceState&&d.replaceState(null,"",c);b.$broadcast("ngeoLocationChange")})});return e}Dp.$inject=["$rootScope","$window"];A.factory("ngeoLocation",Dp);function Ep(b){this.a={};this.f=b;this.b=new gp;var c=b.a.b.ya(),d;if(0===c.length||1===c.length&&"debug"==c[0]){if(fp(this.b))for(b=this.b.Oa(),c=0;c<b;++c)d=this.b.key(c),this.a[d]=this.b.get(d)}else for(var e=b.a.b.ya(),c=0;c<e.length;++c)d=e[c],this.a[d]=b.a.b.get(d);Cp(this.f,{})}Ep.$inject=["ngeoLocation"];function Fp(b,c){Cp(b.f,c);if(fp(b.b))for(var d in c)b.b.set(d,c[d])}A.service("ngeoStateManager",Ep);function Gp(b){this.l=this.c=this.g=null;this.u=void 0!==b.fill?b.fill:null;this.C=[0,0];this.a=b.points;this.f=void 0!==b.radius?b.radius:b.jk;this.i=void 0!==b.fc?b.fc:this.f;this.j=void 0!==b.angle?b.angle:0;this.b=void 0!==b.stroke?b.stroke:null;this.A=this.D=this.v=null;var c=b.zg,d="",e="",f=0,g=null,h,k=0;this.b&&(h=nh(this.b.a),k=this.b.b,void 0===k&&(k=1),g=this.b.f,vh||(g=null),e=this.b.g,void 0===e&&(e="round"),d=this.b.c,void 0===d&&(d="round"),f=this.b.i,void 0===f&&(f=10));var l=2*(this.f+
k)+1,d={strokeStyle:h,strokeWidth:k,size:l,lineCap:d,H:g,lineJoin:e,miterLimit:f};if(void 0===c){this.c=document.createElement("CANVAS");this.c.height=l;this.c.width=l;var c=l=this.c.width,n=this.c.getContext("2d");this.yf(d,n,0,0);this.u?this.l=this.c:(n=this.l=document.createElement("CANVAS"),n.height=d.size,n.width=d.size,n=n.getContext("2d"),this.xf(d,n,0,0))}else l=Math.round(l),(e=!this.u)&&(n=this.xf.bind(this,d)),f=this.b?Nh(this.b):"-",g=this.u?Gh(this.u):"-",this.g&&f==this.g[1]&&g==this.g[2]&&
this.f==this.g[3]&&this.i==this.g[4]&&this.j==this.g[5]&&this.a==this.g[6]||(this.g=["r"+f+g+(void 0!==this.f?this.f.toString():"-")+(void 0!==this.i?this.i.toString():"-")+(void 0!==this.j?this.j.toString():"-")+(void 0!==this.a?this.a.toString():"-"),f,g,this.f,this.i,this.j,this.a]),n=c.a(this.g[0],l,l,this.yf.bind(this,d),n),this.c=n.image,this.C=[n.offsetX,n.offsetY],c=n.image.width,this.l=e?n.Ih:this.c;this.v=[l/2,l/2];this.D=[l,l];this.A=[c,c];Hh.call(this,{opacity:1,qb:void 0!==b.qb?b.qb:
!1,rotation:void 0!==b.rotation?b.rotation:0,scale:1,Ua:void 0!==b.Ua?b.Ua:!0})}y(Gp,Hh);m=Gp.prototype;m.Yb=function(){return this.v};m.Wd=function(){return this.l};m.Pc=function(){return this.c};m.Jd=function(){return this.A};m.cc=function(){return 2};m.Pa=function(){return this.C};m.ob=function(){return this.D};m.Sd=Ld;m.load=Ld;m.me=Ld;
m.yf=function(b,c,d,e){var f;c.setTransform(1,0,0,1,0,0);c.translate(d,e);c.beginPath();this.i!==this.f&&(this.a*=2);for(d=0;d<=this.a;d++)e=2*d*Math.PI/this.a-Math.PI/2+this.j,f=0===d%2?this.f:this.i,c.lineTo(b.size/2+f*Math.cos(e),b.size/2+f*Math.sin(e));this.u&&(c.fillStyle=ph(this.u.a),c.fill());this.b&&(c.strokeStyle=b.strokeStyle,c.lineWidth=b.strokeWidth,b.H&&c.setLineDash(b.H),c.lineCap=b.lineCap,c.lineJoin=b.lineJoin,c.miterLimit=b.miterLimit,c.stroke());c.closePath()};
m.xf=function(b,c,d,e){c.setTransform(1,0,0,1,0,0);c.translate(d,e);c.beginPath();this.i!==this.f&&(this.a*=2);var f;for(d=0;d<=this.a;d++)f=2*d*Math.PI/this.a-Math.PI/2+this.j,e=0===d%2?this.f:this.i,c.lineTo(b.size/2+e*Math.cos(f),b.size/2+e*Math.sin(f));c.fillStyle=Bh;c.fill();this.b&&(c.strokeStyle=b.strokeStyle,c.lineWidth=b.strokeWidth,b.H&&c.setLineDash(b.H),c.stroke());c.closePath()};B.constant("gmfPermalinkOptions",{});function Hp(b,c,d,e,f){this.i=b;this.u=c;this.j=Lj(d);this.a=e;this.b=null;void 0!==f.crosshairStyle?this.g=f.crosshairStyle:this.g=[new Ph({image:new Gp({stroke:new Mh({color:"rgba(255, 255, 255, 0.8)",width:5}),points:4,radius:8,fc:0,angle:0})}),new Ph({image:new Gp({stroke:new Mh({color:"rgba(255, 0, 0, 1)",width:2}),points:4,radius:8,fc:0,angle:0})})];I(this.i,"change",this.l,this);this.c=null}
Hp.$inject=["ngeoBackgroundLayerMgr","ngeoDebounce","ngeoFeatureOverlayMgr","ngeoStateManager","gmfPermalinkOptions"];Hp.prototype.Ye=function(){var b=null,c=this.a.a.map_x,d=this.a.a.map_y;void 0!==c&&void 0!==d&&(b=[+c,+d]);return b};Hp.prototype.getMapCenter=Hp.prototype.Ye;Hp.prototype.af=function(){var b=null,c=this.a.a.map_zoom;void 0!==c&&(b=+c);return b};Hp.prototype.getMapZoom=Hp.prototype.af;Hp.prototype.Ze=function(){var b=this.a.a.map_crosshair;return"true"===b?!0:!1};
Hp.prototype.getMapCrosshair=Hp.prototype.Ze;Hp.prototype.$e=function(){return this.a.a.map_tooltip||null};Hp.prototype.getMapTooltip=Hp.prototype.$e;Hp.prototype.setMap=function(b){b!==this.b&&(this.b&&(G(this.c),this.c=null,this.f&&(this.f.setMap(null),this.f.S().clear(),this.f=null),this.b=null),b&&(Ip(this,b),this.b=b))};Hp.prototype.setMap=Hp.prototype.setMap;
function Ip(b,c){var d=U(c),e=b.Ye();null!==e&&bm(d,e);var f=b.af();null!==f&&em(d,f);b.c=I(d,"propertychange",b.u(function(){var b=Yl(d),c=$l(d),e={};e.map_x=Math.round(b[0]);e.map_y=Math.round(b[1]);e.map_zoom=c;Fp(this.a,e)}.bind(b),300,!0),b);if(b.Ze()){var g;null!==e?g=e:g=Yl(d);f=new Wh(new Bi(g));Zh(f,b.g);b.j.ia(f)}if(f=b.$e()){var h;null!==e?h=e:h=Yl(d);e=$("<div/>",{"class":"gmf-permalink-tooltip",text:f})[0];h=new bp({element:e,position:h});c.c.push(h)}}
Hp.prototype.Se=function(b){var c=null,d=this.a.a.baselayer_ref;if(void 0!==d)for(var e=0,f=b.length;e<f;e++)if(b[e].get("label")===d){c=b[e];break}return c};Hp.prototype.getBackgroundLayer=Hp.prototype.Se;Hp.prototype.l=function(){if(this.b){var b=this.i.get(this.b).get("label"),c={};c.baselayer_ref=b;Fp(this.a,c)}};B.service("gmfPermalink",Hp);A.directive("ngeoMap",function(){return{restrict:"A",link:function(b,c,d){b.$eval(d.ngeoMap).set("target",c[0])}}});B.directive("gmfMap",function(){return{scope:{getMapFn:"&gmfMapMap"},controller:"GmfMapController",controllerAs:"ctrl",template:'<div ngeo-map="ctrl.map"></div>'}});function Jp(b,c,d){this.map=b.getMapFn();c.Vd.setMap(this.map);d.setMap(this.map)}Jp.$inject=["$scope","ngeoFeatureOverlayMgr","gmfPermalink"];B.controller("GmfMapController",Jp);function Kp(){this.ua=null}y(Kp,ai);function Lp(b){return ka(b)?b:"string"===typeof b?(b=JSON.parse(b))?b:null:null}Kp.prototype.aa=function(){return"json"};Kp.prototype.Sc=function(b,c){var d;var e=Lp(b);d=bi(this,b,c);if("Feature"==e.type)d=[Mp(this,e,d)];else if("FeatureCollection"==e.type){var f=[],e=e.features,g,h;g=0;for(h=e.length;g<h;++g)f.push(Mp(this,e[g],d));d=f}else d=[];return d};
Kp.prototype.f=function(b){return(b=Lp(b).crs)?"name"==b.type?Ne(b.properties.name):"EPSG"==b.type?Ne("EPSG:"+b.properties.code):null:this.ua};function Np(b){hh.call(this);this.a=b?b:null;Op(this)}y(Np,hh);function Pp(b){var c,d;if(b.a)for(c=0,d=b.a.length;c<d;++c)cb(b.a[c],"change",b.b,b)}function Op(b){var c,d;if(b.a)for(c=0,d=b.a.length;c<d;++c)I(b.a[c],"change",b.b,b)}m=Np.prototype;m.clone=function(){var b=new Np(null),c=this.a,d=[],e,f;e=0;for(f=c.length;e<f;++e)d.push(c[e].clone());Pp(b);b.a=d;Op(b);b.b();return b};
m.yc=function(b){Jb(Infinity,Infinity,-Infinity,-Infinity,b);for(var c=this.a,d=0,e=c.length;d<e;++d)Lb(b,c[d].G());return b};m.Ld=function(b){this.l!=this.f&&(Va(this.i),this.j=0,this.l=this.f);if(0>b||0!==this.j&&b<this.j)return this;var c=b.toString();if(this.i.hasOwnProperty(c))return this.i[c];var d=[],e=this.a,f=!1,g,h;g=0;for(h=e.length;g<h;++g){var k=e[g],l=k.Ld(b);d.push(l);l!==k&&(f=!0)}if(f)return b=new Np(null),Pp(b),b.a=d,Op(b),b.b(),this.i[c]=b;this.j=b;return this};m.aa=function(){return"GeometryCollection"};
m.Ia=function(){return 0===this.a.length};m.tc=function(b){var c=this.a,d,e;d=0;for(e=c.length;d<e;++d)c[d].tc(b);this.b()};m.translate=function(b,c){var d=this.a,e,f;e=0;for(f=d.length;e<f;++e)d[e].translate(b,c);this.b()};m.L=function(){Pp(this);Np.U.L.call(this)};function Qp(b){b=b?b:{};this.ua=null;this.ua=Ne(b.ua?b.ua:"EPSG:4326");this.a=b.Qg}y(Qp,Kp);function Rp(b,c){return b?ci((0,Sp[b.type])(b),!1,c):null}
var Sp={Point:function(b){return new Bi(b.coordinates)},LineString:function(b){return new ti(b.coordinates)},Polygon:function(b){return new Ii(b.coordinates)},MultiPoint:function(b){return new Ci(b.coordinates)},MultiLineString:function(b){return new xi(b.coordinates)},MultiPolygon:function(b){return new Li(b.coordinates)},GeometryCollection:function(b,c){var d=b.geometries.map(function(b){return Rp(b,c)});return new Np(d)}};
function Mp(b,c,d){d=Rp(c.geometry,d);var e=new Wh;b.a&&Yh(e,b.a);Xh(e,d);void 0!==c.id&&(e.c=c.id,e.b());c.properties&&e.ka(c.properties);return e};A.value("ngeoCreateGeoJSONBloodhound",function(b,c,d,e,f,g){var h=new Qp;b={remote:{url:b,rateLimitWait:50,prepare:function(b,c){c.url=c.url.replace("%QUERY",b);return c},transform:function(b){void 0!==c&&(b={type:"FeatureCollection",features:b.features.filter(c)});return h.Sc(b,{Fb:d,ib:e})}},datumTokenizer:ca,queryTokenizer:Bloodhound.tokenizers.whitespace};f&&ec(b,f);g&&ec(b.remote,g);return new Bloodhound(b)});function Tp(){return{restrict:"A",link:function(b,c,d){var e=b.$eval(d.ngeoSearch),f=b.$eval(d.ngeoSearchDatasets).slice();f.unshift(e);c.typeahead.apply(c,f);d=b.$eval(d.ngeoSearchListeners);var g=Tp.a(d);c.on("typeahead:open",function(){b.$apply(function(){g.open()})});c.on("typeahead:close",function(){b.$apply(function(){g.close()})});c.on("typeahead:cursorchange",function(c,d,e){b.$apply(function(){g.cursorchange(c,d,e)})});c.on("typeahead:select",function(c,d,e){b.$apply(function(){g.select(c,
d,e)})});c.on("typeahead:autocomplete",function(c,d,e){b.$apply(function(){g.autocomplete(c,d,e)})})}}}Tp.a=function(b){var c;void 0===b?c={open:ca,close:ca,cursorchange:ca,select:ca,autocomplete:ca}:c={open:void 0!==b.open?b.open:ca,close:void 0!==b.close?b.close:ca,cursorchange:void 0!==b.cursorchange?b.cursorchange:ca,select:void 0!==b.select?b.select:ca,autocomplete:void 0!==b.autocomplete?b.autocomplete:ca};return c};A.directive("ngeoSearch",Tp);B.value("gmfSearchTemplateUrl",function(b,c){var d=c.gmfSearchTemplateurl;return void 0!==d?d:"gmf/search.html"});function Up(b){return{restrict:"E",scope:{getMapFn:"&gmfSearchMap",getDatasourcesFn:"&gmfSearchDatasources",clearbutton:"=gmfSearchClearbutton",currentTheme:"=gmfSearchCurrenttheme"},controller:"GmfSearchController",controllerAs:"ctrl",templateUrl:b,link:function(b,d){if(!b.clearbutton){var e=b.ctrl;d.find("input").on("focus blur",function(){e.clear()})}}}}Up.$inject=["gmfSearchTemplateUrl"];
B.directive("gmfSearch",Up);
function Vp(b,c,d,e,f,g,h){this.a=b;this.g=c;this.l=d;this.i=e;this.j=h;this.u=f;this.f=this.a.getMapFn();this.clearButton=this.a.clearbutton||!1;this.b=Lj(g);this.c=this.a.getDatasourcesFn();this.options={highlight:!0,hint:void 0,minLength:void 0};this.datasets=[];this.input_value="";for(b=0;b<this.c.length;b++){var k=this.c[b];c=void 0!==k.groupValues?k.groupValues:[];d=k.groupActions?k.groupActions:[];var l=[];0===c.length?l.push({title:void 0,filter:void 0}):(c.forEach(function(b){l.push({title:b,filter:Wp(b)})},
this),d.forEach(function(b){l.push({title:b,filter:Xp(b)})},this));l.forEach(function(b){this.datasets.push(Yp(this,{bloodhoundOptions:k.bloodhoundOptions,Re:b.title,fk:"layer_name",labelKey:k.labelKey,projection:k.projection,typeaheadDatasetOptions:k.typeaheadDatasetOptions,url:k.url},b.filter))},this)}this.listeners={select:Zp.bind(this),close:$p.bind(this)}}sa("gmf.SearchController",Vp);Vp.$inject="$scope $compile $timeout gettextCatalog ngeoCreateGeoJSONBloodhound ngeoFeatureOverlayMgr gmfThemes".split(" ");
function Yp(b,c,d){var e=b.a,f=b.g;b=aq(b,c,d);b={limit:Infinity,source:b.ttAdapter(),display:function(b){return b.get(c.labelKey)},templates:{header:function(){return void 0===c.Re?"":'<div class="search-header">'+c.Re+"</div>"},suggestion:function(b){var d=e.$new(!0);d.feature=b;var k='<p class="search-label">'+b.get(c.labelKey)+"</p>",k=k+('<p class="search-group">'+b.get("layer_name")+"</p>");return f('<div class="search-datum">'+k+"</div>")(d)}}};c.typeaheadDatasetOptions&&ec(b,c.typeaheadDatasetOptions);
return b}function Xp(b){return function(c){c=c.properties;return c.actions?!c.layer_name&&c.actions.some(function(c){return c.action===b}):!1}}function Wp(b){return function(c){return c.properties.layer_name===b}}function aq(b,c,d){var e=Re(U(b.f).X()),f=bq(b);b=b.u(c.url,d,Ne(e),Ne(c.projection),c.bloodhoundOptions,f);b.initialize();return b}
function bq(b){var c=b.i;return{prepare:function(b,e){var f=e.url,g=c.currentLanguage,f=Bf(f,"query",b),f=Bf(f,"lang",g),f=Bf(f,"interface","mobile");e.xhrFields={withCredentials:!0};e.url=f;return e}}}function cq(b){if(b.clearButton){var c=$(".twitter-typeahead .tt-menu");b.input_value?c.show():c.hide()}}function dq(b,c){b.j.Gc().then(function(b){(b=ah(b,c))&&(this.a.currentTheme=b)}.bind(b))}Vp.prototype.zi=function(){this.b.clear();this.clear()};Vp.prototype.onClearButton=Vp.prototype.zi;
Vp.prototype.clear=function(){var b=$(".twitter-typeahead"),c=b.children(".tt-menu"),b=b.children("input");this.input_value="";$(b[1]).typeahead("val","");c.children(".tt-dataset").empty();cq(this)};Vp.prototype.clear=Vp.prototype.clear;Vp.prototype.blur=function(){var b=$(".twitter-typeahead").children("input");this.l(function(){$(b[1]).blur()})};Vp.prototype.blur=Vp.prototype.blur;
function Zp(b,c){var d=c.get("actions");if(d)for(var e=0,f=d.length;e<f;e++){var g=d[e],h=g.data;"add_theme"==g.action&&dq(this,h)}d=c.J();null!=d&&(this.b.clear(),this.b.ia(c),d="GeometryCollection"===d.aa()?d.G():d,e=Rm(this.f),am(U(this.f),d,e,{Ra:16}),this.clearButton||this.clear());this.blur()}function $p(){this.clearButton||cq(this)}B.controller("GmfSearchController",Vp);B.directive("gmfThemeselector",function(){return{restrict:"E",controller:"gmfThemeselectorController",scope:{defaultTheme:"@gmfThemeselectorDefaulttheme",currentTheme:"=gmfThemeselectorCurrenttheme",filter:"=gmfThemeselectorFilter"},bindToController:!0,controllerAs:"tsCtrl",templateUrl:"gmf/themeselector.html"}});
function eq(b,c,d){b.$watch(function(){return this.currentTheme}.bind(this),function(b){if(b){b=b.name;var c=this.a.a.a.split("/");""===c[c.length-1]&&c.splice(c.length-1);fq(c)?c[c.length-1]=b:c.push("theme",b);this.a.a.a=c.join("/")}}.bind(this));this.defaultTheme=this.defaultTheme||"main";this.a=c;this.b=d;gq(this)}sa("gmf.ThemeselectorController",eq);eq.$inject=["$scope","ngeoLocation","gmfThemes"];function fq(b){return 0<=b.indexOf("theme")&&b.indexOf("theme")==b.length-2}
function gq(b){var c=function(b){this.themes=this.filter?b.filter(this.filter):b;var c=this.defaultTheme;b=this.a.a.a.split("/");fq(b)&&(c=b[b.length-1]);b=Ma(this.themes,function(b){return b.name===c});this.Tf(b)}.bind(b);b.b.Gc().then(c)}eq.prototype.Tf=function(b){b&&(this.currentTheme=b)};eq.prototype.switchTheme=eq.prototype.Tf;B.controller("gmfThemeselectorController",eq);function hq(b){return function(c){var d=b.navigator,d=d.languages||d.language||d.browserLanguage||d.systemLanguage||d.userLanguage;ea(d)||(d=[d]);d=d.map(function(b){return b.substring(0,2)});d=d.filter(function(b,c,d){return d.indexOf(b)==c});return d.filter(function(b){return-1!=c.indexOf(b)})[0]}}hq.$inject=["$window"];A.factory("ngeoGetBrowserLanguage",hq);function iq(b,c){this.getActive=function(){return b[c]};this.setActive=function(d){b[c]=d}}A.value("ngeoToolActivate",iq);function jq(b){this.a={};this.b=b}jq.$inject=["$rootScope"];
function kq(b,c,d){var e=b.a.mapTools;e||(e=b.a.mapTools=[]);b=b.b.$watch(c.getActive,function(b,d){if(b!==d)if(b)for(var e=this.a.mapTools,k=0;k<e.length;k++)c!=e[k].lc&&e[k].lc.setActive(!1);else{for(var e=this.a.mapTools,k=null,l=!1,n=0;n<e.length;n++)l=l||e[n].lc.getActive(),e[n].Jg&&(k=e[n].lc);l||null===k||k.setActive(!0)}}.bind(b));e.push({lc:c,Jg:d||!1,Qb:b})}jq.prototype.zj=function(b,c){var d=this.a[b];if(d)for(var e=0;e<d.length;e++)if(d[e].lc==c){d[e].Qb();d.splice(e,1);break}};
jq.prototype.unregisterTool=jq.prototype.zj;jq.prototype.yj=function(b){var c=this.a[b];if(c){for(var d=0;d<c.length;d++)c[d].Qb();delete this.a[b]}};jq.prototype.unregisterGroup=jq.prototype.yj;jq.prototype.xg=function(b){b.setActive(!0)};jq.prototype.activateTool=jq.prototype.xg;jq.prototype.Ig=function(b){b.setActive(!1)};jq.prototype.deactivateTool=jq.prototype.Ig;A.service("ngeoToolActivateMgr",jq);function lq(b,c,d){d.get("gmfThemes").jf();this.searchDatasources=[{labelKey:"label",groupValues:d.get("gmfSearchGroups"),groupActions:d.get("gmfSearchActions"),projection:"EPSG:"+(b.srid||21781),url:d.get("fulltextsearchUrl")}];this.rightNavVisible=this.leftNavVisible=!1;this.queryActive=!0;d.get("gmfQueryManager");this.measureLengthActive=this.measurePointActive=!1;this.i=d.get("ngeoGetBrowserLanguage");this.f=d.get("ngeoStateManager");this.c=c;this.g=d.get("defaultLang");this.a=d.get("langUrls");
this.b=d.get("gettextCatalog");mq(this);d.get("ngeoFeatureOverlayMgr").Vd.setMap(this.map);b=d.get("ngeoToolActivateMgr");kq(b,new iq(this,"queryActive"),!0);kq(b,new iq(this,"measurePointActive"),!1);kq(b,new iq(this,"measureLengthActive"),!1)}sa("gmf.AbstractController",lq);lq.$inject=["config","$scope","$injector"];lq.prototype.Zc=function(b){this.b.setCurrentLanguage(b);this.b.loadRemote(this.a[b]);this.lang=b};lq.prototype.switchLanguage=lq.prototype.Zc;
function mq(b){b.c.$watch(function(){return this.lang}.bind(b),function(b){Fp(this.f,{lang:b})}.bind(b));var c=b.i(Object.keys(b.a)),d=b.f.a.lang;void 0!==d&&d in b.a?b.Zc(d):void 0!==c&&c in b.a?b.Zc(c):b.Zc(b.g)}B.controller("AbstractController",lq);B.value("gmfMobileBackgroundlayerselectorTemplateUrl",function(b,c){var d=c.gmfMobileBackgroundlayerselectorTemplateurl;return void 0!==d?d:"gmf/mobilebackgroundlayerselector.html"});function nq(b){return{restrict:"E",scope:{map:"=gmfMobileBackgroundlayerselectorMap",select:"&?gmfMobileBackgroundlayerselectorSelect"},bindToController:!0,controller:"GmfMobileBackgroundlayerselectorController",controllerAs:"ctrl",templateUrl:b}}nq.$inject=["gmfMobileBackgroundlayerselectorTemplateUrl"];
B.directive("gmfMobileBackgroundlayerselector",nq);function oq(b,c,d){this.pd=b;this.a=c;b=function(b){this.bgLayers=b;(b=this.a.Se(b))||(b=void 0!==this.bgLayers[1]?this.bgLayers[1]:this.bgLayers[0]);this.Pf(b,!0)}.bind(this);bh(d).then(b);I(this.pd,"change",function(){this.bgLayer=this.pd.get(this.map)},this)}sa("gmf.MobileBackgroundlayerselectorController",oq);oq.$inject=["ngeoBackgroundLayerMgr","gmfPermalink","gmfThemes"];B.controller("GmfMobileBackgroundlayerselectorController",oq);
oq.prototype.Pf=function(b,c){this.bgLayer=b;this.pd.set(this.map,b);!c&&this.select&&this.select()};oq.prototype.setLayer=oq.prototype.Pf;function pq(b){return{restrict:"A",controller:"ngeoBtnGroupController",link:function(c,d,e,f){var g=b(e.ngeoBtnGroupActive).assign;g&&c.$watch(function(){return f.vc.some(function(b){return!0===b(c)})},function(b){g(c,b)})}}}pq.$inject=["$parse"];A.directive("ngeoBtnGroup",pq);function qq(b){this.vc=[];this.a=b}qq.$inject=["$scope"];function rq(b,c){b.vc.forEach(function(b,e){e!=c&&b.assign(this.a,!1)},b)}function sq(b,c){b.vc.push(c);return b.vc.length-1}A.controller("ngeoBtnGroupController",qq);
function tq(b){return{require:["?^ngeoBtnGroup","ngModel"],restrict:"A",link:function(c,d,e,f){var g=f[0],h=f[1],k=-1;e=b(e.ngModel);f=e.assign;void 0===e(c)&&f(c,!1);null!==g&&(k=sq(g,e));d.bind("click",function(){c.$apply(function(){h.$setViewValue(!h.$viewValue);h.$render()})});h.$render=function(){h.$viewValue&&null!==g&&rq(g,k);d.toggleClass("active",h.$viewValue)}}}}tq.$inject=["$parse"];A.directive("ngeoBtn",tq);function uq(b,c,d){db.call(this);this.a=null;this.c=!1;this.j=b;this.i=d;this.b=c||window;this.f=pa(this.g,this)}y(uq,db);uq.prototype.start=function(){vq(this);this.c=!1;var b=wq(this),c=xq(this);b&&!c&&this.b.mozRequestAnimationFrame?(this.a=Ro(this.b,"MozBeforePaint",this.f),this.b.mozRequestAnimationFrame(null),this.c=!0):this.a=b&&c?b.call(this.b,this.f):this.b.setTimeout(fh(this.f),20)};
function vq(b){if(null!=b.a){var c=wq(b),d=xq(b);c&&!d&&b.b.mozRequestAnimationFrame?Yo(b.a):c&&d?d.call(b.b,b.a):b.b.clearTimeout(b.a)}b.a=null}uq.prototype.g=function(){this.c&&this.a&&Yo(this.a);this.a=null;this.j.call(this.i,ra())};uq.prototype.L=function(){vq(this);uq.U.L.call(this)};function wq(b){b=b.b;return b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.oRequestAnimationFrame||b.msRequestAnimationFrame||null}
function xq(b){b=b.b;return b.cancelAnimationFrame||b.cancelRequestAnimationFrame||b.webkitCancelRequestAnimationFrame||b.mozCancelRequestAnimationFrame||b.oCancelRequestAnimationFrame||b.msCancelRequestAnimationFrame||null};function yq(b){return{restrict:"A",link:function(c,d,e){var f=c.$eval(e.ngeoResizemap);d=e.ngeoResizemapState;var g,h=new uq(function(){f.ne();f.gb&&t.cancelAnimationFrame(f.gb);f.He();1E3>ra()-g&&h.start()},b);c.$watch(d,function(b,c){b!=c&&(g=ra(),vq(h),h.start())})}}}yq.$inject=["$window","$animate"];A.directive("ngeoResizemap",yq);function zq(b){b=b?b:{};var c=void 0!==b.className?b.className:"ol-scale-line";this.g=document.createElement("DIV");this.g.className=c+"-inner";this.a=document.createElement("DIV");this.a.className=c+" ol-unselectable";this.a.appendChild(this.g);this.s=null;this.l=void 0!==b.minWidth?b.minWidth:64;this.c=!1;this.C=void 0;this.v="";fm.call(this,{element:this.a,render:b.render?b.render:Aq,target:b.target});I(this,L("units"),this.D,this);this.set("units",b.units||"metric")}y(zq,fm);var Bq=[1,2,5];
function Aq(b){(b=b.frameState)?this.s=b.M:this.s=null;Cq(this)}zq.prototype.D=function(){Cq(this)};
function Cq(b){var c=b.s;if(c){var d=c.projection,e=Se(d),c=d.lb(c.resolution,c.center)*e,e=b.l*c,d="",f=b.get("units");"degrees"==f?(d=Je.degrees,c/=d,e<d/60?(d="\u2033",c*=3600):e<d?(d="\u2032",c*=60):d="\u00b0"):"imperial"==f?.9144>e?(d="in",c/=.0254):1609.344>e?(d="ft",c/=.3048):(d="mi",c/=1609.344):"nautical"==f?(c/=1852,d="nm"):"metric"==f?1>e?(d="mm",c*=1E3):1E3>e?d="m":(d="km",c/=1E3):"us"==f&&(.9144>e?(d="in",c*=39.37):1609.344>e?(d="ft",c/=.30480061):(d="mi",c/=1609.3472));for(var f=3*Math.floor(Math.log(b.l*
c)/Math.log(10)),g;;){g=Bq[(f%3+3)%3]*Math.pow(10,Math.floor(f/3));e=Math.round(g/c);if(isNaN(e)){Zj(b.a,!1);b.c=!1;return}if(e>=b.l)break;++f}c=g+" "+d;b.v!=c&&(b.g.innerHTML=c,b.v=c);b.C!=e&&(b.g.style.width=e+"px",b.C=e);b.c||(Zj(b.a,!0),b.c=!0)}else b.c&&(Zj(b.a,!1),b.c=!1)};B.constant("isDesktop",!0);function Dq(b,c,d){var e={projection:Ne("epsg:"+(b.srid||21781))};ec(e,b.mapViewConfig||{});this.map=new to({layers:[],view:new Xl(e),controls:b.mapControls||[new zq,new qm],mb:b.mapInteractions||rn({Xd:!1,Ge:!1})});this.toolsActive=!1;$('[data-toggle="tooltip"]').tooltip({container:"body"});lq.call(this,b,c,d)}y(Dq,lq);sa("gmf.AbstractDesktopController",Dq);Dq.$inject=["config","$scope","$injector"];B.controller("AbstractDesktopController",Dq);B.value("gmfUser",{functionalities:null,is_password_changed:null,role_id:null,role_name:null,username:null});function Eq(b,c,d){ib.call(this);this.b=b;this.a=c;this.f=d;b=Cf(this.a,"loginuser");this.b.get(b,{withCredentials:!0}).then(this.c.bind(this))}y(Eq,ib);Eq.$inject=["$http","authenticationBaseUrl","gmfUser"];
Eq.prototype.xc=function(b,c,d){var e=Cf(this.a,"loginchange");return this.b.post(e,$.param({oldPassword:b,newPassword:c,confirmNewPassword:d}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0})};Eq.prototype.changePassword=Eq.prototype.xc;Eq.prototype.Lc=function(b,c){var d=Cf(this.a,"login");return this.b.post(d,$.param({login:b,password:c}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then(this.c.bind(this))};
Eq.prototype.login=Eq.prototype.Lc;Eq.prototype.Mc=function(){var b=Cf(this.a,"logout");return this.b.get(b,{withCredentials:!0}).then(this.g.bind(this))};Eq.prototype.logout=Eq.prototype.Mc;Eq.prototype.Wc=function(b){var c=Cf(this.a,"loginresetpassword"),d=function(b){return b.data}.bind(this);return this.b.post(c,$.param({login:b}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(d)};Eq.prototype.resetPassword=Eq.prototype.Wc;
Eq.prototype.c=function(b){var c=b.data;if(void 0!==c.username)for(var d in c)this.f[d]=c[d];return b};Eq.prototype.g=function(){for(var b in this.f)this.f[b]=null};B.service("gmfAuthentication",Eq);function Fq(){return{template:'<div class="modal fade" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"><ng-transclude></ng-transclude></div></div></div>',restrict:"E",require:"ngModel",transclude:!0,link:function(b,c,d,e){var f=c.children();angular.element(document.body).append(f);e.$render=function(){f.modal(e.$viewValue?"show":"hide")};f.on("shown.bs.modal hidden.bs.modal",function(c){var d=c.type;b.$apply(function(){e.$setViewValue("shown"==d)})})}}}
Fq.$inject=["$parse"];A.directive("ngeoModal",Fq);B.value("gmfAuthenticationTemplateUrl",function(b,c){var d=c.gmfAuthenticationTemplateurl;return void 0!==d?d:"gmf/authentication.html"});function Gq(b){return{scope:{},controller:"GmfAuthenticationController",controllerAs:"authCtrl",templateUrl:b}}Gq.$inject=["gmfAuthenticationTemplateUrl"];B.directive("gmfAuthentication",Gq);
function Hq(b,c,d,e){this.gmfUser=e;this.b=b;this.f=d;this.resetPasswordModalShown=this.changePasswordModalShown=this.changingPassword=!1;this.newPwdConfVal=this.newPwdVal=this.oldPwdVal=this.pwdVal=this.loginVal=this.error=""}Hq.$inject=["gettextCatalog","$scope","gmfAuthentication","gmfUser"];
Hq.prototype.xc=function(){var b=this.oldPwdVal,c=this.newPwdVal,d=this.newPwdConfVal;if(b===c)this.a(this.b.getString("The old and new passwords are the same."));else if(c!==d)this.a(this.b.getString("The passwords don't match."));else{var e=this.b.getString("Could not change password.");this.f.xc(b,c,d).then(function(){this.changePasswordModalShown=!0;this.Me()}.bind(this),this.a.bind(this,e))}};Hq.prototype.changePassword=Hq.prototype.xc;
Hq.prototype.Lc=function(){var b=this.b.getString("Could not connect.");this.f.Lc(this.loginVal,this.pwdVal).then(this.c.bind(this),this.a.bind(this,b))};Hq.prototype.login=Hq.prototype.Lc;Hq.prototype.Mc=function(){var b=this.b.getString("Could not log out.");this.f.Mc().then(this.c.bind(this),this.a.bind(this,b))};Hq.prototype.logout=Hq.prototype.Mc;
Hq.prototype.Wc=function(){if(this.loginVal){var b=this.b.getString("An error occured while reseting the password."),c=function(){this.resetPasswordModalShown=!0;this.c()}.bind(this);this.f.Wc(this.loginVal).then(c,this.a.bind(this,b))}else this.a(this.b.getString("Please, input a login..."))};Hq.prototype.resetPassword=Hq.prototype.Wc;Hq.prototype.Me=function(){this.c();this.changingPassword=!1;this.newPwdConfVal=this.newPwdVal=this.oldPwdVal=""};Hq.prototype.changePasswordReset=Hq.prototype.Me;
Hq.prototype.a=function(b){this.error=b};Hq.prototype.c=function(){this.a("")};B.controller("GmfAuthenticationController",Hq);if("function"==typeof proj4){var Iq=[42E4,3E4,9E5,35E4];proj4.defs("epsg:21781","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.4,15.1,405.3,0,0,0,0 +units=m +no_defs");proj4.defs("EPSG:21781","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.4,15.1,405.3,0,0,0,0 +units=m +no_defs");Te(Ne("epsg:21781"),Iq);Te(Ne("EPSG:21781"),Iq)};ta.constant("authenticationBaseUrl","https://geomapfish-demo.camptocamp.net/2.0/wsgi");ta.constant("ngeoQueryOptions",{limit:20});function Jq(b,c){Dq.call(this,{srid:21781,mapViewConfig:{center:[632464,185457],Fa:3,zoom:3}},b,c)}y(Jq,Dq);sa("app.DesktopController",Jq);Jq.$inject=["$scope","$injector"];ta.controller("DesktopController",Jq);A.value("gmfMobiledisplayqueriesTemplateUrl",function(b,c){var d=c.gmfMobiledisplayqueriesTemplateurl;return void 0!==d?d:"gmf/mobiledisplayqueries.html"});function Kq(b){return{bindToController:!0,controller:"GmfMobiledisplayqueriesController",controllerAs:"ctrl",templateUrl:b,replace:!0,restrict:"E",scope:{featuresStyleFn:"&gmfMobiledisplayqueriesFeaturesstyle",selectedFeatureStyleFn:"&gmfMobiledisplayqueriesSelectedfeaturestyle"}}}Kq.$inject=["gmfMobiledisplayqueriesTemplateUrl"];
B.directive("gmfMobiledisplayqueries",Kq);
function Lq(b,c,d){this.c=b;this.b=c;this.a=new pb;b=Lj(d);var e=this.featuresStyleFn();void 0!==e&&Oj(b,e);Nj(b,this.a);this.f=Lj(d);d=this.selectedFeatureStyleFn();void 0===d&&(d=new Fh({color:[255,0,0,.6]}),b=new Mh({color:[255,0,0,1],width:2}),d=new Ph({fill:d,image:new Oh({fill:d,radius:5,stroke:b}),stroke:b}));Oj(this.f,d);this.feature=this.source=null;this.currentResult=-1;this.isNext=!0;this.animate=0;this.open=!1;this.c.$watchCollection(function(){return c},function(b,c){0<b.total?this.show():
c!==b&&this.close()}.bind(this))}sa("gmf.MobiledisplayqueriesController",Lq);Lq.$inject=["$scope","ngeoQueryResult","ngeoFeatureOverlayMgr"];Lq.prototype.show=function(){this.clear();Mq(this,0,!1);if(null!==this.source){var b,c,d,e=this.b.Yc;this.a.clear();for(b=0;b<e.length;b++)for(d=e[b].features,c=0;c<d.length;c++)this.a.push(d[c]);Nq(this);this.open=!0}};Lq.prototype.show=Lq.prototype.show;
function Mq(b,c,d){var e=!1;if(c!==b.currentResult){var f,g,h,k=b.feature,l=b.b.Yc;b.currentResult=c;for(f=0;f<l.length;f++)if(g=l[f],h=g.features,c>=h.length)c-=h.length;else{b.source=g;b.feature=g.features[c];e=!0;break}d&&Nq(b,k)}return e}Lq.prototype.previous=function(){var b=this.currentResult-1;0>b&&(b=this.b.total-1);Mq(this,b,!0)&&Oq(this,!1)};Lq.prototype.previous=Lq.prototype.previous;
Lq.prototype.next=function(){var b=this.currentResult+1;b>this.b.total-1&&(b=0);Mq(this,b,!0)&&Oq(this,!0)};Lq.prototype.next=Lq.prototype.next;Lq.prototype.Xg=function(){return this.b.total};Lq.prototype.getResultLength=Lq.prototype.Xg;Lq.prototype.Sg=function(){return null!=this.feature?Ua({},this.feature.u):null};Lq.prototype.getFeatureValues=Lq.prototype.Sg;function Oq(b,c){b.isNext=c;b.c.$evalAsync(function(){this.animate++}.bind(b))}
function Nq(b,c){b.f.clear();b.a.remove(b.feature);b.f.ia(b.feature);void 0!==c&&b.a.push(c)}Lq.prototype.close=function(){this.open=!1;this.clear()};Lq.prototype.close=Lq.prototype.close;Lq.prototype.clear=function(){this.source=this.feature=null;this.currentResult=-1;this.a.clear();this.f.clear()};Lq.prototype.clear=Lq.prototype.clear;B.controller("GmfMobiledisplayqueriesController",Lq);A.value("ngeoDecorateInteraction",function(b){Object.defineProperty(b,"active",{get:function(){return b.getActive()},set:function(c){b.setActive(c)}})});function Pq(b,c,d){gi.call(this);Qq(this,b,c?c:0,d)}y(Pq,gi);Pq.prototype.clone=function(){var b=new Pq(null),c=this.o.slice();ii(b,this.layout,c);b.b();return b};Pq.prototype.yc=function(b){var c=this.o,d=c[this.a]-c[0];return Jb(c[0]-d,c[1]-d,c[0]+d,c[1]+d,b)};Pq.prototype.aa=function(){return"Circle"};function Qq(b,c,d,e){if(c){ji(b,e,c,0);b.o||(b.o=[]);e=b.o;c=ki(e,c);e[c++]=e[0]+d;var f;d=1;for(f=b.a;d<f;++d)e[c++]=e[d];e.length=c}else ii(b,"XY",null);b.b()};function Rq(b,c){Sa.call(this,b);this.feature=c}y(Rq,Sa);
function Sq(b){Fm.call(this,{$a:Tq,handleEvent:Uq,ab:Vq});this.qa=null;this.I=!1;this.Ma=b.source?b.source:null;this.Da=b.features?b.features:null;this.kg=b.kj?b.kj:12;this.O=b.type;this.c=Wq(this.O);this.La=b.minPoints?b.minPoints:this.c===Xq?3:2;this.sa=b.Yh?b.Yh:Infinity;var c=b.ek;if(!c)if("Circle"===this.O)c=function(b,c){var d=c?c:new Pq([NaN,NaN]),h=b[0],k=b[1],l=h[0]-k[0],h=h[1]-k[1];Qq(d,b[0],Math.sqrt(l*l+h*h));return d};else{var d,c=this.c;c===Yq?d=Bi:c===Zq?d=ti:c===Xq&&(d=Ii);c=function(b,
c){var g=c;g?g.Y(b):g=new d(b);return g}}this.C=c;this.D=this.v=this.a=this.s=this.j=this.l=null;this.jg=b.Pe?b.Pe*b.Pe:36;this.ha=new qj({source:new Bj({mc:!1,wrapX:b.wrapX?b.wrapX:!1}),style:b.style?b.style:$q()});this.Ka=b.Qg;this.ed=b.ta?b.ta:Bm;this.ra=b.Pg?b.Pg:Cm;I(this,L("active"),this.qf,this)}y(Sq,Fm);function $q(){var b=Vh();return function(c){return b[c.J().aa()]}}m=Sq.prototype;m.setMap=function(b){Sq.U.setMap.call(this,b);this.qf()};
function Uq(b){var c=!this.I;this.I&&b.type===rl?(ar(this,b),c=!1):b.type===ql?c=br(this,b):b.type===kl&&(c=!1);return Gm.call(this,b)&&c}function Tq(b){if(this.ed(b))return this.qa=b.pixel,!0;if(this.c!==Zq&&this.c!==Xq||!this.ra(b))return!1;this.qa=b.pixel;this.I=!0;this.l||cr(this,b);return!0}
function Vq(b){this.I=!1;var c=this.qa,d=b.pixel,e=c[0]-d[0],c=c[1]-d[1],d=!0;e*e+c*c<=this.jg&&(br(this,b),this.l?this.c===dr?this.kb():er(this,b)?this.kb():ar(this,b):(cr(this,b),this.c===Yq&&this.kb()),d=!1);return d}
function br(b,c){if(b.l){var d=c.coordinate,e=b.j.J(),f;b.c===Yq?f=b.a:b.c===Xq?(f=b.a[0],f=f[f.length-1],er(b,c)&&(d=b.l.slice())):(f=b.a,f=f[f.length-1]);f[0]=d[0];f[1]=d[1];b.C(b.a,e);b.s&&b.s.J().Y(d);e instanceof Ii&&b.c!==Xq?(b.v||(b.v=new Wh(new ti(null))),0>=e.c.length?d=null:(d=new vi(null),wi(d,e.layout,e.o.slice(0,e.c[0]))),e=b.v.J(),e.K(d.layout,d.o)):b.D&&(e=b.v.J(),e.Y(b.D));fr(b)}else e=c.coordinate.slice(),b.s?b.s.J().Y(e):(b.s=new Wh(new Bi(e)),fr(b));return!0}
function er(b,c){var d=!1;if(b.j){var e=!1,f=[b.l];b.c===Zq?e=b.a.length>b.La:b.c===Xq&&(e=b.a[0].length>b.La,f=[b.a[0][0],b.a[0][b.a[0].length-2]]);if(e)for(var e=c.map,g=0,h=f.length;g<h;g++){var k=f[g],l=Mm(e,k),n=c.pixel,d=n[0]-l[0],l=n[1]-l[1],n=b.I&&b.ra(c)?1:b.kg;if(d=Math.sqrt(d*d+l*l)<=n){b.l=k;break}}}return d}
function cr(b,c){var d=c.coordinate;b.l=d;b.c===Yq?b.a=d.slice():b.c===Xq?(b.a=[[d.slice(),d.slice()]],b.D=b.a[0]):(b.a=[d.slice(),d.slice()],b.c===dr&&(b.D=b.a));b.D&&(b.v=new Wh(new ti(b.D)));d=b.C(b.a);b.j=new Wh;b.Ka&&Yh(b.j,b.Ka);Xh(b.j,d);fr(b);b.B(new Rq("drawstart",b.j))}
function ar(b,c){var d=c.coordinate,e=b.j.J(),f,g;if(b.c===Zq)b.l=d.slice(),g=b.a,g.push(d.slice()),f=g.length>b.sa,b.C(g,e);else if(b.c===Xq){g=b.a[0];g.push(d.slice());if(f=g.length>b.sa)b.l=g[0];b.C(b.a,e)}fr(b);f&&b.kb()}
m.kb=function(){var b=gr(this),c=this.a,d=b.J();this.c===Zq?(c.pop(),this.C(c,d)):this.c===Xq&&(c[0].pop(),c[0].push(c[0][0]),this.C(c,d));"MultiPoint"===this.O?Xh(b,new Ci([c])):"MultiLineString"===this.O?Xh(b,new xi([c])):"MultiPolygon"===this.O&&Xh(b,new Li([c]));this.B(new Rq("drawend",b));this.Da&&this.Da.push(b);this.Ma&&this.Ma.ia(b)};function gr(b){b.l=null;var c=b.j;c&&(b.j=null,b.s=null,b.v=null,b.ha.S().clear(!0));return c}
m.extend=function(b){var c=b.J();this.j=b;this.a=c.ja();b=this.a[this.a.length-1];this.l=b.slice();this.a.push(b.slice());fr(this);this.B(new Rq("drawstart",this.j))};m.sb=dh;function fr(b){var c=[];b.j&&c.push(b.j);b.v&&c.push(b.v);b.s&&c.push(b.s);b=b.ha.S();b.clear(!0);tj(b,c)}m.qf=function(){var b=this.g,c=this.getActive();b&&c||gr(this);this.ha.setMap(c?b:null)};
function Wq(b){var c;"Point"===b||"MultiPoint"===b?c=Yq:"LineString"===b||"MultiLineString"===b?c=Zq:"Polygon"===b||"MultiPolygon"===b?c=Xq:"Circle"===b&&(c=dr);return c}var Yq="Point",Zq="LineString",Xq="Polygon",dr="Circle";function hr(b,c){Sa.call(this,b);this.feature=c}y(hr,Sa);
function ir(b){b=void 0!==b?b:{};tm.call(this,{handleEvent:jr});this.continueMsg=this.i=this.nb=this.Ja=this.j=this.c=null;this.decimals=void 0!==b.decimals?b.decimals:null;this.v=void 0!==b.zd?b.zd:!0;this.startMsg=void 0!==b.startMsg?b.startMsg:Ec("SPAN",{},"Click to start drawing.");this.A=null;var c=void 0!==b.style?b.style:[new Ph({fill:new Fh({color:"rgba(255, 255, 255, 0.2)"})}),new Ph({stroke:new Mh({color:"white",width:5})}),new Ph({stroke:new Mh({color:"#ffcc33",width:3})})];this.l=new qj({source:new Bj,
style:c});this.a=this.s(b.sketchStyle,this.l.S());this.C=!0;I(this.a,L("active"),this.jh,this);I(this.a,"drawstart",this.Bi,this);I(this.a,"drawend",this.Ai,this);I(this,L("active"),this.li,this)}y(ir,tm);function jr(b){if(b.type!=ql||b.dragging)return!0;var c=this.startMsg;null!==this.i&&(c=this.continueMsg);this.v&&(Hc(this.c),this.c.appendChild(c),this.j.setPosition(b.coordinate));return!0}ir.prototype.Rg=function(){return this.a};ir.prototype.getDrawInteraction=ir.prototype.Rg;m=ir.prototype;
m.setMap=function(b){ir.U.setMap.call(this,b);this.l.setMap(b);var c=this.a.g;null!==c&&c.i.remove(this.a);null!==b&&b.i.push(this.a)};m.Bi=function(b){this.i=b.feature;this.l.S().clear(!0);kr(this);b=this.i.J();this.A=I(b,"change",function(){this.df(function(b,d){null!==d&&(this.Ja.innerHTML=b,this.nb.setPosition(d))}.bind(this))},this)};m.Ai=function(){uk(this.Ja,"tooltip-static");this.nb.set("offset",[0,-7]);this.B(new hr("measureend",this.i));this.i=null;null!==this.A&&G(this.A)};
function lr(b){b.v&&(b.g.c.remove(b.j),null!==b.c&&b.c.parentNode.removeChild(b.c),b.c=null,b.j=null)}function kr(b){mr(b);b.Ja=Ec("DIV");vk(b.Ja,["tooltip","tooltip-measure"]);b.nb=new wo({element:b.Ja,offset:[0,-15],Yd:"bottom-center",Rf:!1});b.g.c.push(b.nb)}function mr(b){null!==b.Ja&&(b.Ja.parentNode.removeChild(b.Ja),b.Ja=null,b.nb=null)}
m.li=function(){var b=this.getActive();this.C=!1;this.a.setActive(b);this.C=!0;this.g&&(b?this.nb||(kr(this),lr(this),this.v&&(this.c=Ec("DIV"),uk(this.c,"tooltip"),this.j=new wo({element:this.c,offset:[15,0],Yd:"center-left"}),this.g.c.push(this.j))):(this.l.S().clear(!0),this.g.c.remove(this.nb),mr(this),lr(this)))};m.jh=function(){this.C&&this.setActive(this.a.getActive())};function nr(b){b=void 0!==b?b:{};ir.call(this,b);this.continueMsg=void 0!==b.continueMsg?b.continueMsg:Ec("SPAN",{},"Click to continue drawing the line.",Ec("BR"),"Double-click or click last point to finish.")}y(nr,ir);nr.prototype.s=function(b,c){return new Sq({type:"LineString",source:c,style:b})};
nr.prototype.df=function(b){var c=this.i.J(),d;d=U(this.g).X();for(var e=this.decimals,f=0,g=c.ja(),h=0,k=g.length-1;h<k;++h)var l=cf(g[h],d,"EPSG:4326"),n=cf(g[h+1],d,"EPSG:4326"),f=f+He(zn,l,n);var q;1E3<f?(null!==e?q=Ga(f/1E3,0,e):q=parseFloat((f/1E3).toPrecision(3)),q+=" km"):(null!==e?q=Ga(f,0,e):q=parseFloat(f.toPrecision(3)),q+=" m");d=q;c=c.o.slice(c.o.length-c.a);b(d,c)};function or(b){tm.call(this,{handleEvent:eh});this.l=null;this.i=b.type;this.C=b.minPoints?b.minPoints:"Polygon"===this.i?3:2;this.a=null;this.j=[];this.c=null;this.s=new qj({source:new Bj({mc:!1,wrapX:b.wrapX?b.wrapX:!1}),style:b.style?b.style:$q(),bd:!0,cd:!0});I(this,L("active"),this.v,this);this.set("dirty",!1);this.set("drawing",!1);this.set("valid",!1)}y(or,tm);sa("ngeo.interaction.MobileDraw",or);
or.prototype.setMap=function(b){this.g&&this.l&&G(this.l);or.U.setMap.call(this,b);b&&(this.l=I(U(b),L("center"),this.A,this));this.v()};or.prototype.Cc=function(){return this.get("dirty")};or.prototype.getDirty=or.prototype.Cc;or.prototype.Zb=function(){return this.get("drawing")};or.prototype.getDrawing=or.prototype.Zb;or.prototype.Nd=function(){return this.get("valid")};or.prototype.getValid=or.prototype.Nd;or.prototype.getFeature=function(){return this.a};or.prototype.getFeature=or.prototype.getFeature;
or.prototype.Rb=function(){var b=this.getActive(),c=this.Zb();if(b&&c){var c=this.c.J().ja(),d;"Point"===this.i?(this.a||(this.a=new Wh(new Bi(c)),this.B(new Rq("drawstart",this.a))),b=this.a.J(),b.Y(c)):("LineString"===this.i&&(this.j.push(this.c),this.a?(b=this.a.J(),d=b.ja(),d.push(c.slice()),b.Y(d)):(d=[c.slice(),c.slice()],this.a=new Wh(new ti(d)),this.B(new Rq("drawstart",this.a)))),this.Cc()&&this.set("dirty",!1),b=this.Nd(),"LineString"===this.i&&(d.length>=this.C?b||this.set("valid",!0):
b&&this.set("valid",!1)),this.c=null,pr(this))}};or.prototype.addToDrawing=or.prototype.Rb;or.prototype.Ne=function(){this.setActive(!1);this.setActive(!0)};or.prototype.clearDrawing=or.prototype.Ne;or.prototype.kb=function(){var b=this.getActive(),c=this.Zb();b&&c&&(this.c&&this.Rb(),this.set("drawing",!1),this.B(new Rq("drawend",this.a)))};or.prototype.finishDrawing=or.prototype.kb;
or.prototype.v=function(){var b=this.g,c=this.getActive();if(b&&c)this.set("drawing",!0),qr(this),pr(this),"Point"===this.i&&this.Rb();else{if(this.a||0<this.j.length)this.c=this.a=null,this.s.S().clear(!0);this.j=[];this.set("dirty",!1);this.set("drawing",!1);this.set("valid",!1)}this.s.setMap(c?b:null)};
or.prototype.A=function(){var b=this.getActive(),c=this.Zb();if(b&&c)if(qr(this),"Point"===this.i)this.Rb();else{if(this.a){b=Yl(U(this.g));if("LineString"===this.i){var c=this.a.J(),d=c.ja();d.pop();d.push(b);c.Y(d)}this.Cc()||this.set("dirty",!0)}pr(this)}};function qr(b){var c=Yl(U(b.g));b.c?b.c.J().Y(c):b.c=new Wh(new Bi(c))}function pr(b){var c=[];b.a&&c.push(b.a);b.c&&c.push(b.c);var d=b.s.S();d.clear(!0);tj(d,c);tj(d,b.j)};function rr(b){b=void 0!==b?b:{};ec(b,{zd:!1});nr.call(this,b)}y(rr,nr);sa("ngeo.interaction.MeasureLengthMobile",rr);rr.prototype.s=function(b,c){return new or({type:"LineString",style:b,source:c})};B.value("gmfMobileMeasureLengthTemplateUrl",function(b,c){var d=c.gmfMobileMeasureLengthTemplateurl;return void 0!==d?d:"gmf/mobilemeasurelength.html"});function sr(b){return{restrict:"A",scope:{active:"=gmfMobileMeasureLengthActive",decimals:"<?gmfMobileMeasureLengthDecimals",map:"=gmfMobileMeasureLengthMap",sketchStyle:"=?gmfMobileMeasureLengthSketchStyle"},controller:"GmfMobileMeasureLengthController",controllerAs:"ctrl",bindToController:!0,templateUrl:b}}sr.$inject=["gmfMobileMeasureLengthTemplateUrl"];
B.directive("gmfMobileMeasureLength",sr);
function tr(b,c){b.$watch(function(){return this.active}.bind(this),function(b){this.measure.setActive(b)}.bind(this));void 0===this.sketchStyle&&(this.sketchStyle=new Ph({fill:new Fh({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Mh({color:"rgba(0, 0, 0, 0.5)",H:[10,10],width:2}),image:new Gp({stroke:new Mh({color:"rgba(0, 0, 0, 0.7)",width:2}),points:4,radius:8,fc:0,angle:0})}));this.measure=new rr({decimals:this.decimals,sketchStyle:this.sketchStyle});this.measure.setActive(this.active);c(this.measure);
this.map.i.push(this.measure);var d=this.drawInteraction=this.measure.a;c(d);Object.defineProperty(this,"hasPoints",{get:function(){return null!==this.drawInteraction.getFeature()}});this.dirty=!1;I(d,L("dirty"),function(){(this.dirty=d.Cc())&&b.$apply()},this);this.drawing=!1;I(d,L("drawing"),function(){this.drawing=d.Zb()},this);this.valid=!1;I(d,L("valid"),function(){this.valid=d.Nd()},this)}tr.$inject=["$scope","ngeoDecorateInteraction"];tr.prototype.yg=function(){this.drawInteraction.Rb()};
tr.prototype.addPoint=tr.prototype.yg;tr.prototype.clear=function(){this.drawInteraction.Ne()};tr.prototype.clear=tr.prototype.clear;tr.prototype.finish=function(){this.drawInteraction.kb()};tr.prototype.finish=tr.prototype.finish;tr.prototype.yd=function(){this.active=!1};tr.prototype.deactivate=tr.prototype.yd;B.controller("GmfMobileMeasureLengthController",tr);function ur(b,c){this.a=b;this.b=c}ur.$inject=["$http","gmfAltitudeUrl"];ur.prototype.Hd=function(b){var c={};c.lon=b[0];c.lat=b[1];return this.a.get(this.b,{params:c,withCredentials:!0}).then(this.f.bind(this))};ur.prototype.getAltitude=ur.prototype.Hd;ur.prototype.f=function(b){return b.data};B.service("gmfAltitude",ur);function vr(b){b=void 0!==b?b:{};ec(b,{zd:!1});ir.call(this,b)}y(vr,ir);sa("ngeo.interaction.MeasurePointMobile",vr);vr.prototype.s=function(b,c){return new or({type:"Point",style:b,source:c})};vr.prototype.df=function(b){var c=this.i.J();U(this.g).X();var d;d=this.decimals;var e=c.ja(),f=e[0],e=e[1];d=null!==d?d:0;f=Ga(f,0,d);e=Ga(e,0,d);d=["X: ",f,", Y: ",e].join("");c=c.o.slice(c.o.length-c.a);b(d,c)};B.value("gmfMobileMeasurePointTemplateUrl",function(b,c){var d=c.gmfMobileMeasurePointTemplateurl;return void 0!==d?d:"gmf/mobilemeasurepoint.html"});function wr(b){return{restrict:"A",scope:{active:"=gmfMobileMeasurePointActive",decimals:"<?gmfMobileMeasurePointDecimals",map:"=gmfMobileMeasurePointMap",sketchStyle:"=?gmfMobileMeasurePointSketchStyle"},controller:"GmfMobileMeasurePointController",controllerAs:"ctrl",bindToController:!0,templateUrl:b}}wr.$inject=["gmfMobileMeasurePointTemplateUrl"];
B.directive("gmfMobileMeasurePoint",wr);
function xr(b,c,d,e,f){this.f=d;this.g=e;this.c=b;c.$watch(function(){return this.active}.bind(this),function(b){this.measure.setActive(b);this.measure.getActive()?(b=U(this.map),this.a=I(b,"propertychange",this.g(this.b.bind(this),300,!0),this),this.b()):this.a&&(G(this.a),this.a=null)}.bind(this));void 0===this.sketchStyle&&(this.sketchStyle=new Ph({fill:new Fh({color:"rgba(255, 255, 255, 0.2)"}),stroke:new Mh({color:"rgba(0, 0, 0, 0.5)",H:[10,10],width:2}),image:new Gp({stroke:new Mh({color:"rgba(0, 0, 0, 0.7)",
width:2}),points:4,radius:8,fc:0,angle:0})}));this.measure=new vr({decimals:this.decimals,sketchStyle:this.sketchStyle});this.measure.setActive(this.active);f(this.measure);this.map.i.push(this.measure);this.drawInteraction=this.measure.a;f(this.drawInteraction);this.a=null}xr.$inject=["gettextCatalog","$scope","gmfAltitude","ngeoDebounce","ngeoDecorateInteraction"];xr.prototype.yd=function(){this.active=!1};xr.prototype.deactivate=xr.prototype.yd;xr.prototype.translate=function(b){return this.c.getString(b)};
xr.prototype.translate=xr.prototype.translate;
xr.prototype.b=function(){var b=Yl(U(this.map));this.f.Hd(b).then(function(b){var d=this.measure.Ja,e=document.createElement("div");e.className="gmf-mobile-measure-point-altitude";$b(b,function(b,c){if(null!==b){var d=document.createElement("div");d.className="gmf-mobile-measure-altitude";var k;k=1E3<b?parseFloat((b/1E3).toPrecision(3))+" km":parseFloat(b.toPrecision(3))+" m";d.innerHTML=[this.translate(c),": ",k].join("");e.appendChild(d)}},this);(b=Ac("gmf-mobile-measure-point-altitude",d))&&b.remove();
d.appendChild(e)}.bind(this))};B.controller("GmfMobileMeasurePointController",xr);B.directive("gmfMobileNav",function(){return{restrict:"A",controller:"gmfMobileNavController",bindToController:!0,controllerAs:"navCtrl",scope:!0,link:function(b,c,d,e){yr(e,c)}}});function zr(){this.f=[];this.c=this.b=this.a=null;this.back=this.g.bind(this)}sa("gmf.MobileNavController",zr);B.controller("gmfMobileNavController",zr);
function yr(b,c){b.a=$(c.find(".active.slide"));b.b=$(c.find("> header"));b.c=$(c.find("header > .go-back"));c.find("[data-toggle=slide-in]").on("click",function(b){var c=$(b.target).parents(".slide");this.f.push(c);c.addClass("slide-out").removeClass("active");b=$($(b.target).attr("data-target"));b.addClass("active");Ar(this,b,!1);this.a=b}.bind(b));b.c.click(b.back.bind(b))}
function Ar(b,c,d){b.b.toggleClass("back",d);b.b.find("nav:not(.active)").remove();b.b.find("nav.active").removeClass("active").addClass("slide-out");b.c.toggleClass("active",0<b.f.length);var e=$("<nav>");e.append($("<span>",{text:c.attr("data-header-title")}));b.b.append(e);window.setTimeout(function(){e.css("display","none");e.offset();e.css("display","");window.setTimeout(function(){e.position();e.addClass("active")},0)},0)}B.controller("gmfMobileNavController",zr);
zr.prototype.g=function(){if(!(0>=this.f.length)){this.a.removeClass("active");var b=this.f.pop();b.addClass("active").removeClass("slide-out");Ar(this,b,!0);this.a=b}};B.directive("gmfMobileNavBack",function(){return{require:"^^gmfMobileNav",restrict:"A",scope:!1,link:function(b,c,d,e){b.$watch(d.gmfMobileNavBack,function(){null!==e.a&&e.a.is(c[0])&&e.g()})}}});function Br(b){return{restrict:"A",scope:!1,link:function(c,d,e){function f(c){b.gf(g,c.coordinate)}var g=c.$eval(e.ngeoMobileQueryMap),h=null;c.$watch(e.ngeoMobileQueryActive,function(c){c?h=I(g,"click",f):(null!==h&&(G(h),h=null),b.clear())})}}}Br.$inject=["ngeoQuery"];A.directive("ngeoMobileQuery",Br);B.constant("isMobile",!0);B.constant("gmfAltitudeUrl","https://geomapfish-demo.camptocamp.net/2.0/wsgi/raster");
function Cr(b,c,d){this.rightNavVisible=this.leftNavVisible=!1;var e=b.positionFeatureStyle||new Ph({image:new Oh({radius:6,fill:new Fh({color:"rgba(230, 100, 100, 1)"}),stroke:new Mh({color:"rgba(230, 40, 40, 1)",width:2})})}),f=b.accuracyFeatureStyle||new Ph({fill:new Fh({color:"rgba(100, 100, 230, 0.3)"}),stroke:new Mh({color:"rgba(40, 40, 230, 1)",width:2})}),g=new Fh({color:[255,170,0,.6]}),h=new Mh({color:[255,170,0,1],width:2});this.queryFeatureStyle=new Ph({fill:g,image:new Oh({fill:g,radius:5,
stroke:h}),stroke:h});this.mobileGeolocationOptions={positionFeatureStyle:e,accuracyFeatureStyle:f,zoom:b.geolocationZoom||9};e={projection:Ne("epsg:"+(b.srid||21781))};ec(e,b.mapViewConfig||{});this.map=new to({layers:[],view:new Xl(e),controls:b.mapControls||[new zq,new qm],mb:b.mapInteractions||rn({Xd:!1})});c.$on(Dr,function(b){b.stopPropagation();alert("Geo-location failed")}.bind(this));lq.call(this,b,c,d)}y(Cr,lq);sa("gmf.AbstractMobileController",Cr);Cr.$inject=["config","$scope","$injector"];
Cr.prototype.qj=function(){this.leftNavVisible=!this.leftNavVisible};Cr.prototype.toggleLeftNavVisibility=Cr.prototype.qj;Cr.prototype.rj=function(){this.rightNavVisible=!this.rightNavVisible};Cr.prototype.toggleRightNavVisibility=Cr.prototype.rj;Cr.prototype.Gh=function(){this.leftNavVisible=this.rightNavVisible=!1};Cr.prototype.hideNav=Cr.prototype.Gh;Cr.prototype.ii=function(){return this.leftNavVisible||this.rightNavVisible};Cr.prototype.navIsVisible=Cr.prototype.ii;Cr.prototype.Sh=function(){return this.leftNavVisible};
Cr.prototype.leftNavIsVisible=Cr.prototype.Sh;Cr.prototype.gj=function(){return this.rightNavVisible};Cr.prototype.rightNavIsVisible=Cr.prototype.gj;B.controller("AbstractMobileController",Cr);function Er(b){Object.defineProperty(b,"tracking",{get:function(){return b.get("tracking")},set:function(c){Fr(b,c)}})}Er.$inject=["geolocation"];A.value("ngeoDecorateGeolocation",Er);function Gr(b){mb.call(this);b=b||{};this.a=null;this.g=bf;this.c=void 0;I(this,L("projection"),this.ni,this);I(this,L("tracking"),this.oi,this);if(void 0!==b.projection){var c=Ne(b.projection);this.set("projection",c)}void 0!==b.xj&&this.set("trackingOptions",b.xj);Fr(this,void 0!==b.wj?b.wj:!1)}y(Gr,mb);m=Gr.prototype;m.L=function(){Fr(this,!1);Gr.U.L.call(this)};m.ni=function(){var b=this.X();b&&(this.g=Ue(Ne("EPSG:4326"),b),this.a&&this.set("position",this.g(this.a)))};
m.oi=function(){if(xh){var b=this.get("tracking");b&&void 0===this.c?this.c=t.navigator.geolocation.watchPosition(this.Oi.bind(this),this.Pi.bind(this),this.get("trackingOptions")):b||void 0===this.c||(t.navigator.geolocation.clearWatch(this.c),this.c=void 0)}};
m.Oi=function(b){var c=b.coords;this.set("accuracy",c.accuracy);this.set("altitude",null===c.altitude?void 0:c.altitude);this.set("altitudeAccuracy",null===c.altitudeAccuracy?void 0:c.altitudeAccuracy);this.set("heading",null===c.heading?void 0:c.heading*Math.PI/180);this.a?(this.a[0]=c.longitude,this.a[1]=c.latitude):this.a=[c.longitude,c.latitude];b=this.g(this.a);this.set("position",b);this.set("speed",null===c.speed?void 0:c.speed);b=this.a;var d=c.accuracy,c=[],e;for(e=0;32>e;++e)Sc(c,zn.offset(b,
d,2*Math.PI*e/32));c.push(c[0],c[1]);b=new Ii(null);b.K("XY",c,[c.length]);b.tc(this.g);this.set("accuracyGeometry",b);this.b()};m.Pi=function(b){b.type="error";Fr(this,!1);this.B(b)};m.Hd=function(){return this.get("altitude")};m.X=function(){return this.get("projection")};function Fr(b,c){b.set("tracking",c)};var Dr="mobile-geolocation-error";sa("ngeo.MobileGeolocationEventType",{ERROR:Dr});A.directive("ngeoMobileGeolocation",function(){return{restrict:"A",scope:{getMobileMapFn:"&ngeoMobileGeolocationMap",getMobileGeolocationOptionsFn:"&ngeoMobileGeolocationOptions"},controller:"NgeoMobileGeolocationController",controllerAs:"ctrl"}});
function Hr(b,c,d,e){c.on("click",this.Uf.bind(this));c=b.getMobileMapFn();this.u=b;this.f=c;var f=b.getMobileGeolocationOptionsFn()||{};this.b=Lj(e);this.da=new Gr({projection:U(c).X()});this.da.on("error",function(c){Ir(this);b.$emit(Dr,c)},this);this.c=new Wh;f.positionFeatureStyle&&Zh(this.c,f.positionFeatureStyle);this.fb=new Wh;f.accuracyFeatureStyle&&Zh(this.fb,f.accuracyFeatureStyle);this.j=f.zoom;this.i=this.a=!1;I(this.da,L("accuracyGeometry"),function(){Xh(this.fb,this.da.get("accuracyGeometry")||
null)},this);I(this.da,L("position"),function(b){this.ie(b)},this);e=U(c);I(e,L("center"),this.g,this);I(e,L("resolution"),this.g,this);I(e,L("rotation"),this.g,this);d(this.da)}sa("ngeo.MobileGeolocationController",Hr);Hr.$inject=["$scope","$element","ngeoDecorateGeolocation","ngeoFeatureOverlayMgr"];
Hr.prototype.Uf=function(){if(this.da.get("tracking")){var b=this.da.get("position");if(void 0===b)Ir(this),this.u.$emit(Dr,null);else{var c=Yl(U(this.f));b[0]===c[0]&&b[1]===c[1]?Ir(this):(Ir(this),Jr(this))}}else Jr(this)};Hr.prototype.toggleTracking=Hr.prototype.Uf;function Jr(b){b.b.ia(b.c);b.b.ia(b.fb);b.a=!0;Fr(b.da,!0)}function Ir(b){b.b.clear();b.a=!1;Fr(b.da,!1)}
Hr.prototype.ie=function(){var b=this.da.get("position"),c=new Bi(b);Xh(this.c,c);this.a&&(this.i=!0,bm(U(this.f),b),void 0!==this.j&&em(U(this.f),this.j),this.i=!1)};Hr.prototype.g=function(){this.a&&!this.i&&(this.a=!1)};A.controller("NgeoMobileGeolocationController",Hr);ta.constant("ngeoQueryOptions",{limit:20});function Kr(b,c){Cr.call(this,{srid:21781,mapViewConfig:{center:[632464,185457],Fa:3,zoom:3}},b,c)}y(Kr,Cr);sa("app.MobileController",Kr);Kr.$inject=["$scope","$injector"];ta.controller("MobileController",Kr);function Lr(b,c){var d=c.exportgpxkml;return function(c,f,g){f=$("<input>").attr({type:"hidden",name:"format",value:f});g=$("<input>").attr({type:"hidden",name:"name",value:g});c=$("<input>").attr({type:"hidden",name:"doc",value:c});var h=$("<form>").attr({method:"POST",action:d});h.append(f,g,c);angular.element(b[0].body).append(h);h[0].submit();h.remove()}}Lr.$inject=["$document","gmfServiceUrls"];B.factory("gmfExportFeatures",Lr);var Mr=[4E3,3750,3500,3250,3E3,2750,2500,2250,2E3,1750,1500,1250,1E3,750,650,500,250,100,50,20,10,5,2.5,2,1.5,1,.5];new Rg({extent:[42E4,3E4,9E5,35E4],Ba:Mr,Td:Mr.map(function(b,c){return String(c)})});var Nr=[4E3,3750,3500,3250,3E3,2750,2500,2250,2E3,1750,1500,1250,1E3,750,650,500,250,100,50,20,10,5,2.5,2,1.5,1,.5];new Rg({extent:[42E4,3E4,9E5,35E4],Ba:Nr,Td:Nr.map(function(b,c){return String(c)})});(function(){function b(b){b.put("ngeo/popup.html",'<h4 class="popover-title ngeo-popup-title"> <span>{{title}}</span> <button type=button class=close ng-click="open = false"> &times;</button> </h4> <div class=popover-content ng-bind-html=content></div> ');b.put("gmf/layertree.html",'<span ng-if=::!layertreeCtrl.isRoot id=node-{{::layertreeCtrl.uid}} ng-class="[layertreeCtrl.node.children ? \'group\' : \'leaf\', \'depth-\' + layertreeCtrl.depth, gmfLayertreeCtrl.getResolutionStyle(layertreeCtrl.node), gmfLayertreeCtrl.getNoSourceStyle(layertreeCtrl), gmfLayertreeCtrl.getNodeState(layertreeCtrl)]"> <a href ng-click=::gmfLayertreeCtrl.toggleActive(layertreeCtrl)> <span class=layerIcon> <img ng-src={{::gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl)}}> </span> <span class=state></span> <span class=name>{{layertreeCtrl.node.name | translate}}</span> </a> <span class=rightButtons> <span class=metadata ng-if=::layertreeCtrl.node.metadata.metadataUrl> <span ng-if="::gmfLayertreeCtrl.openLinksInNewWindow === true"> <a title="More informations" href={{::layertreeCtrl.node.metadata.metadataUrl}} target=blank_></a> </span> <span ng-if="::gmfLayertreeCtrl.openLinksInNewWindow !== true"> <a title="More informations" href ng-click=gmfLayertreeCtrl.displayMetadata(layertreeCtrl)></a> </span> </span> <span class=zoom title="Zoom to a visible level" ng-click=::gmfLayertreeCtrl.zoomToResolution(layertreeCtrl.node)></span> <span class=legendButton ng-if="::(gmfLayertreeCtrl.getLegendURL(layertreeCtrl) && layertreeCtrl.node.metadata.legend == \'true\')"> <a title="Show/hide legend" data-toggle=collapse href=#node-{{::layertreeCtrl.uid}}-legend></a> </span> </span> <span class=legend> <div id=node-{{::layertreeCtrl.uid}}-legend class=collapse ng-class="::[layertreeCtrl.node.metadata.isLegendExpanded == \'true\' ? \'in\' : \'\']"> <a data-toggle=collapse href=#node-{{::layertreeCtrl.uid}}-legend> <img ng-src={{gmfLayertreeCtrl.getLegendURL(layertreeCtrl)}}> </a> </div> </span> </span> <ul ng-if=::layertreeCtrl.node.children> <li class=treenode ng-repeat="node in layertreeCtrl.node.children" ngeo-layertree=node ngeo-layertree-notroot ngeo-layertree-map=layertreeCtrl.map ngeo-layertree-nodelayerexpr=layertreeCtrl.nodelayerExpr ngeo-layertree-listenersexpr=layertreeCtrl.listenersExpr> </li> </ul> ');
b.put("ngeo/scaleselector.html",'<div ng-class="::{\'dropdown\': true, \'dropup\': scaleselectorCtrl.options.dropup}"> <button type=button class="btn btn-primary" data-toggle=dropdown> <span ng-bind-html=scaleselectorCtrl.currentScale></span>&nbsp;<span class=caret></span> </button> <ul class=dropdown-menu role=menu> <li ng-repeat="zoomLevel in ::scaleselectorCtrl.zoomLevels"> <a href ng-click=scaleselectorCtrl.changeZoom(zoomLevel) ng-bind-html=scaleselectorCtrl.getScale(zoomLevel)> </a> </li> </ul> </div> ');
b.put("gmf/mobilemeasurelength.html",'<a class="btn btn-default" ng-if="ctrl.drawing && (!ctrl.valid)" ng-click=ctrl.addPoint()> <span class="fa fa-check"></span> {{\'Set as starting point\' | translate}} </a> <a class="btn btn-default" ng-if=ctrl.dirty ng-click=ctrl.addPoint()> <span class="fa fa-plus"></span> {{\'Add new point\' | translate}} </a> <a class="btn btn-default" ng-if="ctrl.drawing && ctrl.valid && !ctrl.dirty" ng-click=ctrl.finish()> <span class="fa fa-check"></span> {{\'Terminate\' | translate}} </a> <a class="btn btn-default" ng-if=ctrl.valid ng-click=ctrl.clear()> <span class="fa fa-repeat"></span> {{\'Clear\' | translate}} </a> <a class="btn btn-default" ng-if=ctrl.active ng-click=ctrl.deactivate()> <span class="fa fa-times"></span> {{\'Close\' | translate}} </a> ');
b.put("gmf/mobilebackgroundlayerselector.html",'<ul class=gmf-mobile-backgroundlayerselector> <li ng-repeat="layer in ::ctrl.bgLayers" ng-click=ctrl.setLayer(layer)> <div class=gmf-check> <span class=gmf-icon ng-class="{\'gmf-icon-check\': ctrl.bgLayer == layer}"> </span> </div> <div class=gmf-text>{{layer.get("label") | translate}}</div> <img class=gmf-thumb ng-src="{{::layer.get(\'metadata\')[\'thumbnail\']}}"> <div class=gmf-eol></div> </li> </ul> ');b.put("gmf/mobilemeasurepoint.html",'<a class="btn btn-default" ng-if=ctrl.active ng-click=ctrl.deactivate()> <span class="fa fa-times"></span> {{\'Close\' | translate}} </a> ');
b.put("gmf/search.html",'<div class=gmf-search> <input type=text placeholder="{{\'Search\u2026\' | translate}}" class=form-control ng-model=ctrl.input_value ngeo-search=ctrl.options ngeo-search-datasets=ctrl.datasets ngeo-search-listeners=ctrl.listeners> <span class="clear-button ng-hide" ng-hide="!ctrl.clearButton || ctrl.input_value == \'\'" ng-click=ctrl.onClearButton()></span> </div> ');b.put("gmf/authentication.html","<div ng-if=authCtrl.gmfUser.username> <div class=form-group> <span>{{'Logged in as' | translate}}</span> <strong>{{ ::authCtrl.gmfUser.username }}</strong>. </div> <form name=logoutForm role=form ng-submit=authCtrl.logout() ng-controller=GmfAuthenticationController ng-class=\"{'has-error': authCtrl.error}\" ng-if=!authCtrl.changingPassword> <div class=form-group> <input type=submit class=\"form-control btn btn-primary\" value=\"{{'Logout' | translate}}\"> </div> <span ng-show=authCtrl.error class=help-block>{{ authCtrl.error }}</span> <div class=form-group> <input type=button class=\"form-control btn btn-default\" value=\"{{'Change password' | translate}}\" ng-click=\"authCtrl.changingPassword = true\"> </div> </form> <form name=changePasswordForm role=form ng-submit=authCtrl.changePassword() ng-controller=GmfAuthenticationController ng-class=\"{'has-error': authCtrl.error}\" ng-if=authCtrl.changingPassword> <div class=form-group> <input type=password class=form-control name=oldpassword ng-model=authCtrl.oldPwdVal required=required placeholder=\"{{'Old password' | translate}}\"> </div> <div class=form-group> <input type=password class=form-control name=newpassword ng-model=authCtrl.newPwdVal required=required placeholder=\"{{'New password' | translate}}\"> </div> <div class=form-group> <input type=password class=form-control name=newpasswordconfirm ng-model=authCtrl.newPwdConfVal required=required placeholder=\"{{'Confirm new password' | translate}}\"> </div> <div class=form-group> <input type=submit class=\"form-control btn btn-primary\" value=\"{{'Change password' | translate}}\"> </div> <div class=form-group> <span ng-show=authCtrl.error class=help-block>{{ authCtrl.error }}</span> <input type=button class=\"form-control btn btn-default\" value=\"{{'Cancel' | translate}}\" ng-click=authCtrl.changePasswordReset()> </div> </form> <ngeo-modal ng-model=authCtrl.changePasswordModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label=\"{{'Close' | translate}}\"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title> {{'Password Changed' | translate}} </h4> </div> <div class=modal-body> {{'Your password has succesfully been changed.' | translate}} </div> <div class=modal-footer> <button type=button class=\"btn btn-default\" data-dismiss=modal>{{'OK' | translate}}</button> </div> </ngeo-modal> </div> <div ng-if=!authCtrl.gmfUser.username> <form name=loginForm role=form ng-submit=authCtrl.login() ng-controller=GmfAuthenticationController ng-class=\"{'has-error': authCtrl.error}\"> <div class=form-group> <input type=text class=form-control name=login ng-model=authCtrl.loginVal required=required placeholder=\"{{'Username' | translate}}\"> </div> <div class=form-group> <input type=password class=form-control name=password ng-model=authCtrl.pwdVal required=required placeholder=\"{{'Password' | translate}}\"> </div> <div class=form-group> <input type=submit class=\"form-control btn btn-primary\" value=\"{{'Connect' | translate}}\"> </div> <span ng-show=authCtrl.error class=help-block>{{ authCtrl.error }}</span> <div class=form-group> <a ng-click=authCtrl.resetPassword() href>{{'Password forgotten?' | translate}}</a> </div> </form> <ngeo-modal ng-model=authCtrl.resetPasswordModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label=\"{{'Close' | translate}}\"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title> {{'Password Forgotten?' | translate}} </h4> </div> <div class=modal-body> {{ ::authCtrl.translate( 'A new password has just been sent to you by e-mail.') }} </div> <div class=modal-footer> <button type=button class=\"btn btn-default\" data-dismiss=modal>{{'OK' | translate}}</button> </div> </ngeo-modal> </div> ");
b.put("gmf/themeselector.html","<ul class=gmf-theme-selector> <li ng-repeat=\"theme in tsCtrl.themes\" ng-click=tsCtrl.switchTheme(theme)> <div class=gmf-check> <span class=gmf-icon ng-class=\"{'gmf-icon-check': tsCtrl.currentTheme['name'] == theme.name}\"> </span> </div> <div class=gmf-text>{{theme.name | translate}}</div> <img class=gmf-thumb ng-src={{::theme.icon}}> <div class=gmf-eol></div> </li> </ul> ");b.put("ngeo/layertree.html",'<span ng-if=::!layertreeCtrl.isRoot>{{::layertreeCtrl.node.name}}</span> <input type=checkbox ng-if="::layertreeCtrl.node && !layertreeCtrl.node.children" ng-model=layertreeCtrl.getSetActive ng-model-options="{getterSetter: true}"> <ul ng-if=::layertreeCtrl.node.children> <li ng-repeat="node in ::layertreeCtrl.node.children" ngeo-layertree=::node ngeo-layertree-notroot ngeo-layertree-map=layertreeCtrl.map ngeo-layertree-nodelayerexpr=layertreeCtrl.nodelayerExpr ngeo-layertree-listenersexpr=layertreeCtrl.listenersExpr> </li> </ul> ');
b.put("gmf/mobiledisplayqueries.html",'<div class=mobiledisplayqueries ng-show=ctrl.open ng-swipe-disable-mouse ng-swipe-left=ctrl.next() ng-swipe-right=ctrl.previous()> <button class=collapse-button type=button ng-init="ctrl.collapse = true" ng-click="ctrl.collapse = !ctrl.collapse" ng-class="[ctrl.collapse ? \'up\' : \'down\']"></button> <div class=displayqueries-container> <button type=button class=close ng-click=ctrl.close()></button> <div class=animation-container ng-class="[ctrl.collapse ? \'\' : \'detailed\', ctrl.isNext ? \'next\' : \'previous\']"> <div ng-animate-swap=ctrl.animate class=slide-animation> <div class=header> <p class=title>{{ctrl.source.label | translate}}</p> <p class=subtitle>{{ctrl.getFeatureValues()[ctrl.source.identifierAttributeField]}}</p> </div> <div class=details> <table> <tr ng-repeat="(key, value) in ctrl.getFeatureValues()" ng-if="value.length && key !== \'boundedBy\'"> <td class=key>{{key | translate}}</td> <td class=value>{{value}}</td> </tr> </table> </div> </div> </div> <div class=navigate> <button type=button class=previous ng-show="ctrl.getResultLength() - 1" ng-click=ctrl.previous()></button> <span>{{ctrl.currentResult + 1}}</span> <span>/</span> <span>{{ctrl.getResultLength()}}</span> <button type=button class=next ng-show="ctrl.getResultLength() - 1" ng-click=ctrl.next()></button> </div> </div> </div> ')}
b.$inject=["$templateCache"];B.run(b)})();var Or=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];function Pr(b,c,d){b.push(parseFloat(c.getAttribute("lon")),parseFloat(c.getAttribute("lat")));"ele"in d?(b.push(d.ele),delete d.ele):b.push(0);"time"in d?(b.push(d.time),delete d.time):b.push(0);return b}function Qr(b,c){var d=c[c.length-1],e=b.getAttribute("href");null!==e&&(d.link=e);Id(Rr,b,c)}function Sr(b,c){c[c.length-1].extensionsNode_=b}
P(Or,{rte:Ad(function(b,c){var d=c[0],e=Q({flatCoordinates:[]},Tr,b,c);if(e){var f=e.flatCoordinates;delete e.flatCoordinates;var g=new ti(null);g.K("XYZM",f);ci(g,!1,d);d=new Wh(g);d.ka(e);return d}}),trk:Ad(function(b,c){var d=c[0],e=Q({flatCoordinates:[],ends:[]},Ur,b,c);if(e){var f=e.flatCoordinates;delete e.flatCoordinates;var g=e.ends;delete e.ends;var h=new xi(null);h.K("XYZM",f,g);ci(h,!1,d);d=new Wh(h);d.ka(e);return d}}),wpt:Ad(function(b,c){var d=c[0],e=Q({},Vr,b,c);if(e){var f=Pr([],b,
e),f=new Bi(f,"XYZM");ci(f,!1,d);d=new Wh(f);d.ka(e);return d}})});
var Rr=P(Or,{text:N(S,"linkText"),type:N(S,"linkType")}),Tr=P(Or,{name:N(S),cmt:N(S),desc:N(S),src:N(S),link:Qr,number:N(Rd),extensions:Sr,type:N(S),rtept:function(b,c){var d=Q({},Wr,b,c);d&&Pr(c[c.length-1].flatCoordinates,b,d)}}),Wr=P(Or,{ele:N(Pd),time:N(Od)}),Ur=P(Or,{name:N(S),cmt:N(S),desc:N(S),src:N(S),link:Qr,number:N(Rd),type:N(S),extensions:Sr,trkseg:function(b,c){var d=c[c.length-1];Id(Xr,b,c);d.ends.push(d.flatCoordinates.length)}}),Xr=P(Or,{trkpt:function(b,c){var d=Q({},Yr,b,c);d&&Pr(c[c.length-
1].flatCoordinates,b,d)}}),Yr=P(Or,{ele:N(Pd),time:N(Od)}),Vr=P(Or,{ele:N(Pd),time:N(Od),magvar:N(Pd),geoidheight:N(Pd),name:N(S),cmt:N(S),desc:N(S),src:N(S),link:Qr,sym:N(S),type:N(S),fix:N(S),sat:N(Rd),hdop:N(Pd),vdop:N(Pd),pdop:N(Pd),ageofdgpsdata:N(Pd),dgpsid:N(Rd),extensions:Sr});function Zr(b,c,d){b.setAttribute("href",c);c=d[d.length-1].properties;Jd({node:b},$r,Gd,[c.linkText,c.linkType],d,as)}
function bs(b,c,d){var e=d[d.length-1],f=e.node.namespaceURI,g=e.properties;xd(b,null,"lat",c[1]);xd(b,null,"lon",c[0]);switch(e.geometryLayout){case "XYZM":0!==c[3]&&(g.time=c[3]);case "XYZ":0!==c[2]&&(g.ele=c[2]);break;case "XYM":0!==c[2]&&(g.time=c[2])}c=cs[f];e=Hd(g,c);Jd({node:b,properties:g},ds,Gd,e,d,c)}
var as=["text","type"],$r=P(Or,{text:O(Ud),type:O(Ud)}),es=P(Or,"name cmt desc src link number type rtept".split(" ")),fs=P(Or,{name:O(Ud),cmt:O(Ud),desc:O(Ud),src:O(Ud),link:O(Zr),number:O(Wd),type:O(Ud),rtept:Dd(O(bs))}),gs=P(Or,"name cmt desc src link number type trkseg".split(" ")),js=P(Or,{name:O(Ud),cmt:O(Ud),desc:O(Ud),src:O(Ud),link:O(Zr),number:O(Wd),type:O(Ud),trkseg:Dd(O(function(b,c,d){Jd({node:b,geometryLayout:c.layout,properties:{}},hs,is,c.ja(),d)}))}),is=Ed("trkpt"),hs=P(Or,{trkpt:O(bs)}),
cs=P(Or,"ele time magvar geoidheight name cmt desc src link sym type fix sat hdop vdop pdop ageofdgpsdata dgpsid".split(" ")),ds=P(Or,{ele:O(Vd),time:O(function(b,c){var d=new Date(1E3*c),d=d.getUTCFullYear()+"-"+Ga(d.getUTCMonth()+1,2)+"-"+Ga(d.getUTCDate(),2)+"T"+Ga(d.getUTCHours(),2)+":"+Ga(d.getUTCMinutes(),2)+":"+Ga(d.getUTCSeconds(),2)+"Z";b.appendChild(ad.createTextNode(d))}),magvar:O(Vd),geoidheight:O(Vd),name:O(Ud),cmt:O(Ud),desc:O(Ud),src:O(Ud),link:O(Zr),sym:O(Ud),type:O(Ud),fix:O(Ud),
sat:O(Wd),hdop:O(Vd),vdop:O(Vd),pdop:O(Vd),ageofdgpsdata:O(Vd),dgpsid:O(Wd)});
P(Or,{rte:O(function(b,c,d){var e=d[0],f=Ua({},c.u);b={node:b,properties:f};if(c=c.J())c=ci(c,!0,e),b.geometryLayout=c.layout,f.rtept=c.ja();e=es[d[d.length-1].node.namespaceURI];f=Hd(f,e);Jd(b,fs,Gd,f,d,e)}),trk:O(function(b,c,d){var e=d[0],f=Ua({},c.u);b={node:b,properties:f};if(c=c.J())c=ci(c,!0,e),f.trkseg=yi(c);e=gs[d[d.length-1].node.namespaceURI];f=Hd(f,e);Jd(b,js,Gd,f,d,e)}),wpt:O(function(b,c,d){var e=d[0],f=d[d.length-1];f.properties=Ua({},c.u);if(c=c.J())c=ci(c,!0,e),f.geometryLayout=c.layout,
bs(b,c.ja(),d)})});function ks(b){b=b||{};this.b=b.font;this.g=b.rotation;this.l=b.scale;this.s=b.text;this.j=b.textAlign;this.u=b.textBaseline;this.a=void 0!==b.fill?b.fill:new Fh({color:"#333"});this.i=void 0!==b.stroke?b.stroke:null;this.f=void 0!==b.offsetX?b.offsetX:0;this.c=void 0!==b.offsetY?b.offsetY:0}ks.prototype.Ha=function(){return this.l};ks.prototype.va=function(){return this.s};var ls=["http://www.google.com/kml/ext/2.2"],Y=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],ms=[255,255,255,1],ns=new Fh({color:ms}),os=[20,2],ps=[64,64],qs=new El({anchor:os,jd:"bottom-left",kd:"pixels",ld:"pixels",crossOrigin:"anonymous",rotation:0,scale:.5,size:ps,src:"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"}),rs=new Mh({color:ms,width:1}),ss=new ks({font:"bold 16px Helvetica",
fill:ns,stroke:new Mh({color:[51,51,51,1],width:2}),scale:.8});new Ph({fill:ns,image:qs,text:ss,stroke:rs,zIndex:0});var ts={fraction:"fraction",pixels:"pixels"};function us(b){b=ed(b);if(b=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(b))return b=b[1],[parseInt(b.substr(6,2),16),parseInt(b.substr(4,2),16),parseInt(b.substr(2,2),16),parseInt(b.substr(0,2),16)/255]}
function vs(b){b=ed(b);for(var c=[],d=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i,e;e=d.exec(b);)c.push(parseFloat(e[1]),parseFloat(e[2]),e[3]?parseFloat(e[3]):0),b=b.substr(e[0].length);return""!==b?void 0:c}function ws(b){var c=ed(b);return b.baseURI?vp(b.baseURI,c.trim()).toString():c.trim()}function xs(b){b=Pd(b);if(void 0!==b)return Math.sqrt(b)}function ys(b,c){return Q(null,zs,b,c)}
function As(b,c){var d=Q({o:[],Xf:[]},Bs,b,c);if(d){var e=d.o,d=d.Xf,f,g;f=0;for(g=Math.min(e.length,d.length);f<g;++f)e[4*f+3]=d[f];d=new ti(null);d.K("XYZM",e);return d}}function Cs(b,c){var d=Q({},Ds,b,c),e=Q(null,Es,b,c);if(e){var f=new ti(null);f.K("XYZ",e);f.ka(d);return f}}function Fs(b,c){var d=Q({},Ds,b,c),e=Q(null,Es,b,c);if(e){var f=new Ii(null);f.K("XYZ",e,[e.length]);f.ka(d);return f}}
function Gs(b,c){var d=Q([],Hs,b,c);if(!d)return null;if(0===d.length)return new Np(d);var e=!0,f=d[0].aa(),g,h,k;h=1;for(k=d.length;h<k;++h)if(g=d[h],g.aa()!=f){e=!1;break}if(e){if("Point"==f){g=d[0];e=g.layout;f=g.o;h=1;for(k=d.length;h<k;++h)g=d[h],Sc(f,g.o);g=new Ci(null);g.K(e,f);Is(g,d);return g}return"LineString"==f?(g=new xi(null),Ai(g,d),Is(g,d),g):"Polygon"==f?(g=new Li(null),Pi(g,d),Is(g,d),g):"GeometryCollection"==f?new Np(d):null}return new Np(d)}
function Js(b,c){var d=Q({},Ds,b,c),e=Q(null,Es,b,c);if(e){var f=new Bi(null);f.K("XYZ",e);f.ka(d);return f}}function Ks(b,c){var d=Q({},Ds,b,c),e=Q([null],Ls,b,c);if(e&&e[0]){var f=new Ii(null),g=e[0],h=[g.length],k,l;k=1;for(l=e.length;k<l;++k)Sc(g,e[k]),h.push(g.length);f.K("XYZ",g,h);f.ka(d);return f}}
function Ms(b,c){var d=Q({},Ns,b,c);if(!d)return null;var e="fillStyle"in d?d.fillStyle:ns,f=d.fill;void 0===f||f||(e=null);var f="imageStyle"in d?d.imageStyle:qs,g="textStyle"in d?d.textStyle:ss,h="strokeStyle"in d?d.strokeStyle:rs,d=d.outline;void 0===d||d||(h=null);return[new Ph({fill:e,image:f,stroke:h,text:g,zIndex:void 0})]}
function Is(b,c){var d=c.length,e=Array(c.length),f=Array(c.length),g,h,k,l;k=l=!1;for(h=0;h<d;++h)g=c[h],e[h]=g.get("extrude"),f[h]=g.get("altitudeMode"),k=k||void 0!==e[h],l=l||f[h];k&&b.set("extrude",e);l&&b.set("altitudeMode",f)}function Os(b,c){Id(Ps,b,c)}
var Qs=P(Y,{value:Bd(S)}),Ps=P(Y,{Data:function(b,c){var d=b.getAttribute("name");if(null!==d){var e=Q(void 0,Qs,b,c);e&&(c[c.length-1][d]=e)}},SchemaData:function(b,c){Id(Rs,b,c)}}),Ds=P(Y,{extrude:N(Md),altitudeMode:N(S)}),zs=P(Y,{coordinates:Bd(vs)}),Ls=P(Y,{innerBoundaryIs:function(b,c){var d=Q(void 0,Ss,b,c);d&&c[c.length-1].push(d)},outerBoundaryIs:function(b,c){var d=Q(void 0,Ts,b,c);d&&(c[c.length-1][0]=d)}}),Bs=P(Y,{when:function(b,c){var d=c[c.length-1].Xf,e=ed(b);if(e=/^\s*(\d{4})($|-(\d{2})($|-(\d{2})($|T(\d{2}):(\d{2}):(\d{2})(Z|(?:([+\-])(\d{2})(?::(\d{2}))?)))))\s*$/.exec(e)){var f=
Date.UTC(parseInt(e[1],10),e[3]?parseInt(e[3],10)-1:0,e[5]?parseInt(e[5],10):1,e[7]?parseInt(e[7],10):0,e[8]?parseInt(e[8],10):0,e[9]?parseInt(e[9],10):0);if(e[10]&&"Z"!=e[10]){var g="-"==e[11]?-1:1,f=f+60*g*parseInt(e[12],10);e[13]&&(f+=3600*g*parseInt(e[13],10))}d.push(f)}else d.push(0)}},P(ls,{coord:function(b,c){var d=c[c.length-1].o,e=ed(b);(e=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(e))?d.push(parseFloat(e[1]),
parseFloat(e[2]),parseFloat(e[3]),0):d.push(0,0,0,0)}})),Es=P(Y,{coordinates:Bd(vs)}),Us=P(Y,{href:N(ws)},P(ls,{x:N(Pd),y:N(Pd),w:N(Pd),h:N(Pd)})),Vs=P(Y,{Icon:N(function(b,c){var d=Q({},Us,b,c);return d?d:null}),heading:N(Pd),hotSpot:N(function(b){var c=b.getAttribute("xunits"),d=b.getAttribute("yunits");return{x:parseFloat(b.getAttribute("x")),qe:ts[c],y:parseFloat(b.getAttribute("y")),re:ts[d]}}),scale:N(xs)}),Ss=P(Y,{LinearRing:Bd(ys)}),Ws=P(Y,{color:N(us),scale:N(xs)}),Xs=P(Y,{color:N(us),width:N(Pd)}),
Hs=P(Y,{LineString:Ad(Cs),LinearRing:Ad(Fs),MultiGeometry:Ad(Gs),Point:Ad(Js),Polygon:Ad(Ks)}),Ys=P(ls,{Track:Ad(As)});P(Y,{ExtendedData:Os,Link:function(b,c){Id(Zs,b,c)},address:N(S),description:N(S),name:N(S),open:N(Md),phoneNumber:N(S),visibility:N(Md)});var Zs=P(Y,{href:N(ws)}),Ts=P(Y,{LinearRing:Bd(ys)}),$s=P(Y,{Style:N(Ms),key:N(S),styleUrl:N(function(b){var c=ed(b).trim();return b.baseURI?vp(b.baseURI,c).toString():c})});
P(Y,{ExtendedData:Os,MultiGeometry:N(Gs,"geometry"),LineString:N(Cs,"geometry"),LinearRing:N(Fs,"geometry"),Point:N(Js,"geometry"),Polygon:N(Ks,"geometry"),Style:N(Ms),StyleMap:function(b,c){var d=Q(void 0,at,b,c);if(d){var e=c[c.length-1];ea(d)?e.Style=d:"string"===typeof d&&(e.styleUrl=d)}},address:N(S),description:N(S),name:N(S),open:N(Md),phoneNumber:N(S),styleUrl:N(ws),visibility:N(Md)},P(ls,{MultiTrack:N(function(b,c){var d=Q([],Ys,b,c);if(d){var e=new xi(null);Ai(e,d);return e}},"geometry"),
Track:N(As,"geometry")}));
var bt=P(Y,{color:N(us),fill:N(Md),outline:N(Md)}),Rs=P(Y,{SimpleData:function(b,c){var d=b.getAttribute("name");if(null!==d){var e=S(b);c[c.length-1][d]=e}}}),Ns=P(Y,{IconStyle:function(b,c){var d=Q({},Vs,b,c);if(d){var e=c[c.length-1],f="Icon"in d?d.Icon:{},g;g=(g=f.href)?g:"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png";var h,k,l,n=d.hotSpot;n?(h=[n.x,n.y],k=n.qe,l=n.re):"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"===g?(h=os,l=k="pixels"):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(g)&&
(h=[.5,0],l=k="fraction");var q,n=f.x,p=f.y;void 0!==n&&void 0!==p&&(q=[n,p]);var r,n=f.w,f=f.h;void 0!==n&&void 0!==f&&(r=[n,f]);var u,f=d.heading;void 0!==f&&(u=f*Math.PI/180);d=d.scale;"https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"==g&&(r=ps,void 0===d&&(d=.5));h=new El({anchor:h,jd:"bottom-left",kd:k,ld:l,crossOrigin:"anonymous",offset:q,pf:"bottom-left",rotation:u,scale:d,size:r,src:g});e.imageStyle=h}},LabelStyle:function(b,c){var d=Q({},Ws,b,c);d&&(c[c.length-1].textStyle=new ks({fill:new Fh({color:"color"in
d?d.color:ms}),scale:d.scale}))},LineStyle:function(b,c){var d=Q({},Xs,b,c);d&&(c[c.length-1].strokeStyle=new Mh({color:"color"in d?d.color:ms,width:"width"in d?d.width:1}))},PolyStyle:function(b,c){var d=Q({},bt,b,c);if(d){var e=c[c.length-1];e.fillStyle=new Fh({color:"color"in d?d.color:ms});var f=d.fill;void 0!==f&&(e.fill=f);d=d.outline;void 0!==d&&(e.outline=d)}}}),at=P(Y,{Pair:function(b,c){var d=Q({},$s,b,c);if(d){var e=d.key;e&&"normal"==e&&((e=d.styleUrl)&&(c[c.length-1]=e),(d=d.Style)&&
(c[c.length-1]=d))}}});function ct(b,c){var d=lh(c),d=[255*(4==d.length?d[3]:1),d[2],d[1],d[0]],e;for(e=0;4>e;++e){var f=parseInt(d[e],10).toString(16);d[e]=1==f.length?"0"+f:f}Ud(b,d.join(""))}function dt(b,c,d){Jd({node:b},et,ft,[c],d)}
function gt(b,c,d){var e={node:b};c.Ya()&&b.setAttribute("id",c.Ya());b=Ua({},c.u);var f=c.i;f&&(f=f.call(c,0))&&(f=ea(f)?f[0]:f,this.a&&(b.Style=f),(f=f.va())&&(b.name=f.va()));f=ht[d[d.length-1].node.namespaceURI];b=Hd(b,f);Jd(e,it,Gd,b,d,f);b=d[0];(c=c.J())&&(c=ci(c,!0,b));Jd(e,it,jt,[c],d)}function kt(b,c,d){var e=c.o;b={node:b};b.layout=c.layout;b.stride=c.a;Jd(b,lt,mt,[e],d)}
function nt(b,c,d){var e=c.layout,f=c.o,g=c.c;c=[];var h=0,k,l;k=0;for(l=g.length;k<l;++k){var n=g[k],q=new vi(null);wi(q,e,f.slice(h,n));c.push(q);h=n}e=c.shift();b={node:b};Jd(b,ot,pt,c,d);Jd(b,ot,qt,[e],d)}function rt(b,c){Vd(b,c*c)}P(Y,["Document","Placemark"]);P(Y,{Document:O(function(b,c,d){Jd({node:b},st,tt,c,d,void 0,this)}),Placemark:O(gt)});
var st=P(Y,{Placemark:O(gt)}),ut={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry"},vt=P(Y,["href"],P(ls,["x","y","w","h"])),wt=P(Y,{href:O(Ud)},P(ls,{x:O(Vd),y:O(Vd),w:O(Vd),h:O(Vd)})),xt=P(Y,["scale","heading","Icon","hotSpot"]),zt=P(Y,{Icon:O(function(b,c,d){b={node:b};var e=vt[d[d.length-1].node.namespaceURI],f=Hd(c,e);Jd(b,wt,Gd,f,d,e);e=vt[ls[0]];f=Hd(c,e);Jd(b,wt,yt,f,d,e)}),
heading:O(Vd),hotSpot:O(function(b,c){b.setAttribute("x",c.x);b.setAttribute("y",c.y);b.setAttribute("xunits",c.qe);b.setAttribute("yunits",c.re)}),scale:O(rt)}),At=P(Y,["color","scale"]),Bt=P(Y,{color:O(ct),scale:O(rt)}),Ct=P(Y,["color","width"]),Dt=P(Y,{color:O(ct),width:O(Vd)}),et=P(Y,{LinearRing:O(kt)}),Et=P(Y,{LineString:O(kt),Point:O(kt),Polygon:O(nt)}),ht=P(Y,"name open visibility address phoneNumber description styleUrl Style".split(" ")),it=P(Y,{MultiGeometry:O(function(b,c,d){b={node:b};
var e=c.aa(),f,g;if("MultiPoint"==e){f=c.o;g=c.layout;c=c.a;var e=[],h,k;h=0;for(k=f.length;h<k;h+=c){var l=new Bi(null);l.K(g,f.slice(h,h+c));e.push(l)}f=e;g=Ft}else if("MultiLineString"==e)f=yi(c),g=Gt;else if("MultiPolygon"==e){f=c.layout;g=c.o;c=c.c;e=[];h=0;var n,q;k=0;for(l=c.length;k<l;++k){var p=c[k].slice(),r=p[p.length-1];if(0!==h)for(n=0,q=p.length;n<q;++n)p[n]-=h;n=new Ii(null);n.K(f,g.slice(h,r),p);e.push(n);h=r}f=e;g=Ht}Jd(b,Et,g,f,d)}),LineString:O(kt),LinearRing:O(kt),Point:O(kt),
Polygon:O(nt),Style:O(function(b,c,d){b={node:b};var e={},f=c.c,g=c.b,h=c.g;c=c.va();h instanceof El&&(e.IconStyle=h);c&&(e.LabelStyle=c);g&&(e.LineStyle=g);f&&(e.PolyStyle=f);c=It[d[d.length-1].node.namespaceURI];e=Hd(e,c);Jd(b,Jt,Gd,e,d,c)}),address:O(Ud),description:O(Ud),name:O(Ud),open:O(Td),phoneNumber:O(Ud),styleUrl:O(Ud),visibility:O(Td)}),lt=P(Y,{coordinates:O(function(b,c,d){d=d[d.length-1];var e=d.layout;d=d.stride;var f;"XY"==e||"XYM"==e?f=2:("XYZ"==e||"XYZM"==e)&&(f=3);var g,h=c.length,
k="";if(0<h){k+=c[0];for(e=1;e<f;++e)k+=","+c[e];for(g=d;g<h;g+=d)for(k+=" "+c[g],e=1;e<f;++e)k+=","+c[g+e]}Ud(b,k)})}),ot=P(Y,{outerBoundaryIs:O(dt),innerBoundaryIs:O(dt)}),Kt=P(Y,{color:O(ct)}),It=P(Y,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Jt=P(Y,{IconStyle:O(function(b,c,d){b={node:b};var e={},f=c.ob(),g=c.Jd(),h={href:c.a.l};if(f){h.w=f[0];h.h=f[1];var k=c.Yb(),l=c.Pa();l&&g&&0!==l[0]&&l[1]!==f[1]&&(h.x=l[0],h.y=g[1]-(l[1]+f[1]));k&&0!==k[0]&&k[1]!==f[1]&&(e.hotSpot={x:k[0],qe:"pixels",
y:f[1]-k[1],re:"pixels"})}e.Icon=h;f=c.Ha();1!==f&&(e.scale=f);c=c.s;0!==c&&(e.heading=c);c=xt[d[d.length-1].node.namespaceURI];e=Hd(e,c);Jd(b,zt,Gd,e,d,c)}),LabelStyle:O(function(b,c,d){b={node:b};var e={},f=c.a;f&&(e.color=f.a);(c=c.Ha())&&1!==c&&(e.scale=c);c=At[d[d.length-1].node.namespaceURI];e=Hd(e,c);Jd(b,Bt,Gd,e,d,c)}),LineStyle:O(function(b,c,d){b={node:b};var e=Ct[d[d.length-1].node.namespaceURI];c=Hd({color:c.a,width:c.b},e);Jd(b,Dt,Gd,c,d,e)}),PolyStyle:O(function(b,c,d){Jd({node:b},Kt,
Lt,[c.a],d)})});function yt(b,c,d){return dd(ls[0],"gx:"+d)}function tt(b,c){return dd(c[c.length-1].node.namespaceURI,"Placemark")}function jt(b,c){if(b)return dd(c[c.length-1].node.namespaceURI,ut[b.aa()])}var Lt=Ed("color"),mt=Ed("coordinates"),pt=Ed("innerBoundaryIs"),Ft=Ed("Point"),Gt=Ed("LineString"),ft=Ed("LinearRing"),Ht=Ed("Polygon"),qt=Ed("outerBoundaryIs");(function(){var b={},c={P:b};(function(d){if("object"===typeof b&&"undefined"!==typeof c)c.P=d();else{var e;"undefined"!==typeof window?e=window:"undefined"!==typeof global?e=global:"undefined"!==typeof self?e=self:e=this;e.hk=d()}})(function(){return function e(b,c,h){function k(n,p){if(!c[n]){if(!b[n]){var r="function"==typeof require&&require;if(!p&&r)return r(n,!0);if(l)return l(n,!0);r=Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r;}r=c[n]={P:{}};b[n][0].call(r.P,function(c){var e=
b[n][1][c];return k(e?e:c)},r,r.P,e,b,c,h)}return c[n].P}for(var l="function"==typeof require&&require,n=0;n<h.length;n++)k(h[n]);return k}({1:[function(b,c){function g(b){var c;b&&b.length&&(c=b,b=c.length);b=new Uint8Array(b||0);c&&b.set(c);b.Kf=l.Kf;b.pe=l.pe;b.Gf=l.Gf;b.$f=l.$f;b.ce=l.ce;b.Zf=l.Zf;b.Zd=l.Zd;b.Yf=l.Yf;b.toString=l.toString;b.write=l.write;b.slice=l.slice;b.copy=l.copy;b.sg=!0;return b}function h(b){for(var c=b.length,e=[],f=0,g,h;f<c;f++){g=b.charCodeAt(f);if(55295<g&&57344>g)if(h)if(56320>
g){e.push(239,191,189);h=g;continue}else g=h-55296<<10|g-56320|65536,h=null;else{56319<g||f+1===c?e.push(239,191,189):h=g;continue}else h&&(e.push(239,191,189),h=null);128>g?e.push(g):2048>g?e.push(g>>6|192,g&63|128):65536>g?e.push(g>>12|224,g>>6&63|128,g&63|128):e.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}return e}c.P=g;var k=b("ieee754"),l,n,q;l={Kf:function(b){return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]},pe:function(b,c){this[c]=b;this[c+1]=b>>>8;this[c+2]=b>>>16;this[c+
3]=b>>>24},Gf:function(b){return(this[b]|this[b+1]<<8|this[b+2]<<16)+(this[b+3]<<24)},ce:function(b){return k.read(this,b,!0,23,4)},Zd:function(b){return k.read(this,b,!0,52,8)},Zf:function(b,c){return k.write(this,b,c,!0,23,4)},Yf:function(b,c){return k.write(this,b,c,!0,52,8)},toString:function(b,c,e){var f=b="";e=Math.min(this.length,e||this.length);for(c=c||0;c<e;c++){var g=this[c];127>=g?(b+=decodeURIComponent(f)+String.fromCharCode(g),f=""):f+="%"+g.toString(16)}return b+=decodeURIComponent(f)},
write:function(b,c){for(var e=b===n?q:h(b),f=0;f<e.length;f++)this[c+f]=e[f]},slice:function(b,c){return this.subarray(b,c)},copy:function(b,c){c=c||0;for(var e=0;e<this.length;e++)b[c+e]=this[e]}};l.$f=l.pe;g.byteLength=function(b){n=b;q=h(b);return q.length};g.isBuffer=function(b){return!(!b||!b.sg)}},{ieee754:3}],2:[function(b,c){(function(g){function h(b){this.Na=k.isBuffer(b)?b:new k(b||0);this.F=0;this.length=this.Na.length}c.P=h;var k=g.Jj||b("./buffer");h.c=0;h.f=1;h.a=2;h.b=5;var l=Math.pow(2,
63);h.prototype={be:function(b,c,e){for(e=e||this.length;this.F<e;){var f=this.ba(),g=this.F;b(f>>3,c,this);this.F===g&&this.ij(f)}return c},Vi:function(){var b=this.Na.ce(this.F);this.F+=4;return b},Ti:function(){var b=this.Na.Zd(this.F);this.F+=8;return b},ba:function(){var b=this.Na,c,e,f,g,h;c=b[this.F++];if(128>c)return c;c=c&127;f=b[this.F++];if(128>f)return c|f<<7;f=(f&127)<<7;g=b[this.F++];if(128>g)return c|f|g<<14;g=(g&127)<<14;h=b[this.F++];if(128>h)return c|f|g|h<<21;e=b[this.F++];c=(c|
f|g|(h&127)<<21)+268435456*(e&127);if(128>e)return c;e=b[this.F++];c+=34359738368*(e&127);if(128>e)return c;e=b[this.F++];c+=4398046511104*(e&127);if(128>e)return c;e=b[this.F++];c+=562949953421312*(e&127);if(128>e)return c;e=b[this.F++];c+=72057594037927936*(e&127);if(128>e)return c;e=b[this.F++];c+=0x7fffffffffffffff*(e&127);if(128>e)return c;throw Error("Expected varint not more than 10 bytes");},aj:function(){var b=this.F,c=this.ba();if(c<l)return c;for(var e=this.F-2;255===this.Na[e];)e--;e<
b&&(e=b);for(var f=c=0;f<e-b+1;f++)var g=~this.Na[b+f]&127,c=c+(4>f?g<<7*f:g*Math.pow(2,7*f));return-c-1},de:function(){var b=this.ba();return 1===b%2?(b+1)/-2:b/2},Ri:function(){return!!this.ba()},ee:function(){var b=this.ba()+this.F,c=this.Na.toString("utf8",this.F,b);this.F=b;return c},ij:function(b){b=b&7;if(b===h.c)for(;127<this.Na[this.F++];);else if(b===h.a)this.F=this.ba()+this.F;else if(b===h.b)this.F+=4;else if(b===h.f)this.F+=8;else throw Error("Unimplemented type: "+b);},finish:function(){this.length=
this.F;this.F=0;return this.Na.slice(0,this.length)}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./buffer":1}],3:[function(b,c,g){g.read=function(b,c,e,f,g){var p;p=8*g-f-1;var r=(1<<p)-1,u=r>>1,v=-7;g=e?g-1:0;var z=e?-1:1,x=b[c+g];g+=z;e=x&(1<<-v)-1;x>>=-v;for(v+=p;0<v;e=256*e+b[c+g],g+=z,v-=8);p=e&(1<<-v)-1;e>>=-v;for(v+=f;0<v;p=256*p+b[c+g],g+=z,v-=8);if(0===e)e=1-u;else{if(e===r)return p?NaN:Infinity*(x?-1:1);p+=Math.pow(2,
f);e=e-u}return(x?-1:1)*p*Math.pow(2,e-f)};g.write=function(b,c,e,f,g,p){var r,u=8*p-g-1,v=(1<<u)-1,z=v>>1,x=23===g?Math.pow(2,-24)-Math.pow(2,-77):0;p=f?0:p-1;var C=f?1:-1,H=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);isNaN(c)||Infinity===c?(c=isNaN(c)?1:0,f=v):(f=Math.floor(Math.log(c)/Math.LN2),1>c*(r=Math.pow(2,-f))&&(f--,r*=2),c=1<=f+z?c+x/r:c+x*Math.pow(2,1-z),2<=c*r&&(f++,r/=2),f+z>=v?(c=0,f=v):1<=f+z?(c=(c*r-1)*Math.pow(2,g),f+=z):(c=c*Math.pow(2,z-1)*Math.pow(2,g),f=0));for(;8<=g;b[e+p]=c&255,p+=
C,c/=256,g-=8);f=f<<g|c;for(u+=g;0<u;b[e+p]=f&255,p+=C,f/=256,u-=8);b[e+p-C]|=128*H}},{}]},{},[2])(2)})})();(function(){var b={},c={P:b};(function(d){if("object"===typeof b&&"undefined"!==typeof c)c.P=d();else{var e;"undefined"!==typeof window?e=window:"undefined"!==typeof global?e=global:"undefined"!==typeof self?e=self:e=this;e.lk=d()}})(function(){return function e(b,c,h){function k(n,p){if(!c[n]){if(!b[n]){var r="function"==typeof require&&require;if(!p&&r)return r(n,!0);if(l)return l(n,!0);r=Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r;}r=c[n]={P:{}};b[n][0].call(r.P,function(c){var e=
b[n][1][c];return k(e?e:c)},r,r.P,e,b,c,h)}return c[n].P}for(var l="function"==typeof require&&require,n=0;n<h.length;n++)k(h[n]);return k}({1:[function(b,c){c.P.Xj=b("./lib/vectortile.js");c.P.Yj=b("./lib/vectortilefeature.js");c.P.Zj=b("./lib/vectortilelayer.js")},{"./lib/vectortile.js":2,"./lib/vectortilefeature.js":3,"./lib/vectortilelayer.js":4}],2:[function(b,c){function g(b,c,e){3===b&&(b=new h(e,e.ba()+e.F),b.length&&(c[b.name]=b))}var h=b("./vectortilelayer");c.P=function(b,c){this.layers=
b.be(g,{},c)}},{"./vectortilelayer":4}],3:[function(b,c){function g(b,c,e,f,g){this.properties={};this.extent=e;this.type=0;this.Bb=b;this.xe=-1;this.pc=f;this.rc=g;b.be(h,this,c)}function h(b,c,e){if(1==b)c.ak=e.ba();else if(2==b)for(b=e.ba()+e.F;e.F<b;){var f=c.pc[e.ba()],g=c.rc[e.ba()];c.properties[f]=g}else 3==b?c.type=e.ba():4==b&&(c.xe=e.F)}b("point-geometry");c.P=g;g.a=["Unknown","Point","LineString","Polygon"];g.prototype.bbox=function(){var b=this.Bb;b.F=this.xe;for(var c=b.ba()+b.F,e=1,
f=0,g=0,h=0,u=Infinity,v=-Infinity,z=Infinity,x=-Infinity;b.F<c;)if(f||(f=b.ba(),e=f&7,f=f>>3),f--,1===e||2===e)g+=b.de(),h+=b.de(),g<u&&(u=g),g>v&&(v=g),h<z&&(z=h),h>x&&(x=h);else if(7!==e)throw Error("unknown command "+e);return[u,z,v,x]}},{"point-geometry":5}],4:[function(b,c){function g(b,c){this.version=1;this.name=null;this.extent=4096;this.length=0;this.Bb=b;this.pc=[];this.rc=[];this.oc=[];b.be(h,this,c);this.length=this.oc.length}function h(b,c,e){15===b?c.version=e.ba():1===b?c.name=e.ee():
5===b?c.extent=e.ba():2===b?c.oc.push(e.F):3===b?c.pc.push(e.ee()):4===b&&c.rc.push(k(e))}function k(b){for(var c=null,e=b.ba()+b.F;b.F<e;)c=b.ba()>>3,c=1===c?b.ee():2===c?b.Vi():3===c?b.Ti():4===c?b.aj():5===c?b.ba():6===c?b.de():7===c?b.Ri():null;return c}var l=b("./vectortilefeature.js");c.P=g;g.prototype.feature=function(b){if(0>b||b>=this.oc.length)throw Error("feature index out of bounds");this.Bb.F=this.oc[b];b=this.Bb.ba()+this.Bb.F;return new l(this.Bb,b,this.extent,this.pc,this.rc)}},{"./vectortilefeature.js":3}],
5:[function(b,c){function g(b,c){this.x=b;this.y=c}c.P=g;g.prototype={clone:function(){return new g(this.x,this.y)},rotate:function(b){return this.clone().ug(b)},round:function(){return this.clone().vg()},equals:function(b){return this.x===b.x&&this.y===b.y},dist:function(b){return Math.sqrt(this.Lg(b))},Lg:function(b){var c=b.x-this.x;b=b.y-this.y;return c*c+b*b},angle:function(){return Math.atan2(this.y,this.x)},ug:function(b){var c=Math.cos(b);b=Math.sin(b);var e=b*this.x+c*this.y;this.x=c*this.x-
b*this.y;this.y=e;return this},vg:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this}};g.a=function(b){return b instanceof g?b:Array.isArray(b)?new g(b[0],b[1]):b}},{}]},{},[1])(1)})})();function Mt(b,c){c[c.length-1].jc[b.getAttribute("k")]=b.getAttribute("v")}var Nt=[null],Ot=P(Nt,{nd:function(b,c){c[c.length-1].Nb.push(b.getAttribute("ref"))},tag:Mt});
P(Nt,{node:function(b,c){var d=c[0],e=c[c.length-1],f=b.getAttribute("id"),g=[parseFloat(b.getAttribute("lon")),parseFloat(b.getAttribute("lat"))];e.nodes[f]=g;var h=Q({jc:{}},Pt,b,c);Wa(h.jc)||(g=new Bi(g),ci(g,!1,d),d=new Wh(g),d.c=f,d.b(),d.ka(h.jc),e.features.push(d))},way:function(b,c){for(var d=c[0],e=b.getAttribute("id"),f=Q({Nb:[],jc:{}},Ot,b,c),g=c[c.length-1],h=[],k=0,l=f.Nb.length;k<l;k++)Sc(h,g.nodes[f.Nb[k]]);f.Nb[0]==f.Nb[f.Nb.length-1]?(k=new Ii(null),k.K("XY",h,[h.length])):(k=new ti(null),
k.K("XY",h));ci(k,!1,d);d=new Wh(k);d.c=e;d.b();d.ka(f.jc);g.features.push(d)}});var Pt=P(Nt,{tag:Mt});function Qt(b,c){return Q({},Rt,b,c)}function St(b,c){return Q({},Tt,b,c)}function Ut(b,c){var d=Qt(b,c);if(d){var e=[Sd(b.getAttribute("width")),Sd(b.getAttribute("height"))];d.size=e;return d}}function Vt(b,c){return Q([],Wt,b,c)}var Xt=[null,"http://www.opengis.net/wms"];P(Xt,{Service:N(function(b,c){return Q({},Yt,b,c)}),Capability:N(function(b,c){return Q({},Zt,b,c)})});
var Zt=P(Xt,{Request:N(function(b,c){return Q({},$t,b,c)}),Exception:N(function(b,c){return Q([],au,b,c)}),Layer:N(function(b,c){return Q({},bu,b,c)})}),Yt=P(Xt,{Name:N(S),Title:N(S),Abstract:N(S),KeywordList:N(Vt),OnlineResource:N(Vb),ContactInformation:N(function(b,c){return Q({},cu,b,c)}),Fees:N(S),AccessConstraints:N(S),LayerLimit:N(Rd),MaxWidth:N(Rd),MaxHeight:N(Rd)}),cu=P(Xt,{ContactPersonPrimary:N(function(b,c){return Q({},du,b,c)}),ContactPosition:N(S),ContactAddress:N(function(b,c){return Q({},
eu,b,c)}),ContactVoiceTelephone:N(S),ContactFacsimileTelephone:N(S),ContactElectronicMailAddress:N(S)}),du=P(Xt,{ContactPerson:N(S),ContactOrganization:N(S)}),eu=P(Xt,{AddressType:N(S),Address:N(S),City:N(S),StateOrProvince:N(S),PostCode:N(S),Country:N(S)}),au=P(Xt,{Format:Ad(S)}),bu=P(Xt,{Name:N(S),Title:N(S),Abstract:N(S),KeywordList:N(Vt),CRS:Cd(S),EX_GeographicBoundingBox:N(function(b,c){var d=Q({},fu,b,c);if(d){var e=d.westBoundLongitude,f=d.southBoundLatitude,g=d.eastBoundLongitude,d=d.northBoundLatitude;
return void 0===e||void 0===f||void 0===g||void 0===d?void 0:[e,f,g,d]}}),BoundingBox:Cd(function(b){var c=[Qd(b.getAttribute("minx")),Qd(b.getAttribute("miny")),Qd(b.getAttribute("maxx")),Qd(b.getAttribute("maxy"))],d=[Qd(b.getAttribute("resx")),Qd(b.getAttribute("resy"))];return{crs:b.getAttribute("CRS"),extent:c,res:d}}),Dimension:Cd(function(b){return{name:b.getAttribute("name"),units:b.getAttribute("units"),unitSymbol:b.getAttribute("unitSymbol"),"default":b.getAttribute("default"),multipleValues:Nd(b.getAttribute("multipleValues")),
nearestValue:Nd(b.getAttribute("nearestValue")),current:Nd(b.getAttribute("current")),values:S(b)}}),Attribution:N(function(b,c){return Q({},gu,b,c)}),AuthorityURL:Cd(function(b,c){var d=Qt(b,c);if(d)return d.name=b.getAttribute("name"),d}),Identifier:Cd(S),MetadataURL:Cd(function(b,c){var d=Qt(b,c);if(d)return d.type=b.getAttribute("type"),d}),DataURL:Cd(Qt),FeatureListURL:Cd(Qt),Style:Cd(function(b,c){return Q({},hu,b,c)}),MinScaleDenominator:N(Pd),MaxScaleDenominator:N(Pd),Layer:Cd(function(b,
c){var d=c[c.length-1],e=Q({},bu,b,c);if(e){var f=Nd(b.getAttribute("queryable"));void 0===f&&(f=d.queryable);e.queryable=void 0!==f?f:!1;f=Sd(b.getAttribute("cascaded"));void 0===f&&(f=d.cascaded);e.cascaded=f;f=Nd(b.getAttribute("opaque"));void 0===f&&(f=d.opaque);e.opaque=void 0!==f?f:!1;f=Nd(b.getAttribute("noSubsets"));void 0===f&&(f=d.noSubsets);e.noSubsets=void 0!==f?f:!1;(f=Qd(b.getAttribute("fixedWidth")))||(f=d.fixedWidth);e.fixedWidth=f;(f=Qd(b.getAttribute("fixedHeight")))||(f=d.fixedHeight);
e.fixedHeight=f;["Style","CRS","AuthorityURL"].forEach(function(b){b in d&&(e[b]=(e[b]||[]).concat(d[b]))});"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(b){b in e||(e[b]=d[b])});return e}})}),gu=P(Xt,{Title:N(S),OnlineResource:N(Vb),LogoURL:N(Ut)}),fu=P(Xt,{westBoundLongitude:N(Pd),eastBoundLongitude:N(Pd),southBoundLatitude:N(Pd),northBoundLatitude:N(Pd)}),$t=P(Xt,{GetCapabilities:N(St),GetMap:N(St),GetFeatureInfo:N(St)}),
Tt=P(Xt,{Format:Cd(S),DCPType:Cd(function(b,c){return Q({},iu,b,c)})}),iu=P(Xt,{HTTP:N(function(b,c){return Q({},ju,b,c)})}),ju=P(Xt,{Get:N(Qt),Post:N(Qt)}),hu=P(Xt,{Name:N(S),Title:N(S),Abstract:N(S),LegendURL:Cd(Ut),StyleSheetURL:N(Qt),StyleURL:N(Qt)}),Rt=P(Xt,{Format:N(S),OnlineResource:N(Vb)}),Wt=P(Xt,{Keyword:Ad(S)});(function(){var b={},c={P:b};(function(d){if("object"===typeof b&&"undefined"!==typeof c)c.P=d();else{var e;"undefined"!==typeof window?e=window:"undefined"!==typeof global?e=global:"undefined"!==typeof self?e=self:e=this;e.ik=d()}})(function(){return function e(b,c,h){function k(n,p){if(!c[n]){if(!b[n]){var r="function"==typeof require&&require;if(!p&&r)return r(n,!0);if(l)return l(n,!0);r=Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r;}r=c[n]={P:{}};b[n][0].call(r.P,function(c){var e=
b[n][1][c];return k(e?e:c)},r,r.P,e,b,c,h)}return c[n].P}for(var l="function"==typeof require&&require,n=0;n<h.length;n++)k(h[n]);return k}({1:[function(b,c,g){b=b("./processor");g.Vj=b},{"./processor":2}],2:[function(b,c){function g(b){return function(c){var e=c.buffers,f=c.meta,g=c.width,h=c.height,k=e.length,l=e[0].byteLength,C;if(c.imageOps){l=Array(k);for(C=0;C<k;++C)l[C]=new ImageData(new Uint8ClampedArray(e[C]),g,h);g=b(l,f).data}else{g=new Uint8ClampedArray(l);h=Array(k);c=Array(k);for(C=
0;C<k;++C)h[C]=new Uint8ClampedArray(e[C]),c[C]=[0,0,0,0];for(e=0;e<l;e+=4){for(C=0;C<k;++C){var H=h[C];c[C][0]=H[e];c[C][1]=H[e+1];c[C][2]=H[e+2];c[C][3]=H[e+3]}C=b(c,f);g[e]=C[0];g[e+1]=C[1];g[e+2]=C[2];g[e+3]=C[3]}}return g.buffer}}function h(b,c){var e=Object.keys(b.Th||{}).map(function(c){return"var "+c+" = "+b.Th[c].toString()+";"}).concat(["var __minion__ = ("+g.toString()+")(",b.Di.toString(),");",'self.addEventListener("message", function(__event__) {',"var buffer = __minion__(__event__.data);",
"self.postMessage({buffer: buffer, meta: __event__.data.meta}, [buffer]);","});"]),e=URL.createObjectURL(new Blob(e,{type:"text/javascript"})),e=new Worker(e);e.addEventListener("message",c);return e}function k(b,c){var e=g(b.Di);return{postMessage:function(b){setTimeout(function(){c({data:{buffer:e(b),Ud:b.Ud}})},0)}}}function l(b){this.fd=!!b.gk;var c;0===b.nj?c=0:this.fd?c=1:c=b.nj||1;var e=[];if(c)for(var f=0;f<c;++f)e[f]=h(b,this.Ae.bind(this,f));else e[0]=k(b,this.Ae.bind(this,0));this.sc=e;
this.Be=[];this.qc=0;this.Ab={};this.gd=null}l.prototype.qg=function(){if(0===this.qc&&0<this.Be.length){var b=this.gd=this.Be.shift(),c=b.Lb[0].width,e=b.Lb[0].height,f=b.Lb.map(function(b){return b.data.buffer}),g=this.sc.length;this.qc=g;if(1===g)this.sc[0].postMessage({buffers:f,meta:b.Ud,imageOps:this.fd,width:c,height:e},f);else for(var h=4*Math.ceil(b.Lb[0].data.length/4/g),k=0;k<g;++k){for(var l=k*h,C=[],H=0,E=f.length;H<E;++H)C.push(f[k].slice(l,l+h));this.sc[k].postMessage({buffers:C,meta:b.Ud,
imageOps:this.fd,width:c,height:e},C)}}};l.prototype.Ae=function(b,c){this.$j||(this.Ab[b]=c.data,--this.qc,0===this.qc&&this.tg())};l.prototype.tg=function(){var b=this.gd,c=this.sc.length,e,f;if(1===c)e=new Uint8ClampedArray(this.Ab[0].buffer),f=this.Ab[0].meta;else{var g=b.Lb[0].data.length;e=new Uint8ClampedArray(g);f=Array(g);for(var g=4*Math.ceil(g/4/c),h=0;h<c;++h){var k=h*g;e.set(new Uint8ClampedArray(this.Ab[h].buffer),k);f[h]=this.Ab[h].meta}}this.gd=null;this.Ab={};b.dk(null,new ImageData(e,
b.Lb[0].width,b.Lb[0].height),f);this.qg()};c.P=l},{}]},{},[1])(1)})})();function ku(b){function c(b){b.each(function(b){function f(){var b=d3.mouse(this)[0],b=v.invert(b);c.highlight(b)}function g(){c.Oe()}if(void 0===b)d3.select(this).selectAll("svg").remove();else{E=Math.max(this.clientWidth-e.right-e.left,0);v=d3.scale.linear().range([0,E]);H=Math.max(this.clientHeight-e.top-e.bottom,0);z=d3.scale.linear().range([H,0]);var k=d3.svg.axis().scale(v).orient("bottom"),l=d3.svg.axis().scale(z).orient("left"),q=d3.svg.area().x(function(b){return v(h.dist(b))}).y0(H).y1(function(b){return z(h.z(b))}),
M=d3.svg.line().x(function(b){return v(h.dist(b))}).y(function(b){return z(h.z(b))});u=d3.select(this).selectAll("svg").data([b]);var ja=u.enter().append("svg");void 0!==n&&ja.append("defs").append("style").attr("type","text/css").text(n);ja=ja.append("g");c.Qf([]);ja.style("font","11px Arial");ja.append("path").attr("class","area").style("fill","rgba(222, 222, 222, 0.5)");ja.append("path").attr("class","line").style("stroke","#F00").style("fill","none");ja.insert("g",":first-child").attr("class",
"grid-y");d||(ja.append("g").attr("class","x axis").attr("transform","translate(0,"+H+")"),ja.append("text").attr("class","x label").attr("text-anchor","end").attr("x",E-4).attr("y",H-4),ja.append("g").attr("class","y axis"),ja.append("text").attr("class","y label").attr("text-anchor","end").attr("y",6).attr("dy",".75em").attr("transform","rotate(-90)").style("fill","grey").text("elevation (m)"),ja.append("g").attr("class","metas").attr("transform","translate("+(E+3)+", 0)"));ja.append("g").attr("class",
"pois");var Cb=ja.append("g").attr("class","y grid-hover");Cb.append("svg:line").attr("stroke-dasharray","5,5");Cb.append("text");Cb=ja.append("g").attr("class","x grid-hover");Cb.append("svg:line").attr("stroke-dasharray","5,5");Cb.append("text");ja.append("rect").attr("class","overlay").attr("width",E).attr("height",H).style("fill","none").style("pointer-events","all");u.attr("width",E+e.left+e.right).attr("height",H+e.top+e.bottom);C=u.select("g").attr("transform","translate("+e.left+","+e.top+
")");F=d3.extent(b,function(b){return h.dist(b)});v.domain(F);b=d3.extent(b,function(b){return h.z(b)});z.domain(b);void 0!==x?x(v,z,E,H):(ja=.1*(b[1]-b[0]),z.domain([b[0]-ja,b[1]+ja]));C.select(".area").transition().attr("d",q);C.select(".line").transition().attr("d",M);2E3<F[1]?(D=1E3,R="km"):(D=1,R="m");d||(k.tickFormat(function(b){return p.xtick(b/D,R)}),r&&k.tickValues([0,v.domain()[1]]),l.tickFormat(function(b){return p.ytick(b,"m")}),C.select(".x.axis").transition().call(k),C.select(".x.label").text("distance ("+
R+")").style("fill","grey").style("shape-rendering","crispEdges"),10>H/15&&l.ticks(H/15),C.select(".y.axis").transition().call(l));C.select(".grid-y").transition().call(l.tickSize(-E,0).tickFormat("")).selectAll(".tick line").style("stroke","#ccc").style("opacity",.7);C.selectAll(".axis").selectAll("path, line").style("fill","none").style("stroke","#000").style("shape-rendering","crispEdges");C.selectAll(".grid-hover line").style("stroke","#222").style("opacity",.8);C.select(".overlay").on("mouseout",
g).on("mousemove",f)}})}var d=void 0!==b.light?b.light:!1,e=d?{top:0,right:0,bottom:0,left:0}:{top:10,right:20,bottom:30,left:40},f=void 0!==b.hoverCallback?b.hoverCallback:ca,g=void 0!==b.outCallback?b.outCallback:ca,h=b.elevationExtractor,k=d3.bisector(function(b){return h.dist(b)}).left,l=b.poiExtractor,n=b.styleDefs,q=void 0!==b.poiLabelAngle?b.poiLabelAngle:-60,p={xhover:function(b,c){return parseFloat(b.toPrecision(3))+" "+c},yhover:function(b){return Math.round(b)+" m"},xtick:function(b){return b},
ytick:function(b){return b}};void 0!==b.formatter&&ec(p,b.formatter);var r=void 0!==b.lightXAxis?b.lightXAxis:!1,u,v,z,x=b.scaleModifier,C,H,E,D,R,F;c.Oe=function(){C.selectAll(".grid-hover").style("display","none");g.call(null)};c.highlight=function(b){var c=u.datum();b=k(c,b);if(!(b>=c.length)){c=c[b];b=h.z(c);var d=h.dist(c);C.select(".x.grid-hover").style("display","inline").select("line").attr("x1",v(d)).attr("y1",H).attr("x2",v(d)).attr("y2",z(b));C.select(".y.grid-hover").style("display","inline").select("line").attr("x1",
v(0)).attr("y1",z(b)).attr("x2",E).attr("y2",z(b));var e=d>F[1]/2,g=v(d),g=g+(e?-10:10);C.select(".x.grid-hover text").text(p.xhover(d/D,R)).style("text-anchor",e?"end":"start").attr("transform","translate("+g+","+(H-10)+")");C.select(".y.grid-hover text").text(p.yhover(b,"m")).style("text-anchor",e?"end":"start").attr("transform","translate("+g+","+(z(b)-10)+")");f.call(null,c,d/D,R,b,"m")}};c.Qf=function(b){b=void 0!==b?b:[];var c=u.select("g"),e=u.datum();b=c.select(".pois").selectAll(".poi").data(b,
function(b){var c=k(e,Math.round(10*l.dist(b))/10,1);if(c=e[c])c=h.z(c),l.z(b,c);return l.id(b)});c=b.enter().append("g").attr("class","poi");c.append("text").attr("x",d?0:9).attr("dy",".35em").attr("text-anchor",d?"middle":"start");c.append("line").style("shape-rendering","crispEdges");b.style("opacity",0).transition().duration(1E3).delay(100).style("opacity",1);b.selectAll("text").attr("transform",function(b){return d?["translate(",v(l.dist(b)),",",z(l.z(b))-10,")"].join(""):["translate(",v(l.dist(b)),
",",z(l.z(b))-20,") rotate(",q,")"].join("")}).text(function(b){return l.sort(b)+(d?"":" - "+l.title(b))});b.selectAll("line").style("stroke","grey").attr("x1",function(b){return v(l.dist(b))}).attr("y1",function(){return z(z.domain()[0])}).attr("x2",function(b){return v(l.dist(b))}).attr("y2",function(b){return z(l.z(b))});b.exit().remove()};return c}sa("ngeo.profile",ku);A.directive("ngeoControl",function(){return{restrict:"A",link:function(b,c,d){var e=b.$eval(d.ngeoControl);b=b.$eval(d.ngeoControlMap);e.A=zc(c[0]);b.A.push(e)}}});sa("ngeo.DesktopGeolocationEventType",{ERROR:"desktop-geolocation-error"});A.directive("ngeoDesktopGeolocation",function(){return{restrict:"A",scope:{getDesktopMapFn:"&ngeoDesktopGeolocationMap",getDesktopGeolocationOptionsFn:"&ngeoDesktopGeolocationOptions"},controller:"NgeoDesktopGeolocationController",controllerAs:"ctrl"}});
function lu(b,c,d,e){c.on("click",this.toggle.bind(this));this.c=c=b.getDesktopMapFn();var f=b.getDesktopGeolocationOptionsFn()||{};this.i=b;this.b=Lj(e);this.da=new Gr({projection:U(c).X()});this.da.on("error",function(c){mu(this);b.$emit("desktop-geolocation-error",c)},this);this.f=new Wh;f.positionFeatureStyle&&Zh(this.f,f.positionFeatureStyle);this.fb=new Wh;f.accuracyFeatureStyle&&Zh(this.fb,f.accuracyFeatureStyle);this.g=f.zoom;this.a=!1;I(this.da,L("accuracyGeometry"),function(){Xh(this.fb,
this.da.get("accuracyGeometry")||null)},this);I(this.da,L("position"),function(b){this.ie(b)},this);d(this.da)}sa("ngeo.DesktopGeolocationController",lu);lu.$inject=["$scope","$element","ngeoDecorateGeolocation","ngeoFeatureOverlayMgr"];lu.prototype.toggle=function(){this.a?mu(this):(this.b.ia(this.f),this.b.ia(this.fb),Fr(this.da,!0),this.a=!0)};lu.prototype.toggle=lu.prototype.toggle;function mu(b){b.b.clear();b.a=!1}
lu.prototype.ie=function(){var b=this.da.get("position");if(void 0===b)mu(this),this.i.$emit("desktop-geolocation-error",null);else{var c=new Bi(b);Xh(this.f,c);bm(U(this.c),b);void 0!==this.g&&em(U(this.c),this.g);Fr(this.da,!1)}};A.controller("NgeoDesktopGeolocationController",lu);function nu(b){return{restrict:"A",scope:{fileContent:"=ngeoFilereader",supported:"=?ngeoFilereaderSupported"},link:function(c,d){var e="FileReader"in b;(c.supported=e)&&d.bind("change",function(d){var e=new b.FileReader;e.onload=function(b){c.$apply(function(){c.fileContent=b.target.result})};e.readAsText(d.target.files[0])})}}}nu.$inject=["$window"];A.directive("ngeoFilereader",nu);A.directive("ngeoProfile",function(){return{restrict:"A",link:function(b,c,d){function e(){void 0!==h&&(g.datum(k).call(h),void 0!==k&&h.Qf(l))}var f=d.ngeoProfileOptions,g=d3.select(c[0]),h,k,l;b.$watchCollection(f,function(c){c=cc(c);if(void 0!==c){if(void 0!==c.hoverCallback){var d=c.hoverCallback;c.hoverCallback=function(){d.apply(null,arguments);b.$applyAsync()}}if(void 0!==c.outCallback){var f=c.outCallback;c.outCallback=function(){f();b.$applyAsync()}}h=ku(c);e()}});b.$watch(d.ngeoProfile,
function(b){k=b;e()});b.$watch(d.ngeoProfilePois,function(b){l=b;e()});b.$watch(d.ngeoProfileHighlight,function(b){void 0!==b&&(0<b?h.highlight(b):h.Oe())})}}});A.directive("ngeoRecenter",function(){return{restrict:"A",link:function(b,c,d){function e(c){var d=c.attr("ngeo-extent");if(void 0!==d){var e=Rm(f);am(U(f),b.$eval(d),e)}c=c.attr("ngeo-zoom");void 0!==c&&em(U(f),b.$eval(c))}var f=b.$eval(d.ngeoRecenterMap);c.on("click",function(b){e(angular.element(b.target))});c.on("change",function(b){e(angular.element(b.target.options[b.target.selectedIndex]))})}}});A.value("ngeoScaleselectorTemplateUrl",function(b,c){var d=c.ngeoScaleselectorTemplateurl;return void 0!==d?d:"ngeo/scaleselector.html"});function ou(b){return{restrict:"A",scope:!0,controller:"NgeoScaleselectorController",templateUrl:b}}ou.$inject=["ngeoScaleselectorTemplateUrl"];A.directive("ngeoScaleselector",ou);
function pu(b,c,d){this.scales=b.$eval(d.ngeoScaleselector);c=Object.keys(this.scales).map(Number);c.sort();this.zoomLevels=c;this.a=b.$eval(d.ngeoScaleselectorMap);d=b.$eval(d.ngeoScaleselectorOptions);void 0===d?d={dropup:!1}:void 0===d.dropup&&(d.dropup=!1);this.options=d;this.c=b;this.b=null;this.currentScale=void 0;null!==U(this.a)&&(d=$l(U(this.a)),void 0!==d&&(this.currentScale=this.Ha(d)));I(this.a,L("view"),this.g,this);qu(this);b.scaleselectorCtrl=this}
sa("ngeo.ScaleselectorController",pu);pu.$inject=["$scope","$element","$attrs"];pu.prototype.Ha=function(b){return this.scales[b.toString()]};pu.prototype.getScale=pu.prototype.Ha;pu.prototype.Eg=function(b){em(U(this.a),b)};pu.prototype.changeZoom=pu.prototype.Eg;pu.prototype.f=function(){var b=U(this.a),c=this.scales[$l(b).toString()];this.c.$applyAsync(function(){this.currentScale=c}.bind(this))};pu.prototype.g=function(){qu(this)};
function qu(b){null!==b.b&&G(b.b);var c=U(b.a);b.b=I(c,L("resolution"),b.f,b)}A.controller("NgeoScaleselectorController",pu);function ru(b){db.call(this);this.b=b;this.a={}}y(ru,db);var su=[];ru.prototype.Aa=function(b,c,d,e){ea(c)||(c&&(su[0]=c.toString()),c=su);for(var f=0;f<c.length;f++){var g=Ro(b,c[f],d||this.handleEvent,e||!1,this.b||this);if(!g)break;this.a[g.key]=g}return this};
ru.prototype.Qb=function(b,c,d,e,f){if(ea(c))for(var g=0;g<c.length;g++)this.Qb(b,c[g],d,e,f);else d=d||this.handleEvent,f=f||this.b||this,d=So(d),e=!!e,c=b&&b[Fo]?No(b.g,String(c),d,e,f):b?(b=To(b))?No(b,c,d,e,f):null:null,c&&(Yo(c),delete this.a[c.key]);return this};function tu(b){$b(b.a,function(b,d){this.a.hasOwnProperty(d)&&Yo(b)},b);b.a={}}ru.prototype.L=function(){ru.U.L.call(this);tu(this)};ru.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function uu(){db.call(this);this.g=new Jo(this);this.V=this;this.N=null}y(uu,db);uu.prototype[Fo]=!0;m=uu.prototype;m.removeEventListener=function(b,c,d,e){Xo(this,b,c,d,e)};
m.B=function(b){var c,d=this.N;if(d)for(c=[];d;d=d.N)c.push(d);var d=this.V,e=b.type||b;if(ga(b))b=new Co(b,d);else if(b instanceof Co)b.target=b.target||d;else{var f=b;b=new Co(e,d);ec(b,f)}var f=!0,g;if(c)for(var h=c.length-1;!b.f&&0<=h;h--)g=b.a=c[h],f=vu(g,e,!0,b)&&f;b.f||(g=b.a=d,f=vu(g,e,!0,b)&&f,b.f||(f=vu(g,e,!1,b)&&f));if(c)for(h=0;!b.f&&h<c.length;h++)g=b.a=c[h],f=vu(g,e,!1,b)&&f;return f};
m.L=function(){uu.U.L.call(this);if(this.g){var b=this.g,c=0,d;for(d in b.listeners){for(var e=b.listeners[d],f=0;f<e.length;f++)++c,Io(e[f]);delete b.listeners[d];b.a--}}this.N=null};m.Aa=function(b,c,d,e){return Ko(this.g,String(b),c,d,e)};m.Qb=function(b,c,d,e){return this.g.remove(String(b),c,d,e)};
function vu(b,c,d,e){c=b.g.listeners[String(c)];if(!c)return!0;c=c.concat();for(var f=!0,g=0;g<c.length;++g){var h=c[g];if(h&&!h.Ob&&h.wc==d){var k=h.listener,l=h.Jc||h.src;h.hb&&Mo(b.g,h);f=!1!==k.call(l,e)&&f}}return f&&0!=e.Of};function wu(b,c,d){uu.call(this);this.target=b;this.handle=c||b;this.l=d||new Qj(NaN,NaN,NaN,NaN);this.i=yc(b);this.a=new ru(this);gb(this,qa(hb,this.a));this.c=this.f=this.v=this.s=this.screenY=this.screenX=this.clientY=this.clientX=0;this.b=!1;this.j=0;Ro(this.handle,["touchstart","mousedown"],this.ke,!1,this)}y(wu,uu);var xu=t.document&&t.document.documentElement&&!!t.document.documentElement.setCapture;m=wu.prototype;
m.L=function(){wu.U.L.call(this);Xo(this.handle,["touchstart","mousedown"],this.ke,!1,this);tu(this.a);xu&&this.i.releaseCapture();this.handle=this.target=null};
m.ke=function(b){var c="mousedown"==b.type;if(this.b||c&&(!(zo?0==b.b.button:"click"==b.type||b.b.button&Eo[0])||jc&&kc&&b.c))this.B("earlycancel");else{if(0==this.j)if(this.B(new yu("start",this,b.clientX,b.clientY)))this.b=!0,b.preventDefault();else return;else b.preventDefault();var c=this.i,d=c.documentElement,e=!xu;this.a.Aa(c,["touchmove","mousemove"],this.th,e);this.a.Aa(c,["touchend","mouseup"],this.zc,e);xu?(d.setCapture(!1),this.a.Aa(d,"losecapture",this.zc)):this.a.Aa(c?c.parentWindow||
c.defaultView:window,"blur",this.zc);this.A&&this.a.Aa(this.A,"scroll",this.Ci,e);this.clientX=this.s=b.clientX;this.clientY=this.v=b.clientY;this.screenX=b.screenX;this.screenY=b.screenY;this.f=this.target.offsetLeft;this.c=this.target.offsetTop;this.u=Mc(wc(this.i))}};m.zc=function(b){tu(this.a);xu&&this.i.releaseCapture();this.b?(this.b=!1,this.B(new yu("end",this,b.clientX,b.clientY,0,zu(this,this.f),Au(this,this.c)))):this.B("earlycancel")};
m.th=function(b){var c=1*(b.clientX-this.clientX),d=b.clientY-this.clientY;this.clientX=b.clientX;this.clientY=b.clientY;this.screenX=b.screenX;this.screenY=b.screenY;if(!this.b){var e=this.s-this.clientX,f=this.v-this.clientY;if(e*e+f*f>this.j)if(this.B(new yu("start",this,b.clientX,b.clientY)))this.b=!0;else{this.Z||this.zc(b);return}}d=Bu(this,c,d);c=d.x;d=d.y;this.b&&this.B(new yu("beforedrag",this,b.clientX,b.clientY,0,c,d))&&(Cu(this,b,c,d),b.preventDefault())};
function Bu(b,c,d){var e=Mc(wc(b.i));c+=e.x-b.u.x;d+=e.y-b.u.y;b.u=e;b.f+=c;b.c+=d;return new uc(zu(b,b.f),Au(b,b.c))}m.Ci=function(b){var c=Bu(this,0,0);b.clientX=this.clientX;b.clientY=this.clientY;Cu(this,b,c.x,c.y)};function Cu(b,c,d,e){b.target.style.left=d+"px";b.target.style.top=e+"px";b.B(new yu("drag",b,c.clientX,c.clientY,0,d,e))}function zu(b,c){var d=b.l,e=isNaN(d.left)?null:d.left,d=isNaN(d.width)?0:d.width;return Math.min(null!=e?e+d:Infinity,Math.max(null!=e?e:-Infinity,c))}
function Au(b,c){var d=b.l,e=isNaN(d.top)?null:d.top,d=isNaN(d.height)?0:d.height;return Math.min(null!=e?e+d:Infinity,Math.max(null!=e?e:-Infinity,c))}function yu(b,c,d,e,f,g,h){Co.call(this,b);this.clientX=d;this.clientY=e;this.left=ba(g)?g:c.f;this.top=ba(h)?h:c.c}y(yu,Co);function Du(){uu.call(this);this.f=[];this.i=[];this.s={};this.j=new ru(this);this.I=!1}y(Du,uu);function Eu(b,c){c.b=0;c.a=void 0;b.f.push(c)}function Fu(b,c){b.Ve=c}function Gu(b){if(!b.I){for(var c=0,d=b.f.length;c<d;c++)for(var e=Jc(b.f[c]),f=0,g=e.length;f<g;++f){var h=b,k=e[f],l=h.Ve(k),n=w(l);h.s[n]=k;h.C&&(h.j.Aa(k,"mouseover",h.gh),h.j.Aa(k,"mouseout",h.fh));h.A&&(h.j.Aa(l,"mouseover",h.eh),h.j.Aa(l,"mouseout",h.dh));h.i.push(k);h.j.Aa(l,["mousedown","touchstart"],h.zh)}b.I=!0}}m=Du.prototype;
m.L=function(){this.j.Db();for(var b=0,c=this.f.length;b<c;b++){var d=this.f[b];d.b=void 0;d.a=void 0}this.f.length=0;this.i.length=0;this.s=null;Hu(this);Du.U.L.call(this)};function Iu(b,c){for(var d=0,e=b.f.length;d<e;d++){var f=b.f[d];f.Eb=Yj(f)}d=0;for(e=b.i.length;d<e;d++)f=b.i[d],f!=c&&(f.Eb=Yj(f))}
m.zh=function(b){var c=w(b.a);this.a=this.s[c];a:{for(var c=this.a,d=c.cloneNode(!0),e=c.getElementsByTagName("TEXTAREA"),f=d.getElementsByTagName("TEXTAREA"),g=0;g<e.length;g++)f[g].value=e[g].value;switch(c.tagName){case "TR":c=Ec("TABLE",null,Ec("TBODY",null,d));break a;case "TD":case "TH":c=Ec("TABLE",null,Ec("TBODY",null,Ec("TR",null,d)));break a;case "TEXTAREA":d.value=c.value;default:c=d}}this.b=c;this.D&&vk(this.b,this.D||[]);this.b.style.margin="0";this.b.style.position="absolute";this.b.style.visibility=
"hidden";yc(this.a).body.appendChild(this.b);var d=Uj(this.a),c=this.b,e=d,h,d=Uj(c);e instanceof uc&&(h=e.y,e=e.x);f=c.offsetLeft+(e-d.x);f instanceof uc?(e=f.x,h=f.y):(e=f,h=c.offsetTop+(Number(h)-d.y));c.style.left=Vj(e);c.style.top=Vj(h);this.c=new wu(this.b);this.c.j=Math.pow(0,2);Ro(this.c,"start",this.ih,!1,this);Ro(this.c,"end",this.bh,!1,this);Ro(this.c,"earlycancel",this.rd,!1,this);this.c.ke(b)};
m.ih=function(b){this.B(new Ju("beforedragstart",0,0,this.a))?(this.v=this.a.parentNode,this.O=Kc(this.a),this.l=this.v,this.u?vk(this.a,this.u||[]):this.a.style.visibility="hidden",b=Wj(this.b),this.b.c=b.width/2,this.b.f=b.height/2,this.b.style.visibility="",this.a.style.display="none",Iu(this,this.a),this.a.style.display="",Ro(this.c,"drag",this.hh,!1,this),this.B(new Ju("dragstart",0,0,this.a))):(b.preventDefault(),this.rd())};
m.hh=function(){var b=Uj(this.b),b=new uc(b.x+this.b.c,b.y+this.b.f),c;a:{c=null;if("none"!=this.a.style.display){c=this.a.parentNode;var d=Yj(c);if(Ku(b,d))break a}for(var d=0,e=this.f.length;d<e;d++){var f=this.f[d];if(f!=c&&Ku(b,f.Eb)){c=f;break a}}c=null}var g;if(c){if(null==c)throw Error("getHoverNextItem_ called with null hoverList.");var h,k,d=!1,e=void 0;switch(c.b){case 0:g=b.y;h=Lu;k=Mu;break;case 4:d=!0;case 2:g=b.x;h=Nu;k=Mu;break;case 5:d=!0;case 3:g=b.x,h=Ou,k=Pu}for(var f=null,l,n=
Jc(c),q=0,p=n.length;q<p;q++){var r=n[q];if(r!=this.a){var u=h(r.Eb);if(d){var v=Qu(r,b);ba(e)||(e=v);k(g,u)&&(void 0==l||v<e||v==e&&(k(u,l)||u==l))&&(f=r,l=u);v<e&&(e=v)}else k(g,u)&&(void 0==l||k(u,l))&&(f=r,l=u)}}g=null!==f&&Qu(f,b)>e?null:f}else g=null;if(!this.B(new Ju("beforedragmove",0,0,this.a,0,0,0,c,g)))return!1;if(c)this.a.parentNode==c&&Kc(this.a)==g||c.insertBefore(this.a,g),this.a.style.display="",c.a&&uk(c,c.a);else for(this.a.style.display="none",h=0,k=this.f.length;h<k;h++)l=this.f[h],
l.a&&wk(l,l.a);c!=this.l&&(this.l=c,Iu(this,this.a));this.B(new Ju("dragmove",0,0,this.a,0,0,0,c,g));return!1};m.rd=function(){Hu(this);this.c=this.b=this.O=this.v=this.l=this.a=null;for(var b=0,c=this.f.length;b<c;b++)this.f[b].Eb=null;b=0;for(c=this.i.length;b<c;b++)this.i[b].Eb=null};m.bh=function(){if(!this.B(new Ju("beforedragend",0,0,this.a)))return!1;Hu(this);this.B(new Ju("dragend",0,0,this.a));this.rd();return!0};
function Hu(b){hb(b.c);b.b&&Ic(b.b);b.a&&"none"==b.a.style.display&&(b.v.insertBefore(b.a,b.O),b.a.style.display="");b.u&&b.a?xk(b.a,b.u||[]):b.a&&(b.a.style.visibility="");for(var c=0,d=b.f.length;c<d;c++){var e=b.f[c];e.a&&wk(e,e.a)}}m.Ve=function(b){return b};m.gh=function(b){vk(b.a,this.C||[])};m.fh=function(b){xk(b.a,this.C||[])};m.eh=function(b){vk(b.a,this.A||[])};m.dh=function(b){xk(b.a,this.A||[])};function Ku(b,c){return b.x>c.left&&b.x<c.left+c.width&&b.y>c.top&&b.y<c.top+c.height}
function Qu(b,c){var d=b.Eb;return Math.abs(c.y-(d.top+(d.height-1)/2))}function Lu(b){return b.top+b.height-1}function Nu(b){return b.left+b.width-1}function Ou(b){return b.left||0}function Mu(b,c){return b<c}function Pu(b,c){return b>c}function Ju(b,c,d,e,f,g,h,k,l){Co.call(this,b);this.Hg=e;this.Jh=k;this.Kh=l}y(Ju,Co);function Ru(){return{restrict:"A",link:function(b,c,d){function e(){for(var d=c.children(),e=0;e<d.length;++e)angular.element(d[e]).data("idx",e);null!==h&&h.Db();h=new Du;Eu(h,c[0]);Fu(h,function(b){return Ac(g.handleClassName,b)});void 0!==g.draggerClassName&&(h.D=va(g.draggerClassName).split(" "));var n=-1,q=null;Ro(h,"dragstart",function(){n=-1;q=null});Ro(h,"dragmove",function(b){var c=b.Kh;n=null===c?-1:angular.element(c).data("idx");q=b.Jh});Ro(h,"dragend",function(c){var d=angular.element(c.Hg).data("idx");
-1!=n?n!=d&&(n>d&&n--,b.$apply(function(){f.splice(n,0,f.splice(d,1)[0])})):null!==q&&b.$apply(function(){f.push(f.splice(d,1)[0])})});Gu(h)}var f=b.$eval(d.ngeoSortable),g=function(b){void 0===b?b={handleClassName:"handle"}:void 0===b.handleClassName&&(b.handleClassName="handle");return b}(b.$eval(d.ngeoSortableOptions)),h=null;b.$watchCollection(function(){return f},function(){e()})}}}Ru.$inject=["$timeout"];A.directive("ngeoSortable",Ru);function Su(b){Fm.call(this,{$a:Tu,handleEvent:Uu,ab:Vu});this.s=null;this.v=void 0!==b.source?b.source:null;this.j=!1;this.c=this.a=null;this.l=new qj({source:new Bj({mc:!1,wrapX:!1}),style:void 0!==b.style?b.style:$q()});I(this,L("active"),this.C,this)}y(Su,Fm);sa("ngeo.interaction.DrawAzimut",Su);function Tu(b){this.s=b.pixel;return!0}
function Vu(b){var c=this.s,d=b.pixel,e=c[0]-d[0],c=c[1]-d[1],d=!0;4>=e*e+c*c&&(Wu(this,b),this.j?(b=Xu(this),null!==this.v&&this.v.ia(b),this.B(new Rq("drawend",b))):(e=b.coordinate,this.j=!0,b=new ti([e.slice(),e.slice()]),e=new Pq(e,0),b=new Np([b,e]),this.a=new Wh,Xh(this.a,b),Yu(this),this.B(new Rq("drawstart",this.a))),d=!1);return d}
function Uu(b){var c;c=b.map;if(Lc(document,c.a)&&"none"!=c.a.style.display){var d=Rm(c);c=!d||0>=d[0]||0>=d[1]?!1:(c=U(c))&&cm(c)?!0:!1}else c=!1;if(!c)return!0;c=!0;b.type===ql?c=Wu(this,b):b.type===kl&&(c=!1);return Gm.call(this,b)&&c}
function Wu(b,c){if(b.j){var d=c.coordinate,e;e=b.a.J().a;var f=e[0],g,h;g=f.ja();b.c.J().Y(d);h=g[g.length-1];h[0]=d[0];h[1]=d[1];f.Y(g);d=e[1];e=f.o;g=f.a;h=e[0];var k=e[1],l=0,n;for(n=0+g;n<f.o.length;n+=g){var q=e[n],p=e[n+1],l=l+Math.sqrt((q-h)*(q-h)+(p-k)*(p-k));h=q;k=p}d.o[d.a]=d.o[0]+l;d.b();Yu(b)}else f=c.coordinate.slice(),null===b.c?(b.c=new Wh(new Bi(f)),Yu(b)):b.c.J().Y(f);return!0}function Yu(b){var c=[];null!==b.a&&c.push(b.a);null!==b.c&&c.push(b.c);b=b.l.S();b.clear(!0);tj(b,c)}
function Xu(b){b.j=!1;var c=b.a;null!==c&&(b.a=null,b.c=null,b.l.S().clear(!0));return c}Su.prototype.sb=dh;Su.prototype.C=function(){var b=this.g,c=this.getActive();null!==b&&c||Xu(this);this.l.setMap(c?b:null)};Su.prototype.setMap=function(b){Su.U.setMap.call(this,b);this.C()};"function"==typeof proj4&&(proj4.defs("EPSG:2056","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs"),Te(Ne("EPSG:2056"),[242E4,103E4,29E5,135E4]));A.value("ngeoDecorateLayer",function(b){Object.defineProperty(b,"visible",{configurable:!0,get:function(){return hf(b)},set:function(c){b.Ta(c)}});Object.defineProperty(b,"opacity",{configurable:!0,get:function(){return Math.round(100*b.get("opacity"))/100+""},set:function(c){b.set("opacity",+c)}})});function Zu(b,c){this.b=b;this.a=c}Zu.prototype.cancel=function(b,c){return this.a["delete"](this.b+"/cancel/"+b,void 0!==c?c:{})};function $u(b){return function(c){return new Zu(c,b)}}$u.$inject=["$http"];A.factory("ngeoCreatePrint",$u);A.service("ngeoPrintUtils",function(){});A.value("ngeoSyncArrays",function(b,c,d,e,f){var g=e.$watchCollection(function(){return b},function(){var e,g,h;if(d)for(e=b.length-1,h=0;0<=e;--e)f(b[e])&&(c[h++]=b[e]);else for(e=0,g=b.length,h=0;e<g;++e)f(b[e])&&(c[h++]=b[e]);c.length=h}),h=e.$watchCollection(function(){return c},function(){var e,g,h;if(d)for(e=0,g=b.length,h=c.length-1;e<g;++e)f(b[e])&&(b[e]=c[h--]);else for(e=0,g=b.length,h=0;e<g;++e)f(b[e])&&(b[e]=c[h++])});return function(){g();h()}});}).call(window);
//# sourceMappingURL=mobile.js.map
