(function(){'use strict';var p,r=this;function t(b){return void 0!==b}function aa(b,c){var d=b.split("."),e=r;d[0]in e||!e.execScript||e.execScript("var "+d[0]);for(var f;d.length&&(f=d.shift());)!d.length&&t(c)?e[f]=c:e[f]?e=e[f]:e=e[f]={}}function u(){}
function ba(b){var c=typeof b;if("object"==c)if(b){if(b instanceof Array)return"array";if(b instanceof Object)return c;var d=Object.prototype.toString.call(b);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof b.length&&"undefined"!=typeof b.splice&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof b.call&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof b.call)return"object";return c}function ca(b){return"array"==ba(b)}function da(b){var c=ba(b);return"array"==c||"object"==c&&"number"==typeof b.length}function v(b){return"string"==typeof b}function ea(b){return"function"==ba(b)}function w(b){return b[fa]||(b[fa]=++ga)}var fa="closure_uid_"+(1E9*Math.random()>>>0),ga=0;function ha(b,c,d){return b.call.apply(b.bind,arguments)}
function ia(b,c,d){if(!b)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,e);return b.apply(c,d)}}return function(){return b.apply(c,arguments)}}function x(b,c,d){x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:ia;return x.apply(null,arguments)}var ja=Date.now||function(){return+new Date};
function y(b,c){function d(){}d.prototype=c.prototype;b.fa=c.prototype;b.prototype=new d;b.prototype.constructor=b;b.Da=function(b,d,g){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return c.prototype[d].apply(b,h)}};var ka=String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function z(b,c){return-1!=b.indexOf(c)}function la(b,c){return b<c?-1:b>c?1:0};var ma=function(){var b;"cosh"in Math?b=Math.cosh:b=function(b){b=Math.exp(b);return(b+1/b)/2};return b}();var A=Array.prototype;function na(b){return A.concat.apply(A,arguments)}function oa(b,c,d,e){A.splice.apply(b,pa(arguments,1))}function pa(b,c,d){return 2>=arguments.length?A.slice.call(b,c):A.slice.call(b,c,d)};var C;a:{var qa=r.navigator;if(qa){var ra=qa.userAgent;if(ra){C=ra;break a}}C=""};function sa(b,c,d){for(var e in b)c.call(d,b[e],e,b)}function ta(b){var c=[],d=0,e;for(e in b)c[d++]=b[e];return c}function ua(b){var c=[],d=0,e;for(e in b)c[d++]=e;return c}function va(b){var c={},d;for(d in b)c[d]=b[d];return c}function wa(b){var c=ba(b);if("object"==c||"array"==c){if(ea(b.clone))return b.clone();var c="array"==c?[]:{},d;for(d in b)c[d]=wa(b[d]);return c}return b}var xa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function ya(b,c){for(var d,e,f=1;f<arguments.length;f++){e=arguments[f];for(d in e)b[d]=e[d];for(var g=0;g<xa.length;g++)d=xa[g],Object.prototype.hasOwnProperty.call(e,d)&&(b[d]=e[d])}};var za=z(C,"Opera")||z(C,"OPR"),D=z(C,"Trident")||z(C,"MSIE"),Aa=z(C,"Edge"),Ba=z(C,"Gecko")&&!(z(C.toLowerCase(),"webkit")&&!z(C,"Edge"))&&!(z(C,"Trident")||z(C,"MSIE"))&&!z(C,"Edge"),Ca=z(C.toLowerCase(),"webkit")&&!z(C,"Edge");function Da(){var b=C;if(Ba)return/rv\:([^\);]+)(\)|;)/.exec(b);if(Aa)return/Edge\/([\d\.]+)/.exec(b);if(D)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(b);if(Ca)return/WebKit\/(\S+)/.exec(b)}function Fa(){var b=r.document;return b?b.documentMode:void 0}
var Ga=function(){if(za&&r.opera){var b;var c=r.opera.version;try{b=c()}catch(d){b=c}return b}b="";(c=Da())&&(b=c?c[1]:"");return D&&(c=Fa(),c>parseFloat(b))?String(c):b}(),Ha={};
function E(b){var c;if(!(c=Ha[b])){c=0;for(var d=ka(String(Ga)).split("."),e=ka(String(b)).split("."),f=Math.max(d.length,e.length),g=0;0==c&&g<f;g++){var h=d[g]||"",k=e[g]||"",l=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var q=l.exec(h)||["","",""],B=n.exec(k)||["","",""];if(0==q[0].length&&0==B[0].length)break;c=la(0==q[1].length?0:parseInt(q[1],10),0==B[1].length?0:parseInt(B[1],10))||la(0==q[2].length,0==B[2].length)||la(q[2],B[2])}while(0==c)}c=Ha[b]=0<=c}return c}
var Ia=r.document,Ja=Ia&&D?Fa()||("CSS1Compat"==Ia.compatMode?parseInt(Ga,10):5):void 0;var Ka=!D||9<=Ja,La=D&&!E("9");!Ca||E("528");Ba&&E("1.9b")||D&&E("8")||za&&E("9.5")||Ca&&E("528");Ba&&!E("8")||D&&E("9");function Ma(){0!=Na&&w(this);this.ga=this.ga;this.ma=this.ma}var Na=0;Ma.prototype.ga=!1;function F(b,c){this.type=b;this.a=this.target=c;this.defaultPrevented=this.b=!1;this.ea=!0}F.prototype.stopPropagation=function(){this.b=!0};F.prototype.preventDefault=function(){this.defaultPrevented=!0;this.ea=!1};function Oa(b){Oa[" "](b);return b}Oa[" "]=u;function G(b,c){F.call(this,b?b.type:"");this.relatedTarget=this.a=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.c=this.state=null;if(b){var d=this.type=b.type,e=b.changedTouches?b.changedTouches[0]:null;this.target=b.target||b.srcElement;this.a=c;var f=b.relatedTarget;if(f){if(Ba){var g;a:{try{Oa(f.nodeName);g=!0;break a}catch(h){}g=!1}g||(f=null)}}else"mouseover"==d?f=b.fromElement:"mouseout"==d&&(f=b.toElement);this.relatedTarget=
f;null===e?(this.offsetX=Ca||void 0!==b.offsetX?b.offsetX:b.layerX,this.offsetY=Ca||void 0!==b.offsetY?b.offsetY:b.layerY,this.clientX=void 0!==b.clientX?b.clientX:b.pageX,this.clientY=void 0!==b.clientY?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0);this.button=b.button;this.state=b.state;this.c=b;b.defaultPrevented&&this.preventDefault()}}
y(G,F);G.prototype.stopPropagation=function(){G.fa.stopPropagation.call(this);this.c.stopPropagation?this.c.stopPropagation():this.c.cancelBubble=!0};G.prototype.preventDefault=function(){G.fa.preventDefault.call(this);var b=this.c;if(b.preventDefault)b.preventDefault();else if(b.returnValue=!1,La)try{if(b.ctrlKey||112<=b.keyCode&&123>=b.keyCode)b.keyCode=-1}catch(c){}};var Pa="closure_listenable_"+(1E6*Math.random()|0),Qa=0;function Ra(b,c,d,e,f){this.listener=b;this.a=null;this.src=c;this.type=d;this.K=!!e;this.N=f;this.key=++Qa;this.G=this.J=!1}function Sa(b){b.G=!0;b.listener=null;b.a=null;b.src=null;b.N=null};function Ta(b){this.src=b;this.listeners={};this.a=0}Ta.prototype.add=function(b,c,d,e,f){var g=b.toString();b=this.listeners[g];b||(b=this.listeners[g]=[],this.a++);var h=Ua(b,c,e,f);-1<h?(c=b[h],d||(c.J=!1)):(c=new Ra(c,this.src,g,!!e,f),c.J=d,b.push(c));return c};Ta.prototype.remove=function(b,c,d,e){b=b.toString();if(!(b in this.listeners))return!1;var f=this.listeners[b];c=Ua(f,c,d,e);return-1<c?(Sa(f[c]),A.splice.call(f,c,1),0==f.length&&(delete this.listeners[b],this.a--),!0):!1};
function Va(b,c){var d=c.type;if(!(d in b.listeners))return!1;var e=b.listeners[d],f=A.indexOf.call(e,c,void 0),g;(g=0<=f)&&A.splice.call(e,f,1);g&&(Sa(c),0==b.listeners[d].length&&(delete b.listeners[d],b.a--));return g}function Ua(b,c,d,e){for(var f=0;f<b.length;++f){var g=b[f];if(!g.G&&g.listener==c&&g.K==!!d&&g.N==e)return f}return-1};var Wa="closure_lm_"+(1E6*Math.random()|0),Xa={},Ya=0;
function H(b,c,d,e,f){if(ca(c)){for(var g=0;g<c.length;g++)H(b,c[g],d,e,f);return null}d=Za(d);if(b&&b[Pa])b=b.H.add(String(c),d,!1,e,f);else{if(!c)throw Error("Invalid event type");var g=!!e,h=$a(b);h||(b[Wa]=h=new Ta(b));d=h.add(c,d,!1,e,f);if(!d.a){e=ab();d.a=e;e.src=b;e.listener=d;if(b.addEventListener)b.addEventListener(c.toString(),e,g);else if(b.attachEvent)b.attachEvent(bb(c.toString()),e);else throw Error("addEventListener and attachEvent are unavailable.");Ya++}b=d}return b}
function ab(){var b=cb,c=Ka?function(d){return b.call(c.src,c.listener,d)}:function(d){d=b.call(c.src,c.listener,d);if(!d)return d};return c}function db(b,c,d,e,f){if(ca(c))for(var g=0;g<c.length;g++)db(b,c[g],d,e,f);else(d=Za(d),b&&b[Pa])?b.H.remove(String(c),d,e,f):b&&(b=$a(b))&&(c=b.listeners[c.toString()],b=-1,c&&(b=Ua(c,d,!!e,f)),(d=-1<b?c[b]:null)&&I(d))}
function I(b){if("number"==typeof b||!b||b.G)return!1;var c=b.src;if(c&&c[Pa])return Va(c.H,b);var d=b.type,e=b.a;c.removeEventListener?c.removeEventListener(d,e,b.K):c.detachEvent&&c.detachEvent(bb(d),e);Ya--;(d=$a(c))?(Va(d,b),0==d.a&&(d.src=null,c[Wa]=null)):Sa(b);return!0}function bb(b){return b in Xa?Xa[b]:Xa[b]="on"+b}function eb(b,c,d,e){var f=!0;if(b=$a(b))if(c=b.listeners[c.toString()])for(c=c.concat(),b=0;b<c.length;b++){var g=c[b];g&&g.K==d&&!g.G&&(g=fb(g,e),f=f&&!1!==g)}return f}
function fb(b,c){var d=b.listener,e=b.N||b.src;b.J&&I(b);return d.call(e,c)}
function cb(b,c){if(b.G)return!0;if(!Ka){var d;if(!(d=c))a:{d=["window","event"];for(var e=r,f;f=d.shift();)if(null!=e[f])e=e[f];else{d=null;break a}d=e}f=d;d=new G(f,this);e=!0;if(!(0>f.keyCode||void 0!=f.returnValue)){a:{var g=!1;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(l){g=!0}if(g||void 0==f.returnValue)f.returnValue=!0}f=[];for(g=d.a;g;g=g.parentNode)f.push(g);for(var g=b.type,h=f.length-1;!d.b&&0<=h;h--){d.a=f[h];var k=eb(f[h],g,!0,d),e=e&&k}for(h=0;!d.b&&h<f.length;h++)d.a=f[h],k=eb(f[h],
g,!1,d),e=e&&k}return e}return fb(b,new G(c,this))}function $a(b){b=b[Wa];return b instanceof Ta?b:null}var gb="__closure_events_fn_"+(1E9*Math.random()>>>0);function Za(b){if(ea(b))return b;b[gb]||(b[gb]=function(c){return b.handleEvent(c)});return b[gb]};function hb(){Ma.call(this);this.H=new Ta(this);this.ka=this;this.ia=null}y(hb,Ma);hb.prototype[Pa]=!0;hb.prototype.addEventListener=function(b,c,d,e){H(this,b,c,d,e)};hb.prototype.removeEventListener=function(b,c,d,e){db(this,b,c,d,e)};
function J(b,c){var d,e=b.ia;if(e)for(d=[];e;e=e.ia)d.push(e);var e=b.ka,f=c,g=f.type||f;if(v(f))f=new F(f,e);else if(f instanceof F)f.target=f.target||e;else{var h=f,f=new F(g,e);ya(f,h)}var h=!0,k;if(d)for(var l=d.length-1;!f.b&&0<=l;l--)k=f.a=d[l],h=ib(k,g,!0,f)&&h;f.b||(k=f.a=e,h=ib(k,g,!0,f)&&h,f.b||(h=ib(k,g,!1,f)&&h));if(d)for(l=0;!f.b&&l<d.length;l++)k=f.a=d[l],h=ib(k,g,!1,f)&&h}
function ib(b,c,d,e){c=b.H.listeners[String(c)];if(!c)return!0;c=c.concat();for(var f=!0,g=0;g<c.length;++g){var h=c[g];if(h&&!h.G&&h.K==d){var k=h.listener,l=h.N||h.src;h.J&&Va(b.H,h);f=!1!==k.call(l,e)&&f}}return f&&0!=e.ea};function jb(){hb.call(this);this.T=0}y(jb,hb);jb.prototype.b=function(){++this.T;J(this,"change")};jb.prototype.on=function(b,c,d){return H(this,b,c,!1,d)};function kb(b,c,d){F.call(this,b);this.key=c;this.oldValue=d}y(kb,F);function K(b){jb.call(this);w(this);this.j={};void 0!==b&&lb(this,b)}y(K,jb);var mb={};function nb(b){return mb.hasOwnProperty(b)?mb[b]:mb[b]="change:"+b}K.prototype.get=function(b){var c;this.j.hasOwnProperty(b)&&(c=this.j[b]);return c};K.prototype.A=function(){return Object.keys(this.j)};function ob(b,c,d,e){e?b.j[c]=d:(e=b.j[c],b.j[c]=d,e!==d&&(d=nb(c),J(b,new kb(d,c,e)),J(b,new kb("propertychange",c,e))))}
function lb(b,c){for(var d in c)ob(b,d,c[d],void 0)};function L(b){this.length=b.length||b;for(var c=0;c<this.length;c++)this[c]=b[c]||0}L.prototype.a=4;L.prototype.b=function(b,c){c=c||0;for(var d=0;d<b.length&&c+d<this.length;d++)this[c+d]=b[d]};L.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(L.BYTES_PER_ELEMENT=4,L.prototype.BYTES_PER_ELEMENT=L.prototype.a,L.prototype.set=L.prototype.b,L.prototype.toString=L.prototype.toString,aa("Float32Array",L));function M(b){this.length=b.length||b;for(var c=0;c<this.length;c++)this[c]=b[c]||0}M.prototype.a=8;M.prototype.b=function(b,c){c=c||0;for(var d=0;d<b.length&&c+d<this.length;d++)this[c+d]=b[d]};M.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{M.BYTES_PER_ELEMENT=8}catch(b){}M.prototype.BYTES_PER_ELEMENT=M.prototype.a;M.prototype.set=M.prototype.b;M.prototype.toString=M.prototype.toString;aa("Float64Array",M)};new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);function pb(b,c,d,e,f){return f?(f[0]=b,f[1]=c,f[2]=d,f[3]=e,f):[b,c,d,e]};/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function qb(b){this.radius=b}function rb(b,c,d){var e=c[1]*Math.PI/180,f=d[1]*Math.PI/180,g=(f-e)/2;c=(d[0]-c[0])*Math.PI/180/2;e=Math.sin(g)*Math.sin(g)+Math.sin(c)*Math.sin(c)*Math.cos(e)*Math.cos(f);return 2*b.radius*Math.atan2(Math.sqrt(e),Math.sqrt(1-e))}
qb.prototype.offset=function(b,c,d){var e=b[1]*Math.PI/180;c/=this.radius;var f=Math.asin(Math.sin(e)*Math.cos(c)+Math.cos(e)*Math.sin(c)*Math.cos(d));return[180*(b[0]*Math.PI/180+Math.atan2(Math.sin(d)*Math.sin(c)*Math.cos(e),Math.cos(c)-Math.sin(e)*Math.sin(f)))/Math.PI,180*f/Math.PI]};var sb=new qb(6370997);var N={};N.degrees=2*Math.PI*sb.radius/360;N.ft=.3048;N.m=1;N["us-ft"]=1200/3937;
function O(b){this.a=b.code;this.b=b.units;this.g=void 0!==b.extent?b.extent:null;this.c=void 0!==b.M?b.M:this.f;var c=tb,d=b.code;if("function"==typeof proj4&&void 0===c[d]){var e=proj4.defs(d);if(void 0!==e){void 0===b.units&&(b=e.units,void 0===e.to_meter||void 0!==b&&void 0!==N[b]||(b=e.to_meter.toString(),N[b]=e.to_meter),this.b=b);var f,g;for(f in c)if(c=proj4.defs(f),void 0!==c)if(b=P(f),c===e)ub([b,this]);else{g=proj4(f,d);c=g.forward;g=g.inverse;b=P(b);var h=P(this);vb(b,h,wb(c));vb(h,b,
wb(g))}}}}O.prototype.u=function(){return this.g};O.prototype.f=function(b,c){if("degrees"==this.b)return b;var d=xb(this,P("EPSG:4326")),e=[c[0]-b/2,c[1],c[0]+b/2,c[1],c[0],c[1]-b/2,c[0],c[1]+b/2],e=d(e,e,2),d=rb(sb,e.slice(0,2),e.slice(2,4)),e=rb(sb,e.slice(4,6),e.slice(6,8)),e=(d+e)/2,d=N[this.b];void 0!==d&&(e/=d);return e};O.prototype.M=function(b,c){return this.c(b,c)};var tb={},yb={};function ub(b){zb(b);b.forEach(function(c){b.forEach(function(b){c!==b&&vb(c,b,Ab)})})}
function Bb(b){tb[b.a]=b;vb(b,b,Ab)}function zb(b){var c=[];b.forEach(function(b){c.push(Bb(b))})}function vb(b,c,d){b=b.a;c=c.a;b in yb||(yb[b]={});yb[b][c]=d}function wb(b){return function(c,d,e){var f=c.length;e=void 0!==e?e:2;d=void 0!==d?d:Array(f);var g,h;for(h=0;h<f;h+=e)for(g=b([c[h],c[h+1]]),d[h]=g[0],d[h+1]=g[1],g=e-1;2<=g;--g)d[h+g]=c[h+g];return d}}
function P(b){var c;b instanceof O?c=b:v(b)?(c=tb[b],void 0===c&&"function"==typeof proj4&&void 0!==proj4.defs(b)&&(c=new O({code:b}),Bb(c))):c=null;return c}function Cb(b,c){var d=P(b),e=P(c);return xb(d,e)}function xb(b,c){var d=b.a,e=c.a,f;d in yb&&e in yb[d]&&(f=yb[d][e]);void 0===f&&(f=Db);return f}function Db(b,c){if(void 0!==c&&b!==c){for(var d=0,e=b.length;d<e;++d)c[d]=b[d];b=c}return b}
function Ab(b,c){var d;if(void 0!==c){d=0;for(var e=b.length;d<e;++d)c[d]=b[d];d=c}else d=b.slice();return d};function Q(){K.call(this);this.D=[Infinity,Infinity,-Infinity,-Infinity];this.O=-1}y(Q,K);Q.prototype.u=function(b){this.O!=this.T&&(this.D=this.l(this.D),this.O=this.T);var c=this.D;b?(b[0]=c[0],b[1]=c[1],b[2]=c[2],b[3]=c[3]):b=c;return b};Q.prototype.transform=function(b,c){this.i(Cb(b,c));return this};function R(){Q.call(this);this.layout="XY";this.f=2;this.a=null}y(R,Q);function Eb(b){if("XY"==b)return 2;if("XYZ"==b||"XYM"==b)return 3;if("XYZM"==b)return 4}R.prototype.l=function(b){var c=this.a,d=this.a.length,e=this.f;b=pb(Infinity,Infinity,-Infinity,-Infinity,b);for(var f=0;f<d;f+=e){var g=b,h=c[f],k=c[f+1];g[0]=Math.min(g[0],h);g[1]=Math.min(g[1],k);g[2]=Math.max(g[2],h);g[3]=Math.max(g[3],k)}return b};function S(b,c,d){b.f=Eb(c);b.layout=c;b.a=d}
function Fb(b,c,d,e){if(c)d=Eb(c);else{for(c=0;c<e;++c){if(0===d.length){b.layout="XY";b.f=2;return}d=d[0]}d=d.length;c=2==d?"XY":3==d?"XYZ":4==d?"XYZM":void 0}b.layout=c;b.f=d}R.prototype.i=function(b){this.a&&(b(this.a,this.a,this.f),this.b())};function Gb(b,c,d,e){var f,g;f=0;for(g=d.length;f<g;++f){var h=d[f],k;for(k=0;k<e;++k)b[c++]=h[k]}return c}function Hb(b,c,d,e,f){f=f?f:[];var g=0,h,k;h=0;for(k=d.length;h<k;++h)c=Gb(b,c,d[h],e),f[g++]=c;f.length=g;return f};function T(b,c){R.call(this);this.c(b,c)}y(T,R);T.prototype.clone=function(){var b=new T(null),c=this.a.slice();S(b,this.layout,c);b.b();return b};T.prototype.l=function(b){var c=this.a,d=c[0],c=c[1];return pb(d,c,d,c,b)};T.prototype.g=function(){return"Point"};T.prototype.c=function(b,c){if(b){Fb(this,c,b,0);this.a||(this.a=[]);var d=this.a,e=this.a,f=0,g,h;g=0;for(h=b.length;g<h;++g)e[f++]=b[g];d.length=f}else S(this,"XY",null);this.b()};function Ib(b,c){R.call(this);this.h=[];this.c(b,c)}y(Ib,R);Ib.prototype.clone=function(){var b=new Ib(null),c=this.a.slice(),d=this.h.slice();S(b,this.layout,c);b.h=d;b.b();return b};Ib.prototype.g=function(){return"Polygon"};Ib.prototype.c=function(b,c){if(b){Fb(this,c,b,2);this.a||(this.a=[]);var d=Hb(this.a,0,b,this.f,this.h);this.a.length=0===d.length?0:d[d.length-1]}else d=this.h,S(this,"XY",null),this.h=d;this.b()};function Jb(b,c,d){F.call(this,b,d);this.element=c}y(Jb,F);function Kb(b){K.call(this);this.a=b?b:[];Lb(this)}y(Kb,K);p=Kb.prototype;p.clear=function(){for(;0<this.get("length");)Mb(this,this.get("length")-1)};p.extend=function(b){var c,d;c=0;for(d=b.length;c<d;++c)this.push(b[c]);return this};p.forEach=function(b,c){this.a.forEach(b,c)};p.item=function(b){return this.a[b]};p.push=function(b){var c=this.a.length;oa(this.a,c,0,b);Lb(this);J(this,new Jb("add",b,this));return c};
p.remove=function(b){var c=this.a,d,e;d=0;for(e=c.length;d<e;++d)if(c[d]===b)return Mb(this,d)};function Mb(b,c){var d=b.a[c];A.splice.call(b.a,c,1);Lb(b);J(b,new Jb("remove",d,b));return d}function Lb(b){ob(b,"length",b.a.length)};function Nb(b){if(!v(b)){var c=b[0];c!=(c|0)&&(c=c+.5|0);var d=b[1];d!=(d|0)&&(d=d+.5|0);var e=b[2];e!=(e|0)&&(e=e+.5|0);b="rgba("+c+","+d+","+e+","+b[3]+")"}return b};!Ba&&!D||D&&9<=Ja||Ba&&E("1.9.1");D&&E("9");function Ob(b){K.call(this);P(b.projection);this.la=void 0!==b.state?b.state:"ready"}y(Ob,K);function Pb(b){if("function"==typeof b.v)return b.v();if(v(b))return b.split("");if(da(b)){for(var c=[],d=b.length,e=0;e<d;e++)c.push(b[e]);return c}return ta(b)}function Qb(b,c,d){if("function"==typeof b.forEach)b.forEach(c,d);else if(da(b)||v(b))A.forEach.call(b,c,d);else{var e;if("function"==typeof b.A)e=b.A();else if("function"!=typeof b.v)if(da(b)||v(b)){e=[];for(var f=b.length,g=0;g<f;g++)e.push(g)}else e=ua(b);else e=void 0;for(var f=Pb(b),g=f.length,h=0;h<g;h++)c.call(d,f[h],e&&e[h],b)}};function Rb(b,c){this.b={};this.a=[];this.f=this.c=0;var d=arguments.length;if(1<d){if(d%2)throw Error("Uneven number of arguments");for(var e=0;e<d;e+=2)Sb(this,arguments[e],arguments[e+1])}else if(b){b instanceof Rb?(d=b.A(),e=b.v()):(d=ua(b),e=ta(b));for(var f=0;f<d.length;f++)Sb(this,d[f],e[f])}}p=Rb.prototype;p.ba=function(){return this.c};p.v=function(){Tb(this);for(var b=[],c=0;c<this.a.length;c++)b.push(this.b[this.a[c]]);return b};p.A=function(){Tb(this);return this.a.concat()};
p.equals=function(b,c){if(this===b)return!0;if(this.c!=b.ba())return!1;var d=c||Ub;Tb(this);for(var e,f=0;e=this.a[f];f++)if(!d(this.get(e),b.get(e)))return!1;return!0};function Ub(b,c){return b===c}p.clear=function(){this.b={};this.f=this.c=this.a.length=0};p.remove=function(b){return U(this.b,b)?(delete this.b[b],this.c--,this.f++,this.a.length>2*this.c&&Tb(this),!0):!1};
function Tb(b){if(b.c!=b.a.length){for(var c=0,d=0;c<b.a.length;){var e=b.a[c];U(b.b,e)&&(b.a[d++]=e);c++}b.a.length=d}if(b.c!=b.a.length){for(var f={},d=c=0;c<b.a.length;)e=b.a[c],U(f,e)||(b.a[d++]=e,f[e]=1),c++;b.a.length=d}}p.get=function(b,c){return U(this.b,b)?this.b[b]:c};function Sb(b,c,d){U(b.b,c)||(b.c++,b.a.push(c),b.f++);b.b[c]=d}p.forEach=function(b,c){for(var d=this.A(),e=0;e<d.length;e++){var f=d[e],g=this.get(f);b.call(c,g,f,this)}};p.clone=function(){return new Rb(this)};
p.transpose=function(){for(var b=new Rb,c=0;c<this.a.length;c++){var d=this.a[c];Sb(b,this.b[d],d)}return b};function U(b,c){return Object.prototype.hasOwnProperty.call(b,c)};function Vb(){this.a=ja()}new Vb;Vb.prototype.reset=function(){this.a=ja()};Vb.prototype.get=function(){return this.a};D||Aa||Ca&&E("525");try{new MouseEvent("click",{buttons:1})}catch(b){};var Wb=!1;(function(){if(!("HTMLCanvasElement"in r))return!1;try{var b;return(b=document.createElement("CANVAS").getContext("2d"))?(void 0!==b.setLineDash&&(Wb=!0),!0):!1}catch(c){return!1}})();function Xb(b){K.call(this);var c=va(b);c.opacity=void 0!==b.opacity?b.opacity:1;c.visible=void 0!==b.visible?b.visible:!0;c.zIndex=void 0!==b.zIndex?b.zIndex:0;c.maxResolution=void 0!==b.ca?b.ca:Infinity;c.minResolution=void 0!==b.da?b.da:0;lb(this,c)}y(Xb,K);Xb.prototype.u=function(){return this.get("extent")};function Yb(b){var c=va(b);delete c.source;Xb.call(this,c);this.a=this.f=this.c=null;b.map&&this.setMap(b.map);H(this,nb("source"),this.h,!1,this);ob(this,"source",b.source?b.source:null)}y(Yb,Xb);Yb.prototype.i=function(){this.b()};Yb.prototype.h=function(){this.a&&(I(this.a),this.a=null);var b=this.get("source")||null;b&&(this.a=H(b,"change",this.i,!1,this));this.b()};
Yb.prototype.setMap=function(b){I(this.c);this.c=null;b||this.b();I(this.f);this.f=null;b&&(this.c=H(b,"precompose",function(b){var d;d=this.get("opacity");var e;e=(e=this.get("source")||null)?e.la:"undefined";var f=this.get("visible"),g=this.u(),h=this.get("zIndex"),k=this.get("maxResolution"),l=this.get("minResolution");d={layer:this,opacity:Math.min(Math.max(d,0),1),D:e,visible:f,extent:g,zIndex:h,ca:k,da:Math.max(l,0),l:!1};b.frameState.Ha.push(d);b.frameState.Ga[w(this)]=d},!1,this),this.f=H(this,
"change",b.render,!1,b),this.b())};function Zb(){};function $b(b){O.call(this,{code:b,units:"m",extent:ac,global:!0,Aa:bc})}y($b,O);$b.prototype.M=function(b,c){return b/ma(c[1]/6378137)};var cc=6378137*Math.PI,ac=[-cc,-cc,cc,cc],bc=[-180,-85,180,85],dc="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(b){return new $b(b)});
function ec(b,c,d){var e=b.length;d=1<d?d:2;void 0===c&&(2<d?c=b.slice():c=Array(e));for(var f=0;f<e;f+=d)c[f]=6378137*Math.PI*b[f]/180,c[f+1]=6378137*Math.log(Math.tan(Math.PI*(b[f+1]+90)/360));return c}function fc(b,c,d){var e=b.length;d=1<d?d:2;void 0===c&&(2<d?c=b.slice():c=Array(e));for(var f=0;f<e;f+=d)c[f]=180*b[f]/(6378137*Math.PI),c[f+1]=360*Math.atan(Math.exp(b[f+1]/6378137))/Math.PI-90;return c};function V(b,c){O.call(this,{code:b,units:"degrees",extent:gc,Ca:c,global:!0,Aa:gc})}y(V,O);V.prototype.M=function(b){return b};var gc=[-180,-90,180,90],hc=[new V("CRS:84"),new V("EPSG:4326","neu"),new V("urn:ogc:def:crs:EPSG::4326","neu"),new V("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new V("urn:ogc:def:crs:OGC:1.3:CRS84"),new V("urn:ogc:def:crs:OGC:2:84"),new V("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new V("urn:x-ogc:def:crs:EPSG:4326","neu")];var ic=[0,0,0,1];function jc(b){b=b||{};this.c=void 0!==b.color?b.color:null;this.b=void 0}jc.prototype.a=function(){return this.c};jc.prototype.j=function(){void 0===this.b&&(this.b="f"+(this.c?Nb(this.c):"-"));return this.b};function kc(){this.b=-1};function lc(){this.b=-1;this.b=64;this.a=Array(4);this.g=Array(this.b);this.f=this.c=0;this.reset()}y(lc,kc);lc.prototype.reset=function(){this.a[0]=1732584193;this.a[1]=4023233417;this.a[2]=2562383102;this.a[3]=271733878;this.f=this.c=0};
function mc(b,c,d){d||(d=0);var e=Array(16);if(v(c))for(var f=0;16>f;++f)e[f]=c.charCodeAt(d++)|c.charCodeAt(d++)<<8|c.charCodeAt(d++)<<16|c.charCodeAt(d++)<<24;else for(f=0;16>f;++f)e[f]=c[d++]|c[d++]<<8|c[d++]<<16|c[d++]<<24;c=b.a[0];d=b.a[1];var f=b.a[2],g=b.a[3],h=0,h=c+(g^d&(f^g))+e[0]+3614090360&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[1]+3905402710&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+(d^g&(c^d))+e[2]+606105819&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^c))+
e[3]+3250441966&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(g^d&(f^g))+e[4]+4118548399&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[5]+1200080426&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+(d^g&(c^d))+e[6]+2821735955&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^c))+e[7]+4249261313&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(g^d&(f^g))+e[8]+1770035416&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[9]+2336552879&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+(d^g&
(c^d))+e[10]+4294925233&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^c))+e[11]+2304563134&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(g^d&(f^g))+e[12]+1804603682&4294967295;c=d+(h<<7&4294967295|h>>>25);h=g+(f^c&(d^f))+e[13]+4254626195&4294967295;g=c+(h<<12&4294967295|h>>>20);h=f+(d^g&(c^d))+e[14]+2792965006&4294967295;f=g+(h<<17&4294967295|h>>>15);h=d+(c^f&(g^c))+e[15]+1236535329&4294967295;d=f+(h<<22&4294967295|h>>>10);h=c+(f^g&(d^f))+e[1]+4129170786&4294967295;c=d+(h<<5&4294967295|h>>>
27);h=g+(d^f&(c^d))+e[6]+3225465664&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[11]+643717713&4294967295;f=g+(h<<14&4294967295|h>>>18);h=d+(g^c&(f^g))+e[0]+3921069994&4294967295;d=f+(h<<20&4294967295|h>>>12);h=c+(f^g&(d^f))+e[5]+3593408605&4294967295;c=d+(h<<5&4294967295|h>>>27);h=g+(d^f&(c^d))+e[10]+38016083&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[15]+3634488961&4294967295;f=g+(h<<14&4294967295|h>>>18);h=d+(g^c&(f^g))+e[4]+3889429448&4294967295;d=f+(h<<20&4294967295|
h>>>12);h=c+(f^g&(d^f))+e[9]+568446438&4294967295;c=d+(h<<5&4294967295|h>>>27);h=g+(d^f&(c^d))+e[14]+3275163606&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[3]+4107603335&4294967295;f=g+(h<<14&4294967295|h>>>18);h=d+(g^c&(f^g))+e[8]+1163531501&4294967295;d=f+(h<<20&4294967295|h>>>12);h=c+(f^g&(d^f))+e[13]+2850285829&4294967295;c=d+(h<<5&4294967295|h>>>27);h=g+(d^f&(c^d))+e[2]+4243563512&4294967295;g=c+(h<<9&4294967295|h>>>23);h=f+(c^d&(g^c))+e[7]+1735328473&4294967295;f=g+(h<<14&4294967295|
h>>>18);h=d+(g^c&(f^g))+e[12]+2368359562&4294967295;d=f+(h<<20&4294967295|h>>>12);h=c+(d^f^g)+e[5]+4294588738&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[8]+2272392833&4294967295;g=c+(h<<11&4294967295|h>>>21);h=f+(g^c^d)+e[11]+1839030562&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[14]+4259657740&4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(d^f^g)+e[1]+2763975236&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[4]+1272893353&4294967295;g=c+(h<<11&4294967295|h>>>21);h=f+(g^
c^d)+e[7]+4139469664&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[10]+3200236656&4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(d^f^g)+e[13]+681279174&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[0]+3936430074&4294967295;g=c+(h<<11&4294967295|h>>>21);h=f+(g^c^d)+e[3]+3572445317&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[6]+76029189&4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(d^f^g)+e[9]+3654602809&4294967295;c=d+(h<<4&4294967295|h>>>28);h=g+(c^d^f)+e[12]+3873151461&4294967295;
g=c+(h<<11&4294967295|h>>>21);h=f+(g^c^d)+e[15]+530742520&4294967295;f=g+(h<<16&4294967295|h>>>16);h=d+(f^g^c)+e[2]+3299628645&4294967295;d=f+(h<<23&4294967295|h>>>9);h=c+(f^(d|~g))+e[0]+4096336452&4294967295;c=d+(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[7]+1126891415&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[14]+2878612391&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[5]+4237533241&4294967295;d=f+(h<<21&4294967295|h>>>11);h=c+(f^(d|~g))+e[12]+1700485571&4294967295;c=d+
(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[3]+2399980690&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[10]+4293915773&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[1]+2240044497&4294967295;d=f+(h<<21&4294967295|h>>>11);h=c+(f^(d|~g))+e[8]+1873313359&4294967295;c=d+(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[15]+4264355552&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[6]+2734768916&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[13]+1309151649&4294967295;
d=f+(h<<21&4294967295|h>>>11);h=c+(f^(d|~g))+e[4]+4149444226&4294967295;c=d+(h<<6&4294967295|h>>>26);h=g+(d^(c|~f))+e[11]+3174756917&4294967295;g=c+(h<<10&4294967295|h>>>22);h=f+(c^(g|~d))+e[2]+718787259&4294967295;f=g+(h<<15&4294967295|h>>>17);h=d+(g^(f|~c))+e[9]+3951481745&4294967295;b.a[0]=b.a[0]+c&4294967295;b.a[1]=b.a[1]+(f+(h<<21&4294967295|h>>>11))&4294967295;b.a[2]=b.a[2]+f&4294967295;b.a[3]=b.a[3]+g&4294967295}
function nc(b,c){var d;t(d)||(d=c.length);for(var e=d-b.b,f=b.g,g=b.c,h=0;h<d;){if(0==g)for(;h<=e;)mc(b,c,h),h+=b.b;if(v(c))for(;h<d;){if(f[g++]=c.charCodeAt(h++),g==b.b){mc(b,f);g=0;break}}else for(;h<d;)if(f[g++]=c[h++],g==b.b){mc(b,f);g=0;break}}b.c=g;b.f+=d};function oc(b){b=b||{};this.f=void 0!==b.color?b.color:null;this.h=b.lineCap;this.b=void 0!==b.F?b.F:null;this.i=b.lineJoin;this.l=b.miterLimit;this.g=b.width;this.c=void 0}oc.prototype.a=function(){return this.f};oc.prototype.getLineDash=function(){return this.b};
oc.prototype.j=function(){if(void 0===this.c){var b="s"+(this.f?Nb(this.f):"-")+","+(void 0!==this.h?this.h.toString():"-")+","+(this.b?this.b.toString():"-")+","+(void 0!==this.i?this.i:"-")+","+(void 0!==this.l?this.l.toString():"-")+","+(void 0!==this.g?this.g.toString():"-"),c=new lc;nc(c,b);b=Array((56>c.c?c.b:2*c.b)-c.c);b[0]=128;for(var d=1;d<b.length-8;++d)b[d]=0;for(var e=8*c.f,d=b.length-8;d<b.length;++d)b[d]=e&255,e/=256;nc(c,b);b=Array(16);for(d=e=0;4>d;++d)for(var f=0;32>f;f+=8)b[e++]=
c.a[d]>>>f&255;if(8192>=b.length)c=String.fromCharCode.apply(null,b);else for(c="",d=0;d<b.length;d+=8192)e=pa(b,d,d+8192),c+=String.fromCharCode.apply(null,e);this.c=c}return this.c};function pc(b){b=b||{};this.h=this.b=this.f=null;this.g=void 0!==b.fill?b.fill:null;this.a=void 0!==b.stroke?b.stroke:null;this.c=b.radius;b=b.Ba;var c=null,d,e=0;this.a&&(d=Nb(this.a.a()),e=this.a.g,void 0===e&&(e=1),c=this.a.getLineDash(),Wb||(c=null));var f=2*(this.c+e)+1;d={strokeStyle:d,strokeWidth:e,size:f,F:c};if(void 0===b){this.b=document.createElement("CANVAS");this.b.height=f;this.b.width=f;var g=this.b.getContext("2d");this.l(d,g,0,0);this.g?this.h=this.b:(g=this.h=document.createElement("CANVAS"),
g.height=d.size,g.width=d.size,g=g.getContext("2d"),this.i(d,g,0,0))}else f=Math.round(f),(c=!this.g)&&(g=x(this.i,this,d)),e=this.j(),g=b.add(e,f,f,x(this.l,this,d),g),this.b=g.image,c?this.h=g.Fa:this.h=this.b}y(pc,Zb);pc.prototype.load=function(){};
pc.prototype.l=function(b,c,d,e){c.setTransform(1,0,0,1,0,0);c.translate(d,e);c.beginPath();c.arc(b.size/2,b.size/2,this.c,0,2*Math.PI,!0);this.g&&(c.fillStyle=Nb(this.g.a()),c.fill());this.a&&(c.strokeStyle=b.strokeStyle,c.lineWidth=b.strokeWidth,b.F&&c.setLineDash(b.F),c.stroke());c.closePath()};
pc.prototype.i=function(b,c,d,e){c.setTransform(1,0,0,1,0,0);c.translate(d,e);c.beginPath();c.arc(b.size/2,b.size/2,this.c,0,2*Math.PI,!0);c.fillStyle=Nb(ic);c.fill();this.a&&(c.strokeStyle=b.strokeStyle,c.lineWidth=b.strokeWidth,b.F&&c.setLineDash(b.F),c.stroke());c.closePath()};pc.prototype.j=function(){var b=this.a?this.a.j():"-",c=this.g?this.g.j():"-";this.f&&b==this.f[1]&&c==this.f[2]&&this.c==this.f[3]||(this.f=["c"+b+c+(void 0!==this.c?this.c.toString():"-"),b,c,this.c]);return this.f[0]};function qc(b){b=b||{};this.b=null;this.a=rc;void 0!==b.geometry&&sc(this,b.geometry)}qc.prototype.w=function(){return this.b};function sc(b,c){ea(c)?b.a=c:v(c)?b.a=function(b){return b.get(c)}:c?void 0!==c&&(b.a=function(){return c}):b.a=rc;b.b=c}var tc=null;function vc(){if(!tc){var b=new jc({color:"rgba(255,255,255,0.4)"}),c=new oc({color:"#3399CC",width:1.25});tc=[new qc({image:new pc({fill:b,stroke:c,radius:5}),fill:b,stroke:c})]}return tc}function rc(b){return b.w()};function wc(b){b=b?b:{};var c=va(b);delete c.style;delete c.Ja;delete c.ya;delete c.za;Yb.call(this,c);this.g=null;b=b.style;this.g=void 0!==b?b:vc;null!==b&&(b=this.g,ea(b)||ca(b));this.b()}y(wc,Yb);function W(b){K.call(this);this.g=void 0;this.a="geometry";this.h=null;this.l=void 0;this.c=null;H(this,nb(this.a),this.f,!1,this);void 0!==b&&(b instanceof Q||!b?ob(this,this.a,b):lb(this,b))}y(W,K);W.prototype.clone=function(){var b={},c;for(c in this.j)b[c]=this.j[c];b=new W(b);xc(b,this.a);if(c=this.w())c=c.clone(),ob(b,b.a,c);if(c=this.h)b.h=c,b.l=c?yc(c):void 0,b.b();return b};W.prototype.w=function(){return this.get(this.a)};W.prototype.i=function(){this.b()};
W.prototype.f=function(){this.c&&(I(this.c),this.c=null);var b=this.w();b&&(this.c=H(b,"change",this.i,!1,this));this.b()};function xc(b,c){db(b,nb(b.a),b.f,!1,b);b.a=c;H(b,nb(b.a),b.f,!1,b);b.f()}function yc(b){if(!ea(b)){var c;c=ca(b)?b:[b];b=function(){return c}}return b};var zc=r.JSON.parse;var Ac=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Bc(b,c){if(b)for(var d=b.split("&"),e=0;e<d.length;e++){var f=d[e].indexOf("="),g=null,h=null;0<=f?(g=d[e].substring(0,f),h=d[e].substring(f+1)):g=d[e];c(g,h?decodeURIComponent(h.replace(/\+/g," ")):"")}};function Cc(){if(!D)return!1;try{return new ActiveXObject("MSXML2.DOMDocument"),!0}catch(b){return!1}}var Dc=D&&Cc();a:if(!document.implementation||!document.implementation.createDocument){if(Dc){var X=new ActiveXObject("MSXML2.DOMDocument");if(X){X.resolveExternals=!1;X.validateOnParse=!1;try{X.setProperty("ProhibitDTD",!0),X.setProperty("MaxXMLSize",2048),X.setProperty("MaxElementDepth",256)}catch(b){}}if(X)break a}throw Error("Your browser does not support creating new documents");};var Ec;
(function(){var b={aa:{}};(function(){function c(b,d){if(!(this instanceof c))return new c(b,d);this.P=Math.max(4,b||9);this.Y=Math.max(2,Math.ceil(.4*this.P));d&&this.sa(d);this.clear()}function d(b,c){b.bbox=e(b,0,b.children.length,c)}function e(b,c,d,e){for(var g=[Infinity,Infinity,-Infinity,-Infinity],h;c<d;c++)h=b.children[c],f(g,b.o?e(h):h.bbox);return g}function f(b,c){b[0]=Math.min(b[0],c[0]);b[1]=Math.min(b[1],c[1]);b[2]=Math.max(b[2],c[2]);b[3]=Math.max(b[3],c[3])}function g(b,c){return b.bbox[0]-c.bbox[0]}
function h(b,c){return b.bbox[1]-c.bbox[1]}function k(b){return(b[2]-b[0])*(b[3]-b[1])}function l(b){return b[2]-b[0]+(b[3]-b[1])}function n(b,c){return b[0]<=c[0]&&b[1]<=c[1]&&c[2]<=b[2]&&c[3]<=b[3]}function q(b,c){return c[0]<=b[2]&&c[1]<=b[3]&&c[2]>=b[0]&&c[3]>=b[1]}function B(b,c,d,e,f){for(var h=[c,d],g;h.length;)d=h.pop(),c=h.pop(),d-c<=e||(g=c+Math.ceil((d-c)/e/2)*e,uc(b,c,d,g,f),h.push(c,g,g,d))}function uc(b,c,d,e,f){for(var h,g,k,m,l;d>c;){600<d-c&&(h=d-c+1,g=e-c+1,k=Math.log(h),m=.5*Math.exp(2*
k/3),l=.5*Math.sqrt(k*m*(h-m)/h)*(0>g-h/2?-1:1),k=Math.max(c,Math.floor(e-g*m/h+l)),g=Math.min(d,Math.floor(e+(h-g)*m/h+l)),uc(b,k,g,e,f));h=b[e];g=c;m=d;Ea(b,c,e);for(0<f(b[d],h)&&Ea(b,c,d);g<m;){Ea(b,g,m);g++;for(m--;0>f(b[g],h);)g++;for(;0<f(b[m],h);)m--}0===f(b[c],h)?Ea(b,c,m):(m++,Ea(b,m,d));m<=e&&(c=m+1);e<=m&&(d=m-1)}}function Ea(b,c,d){var e=b[c];b[c]=b[d];b[d]=e}c.prototype={all:function(){return this.U(this.data,[])},search:function(b){var c=this.data,d=[],e=this.s;if(!q(b,c.bbox))return d;
for(var f=[],h,g,k,m;c;){h=0;for(g=c.children.length;h<g;h++)k=c.children[h],m=c.o?e(k):k.bbox,q(b,m)&&(c.o?d.push(k):n(b,m)?this.U(k,d):f.push(k));c=f.pop()}return d},load:function(b){if(!b||!b.length)return this;if(b.length<this.Y){for(var c=0,d=b.length;c<d;c++)this.insert(b[c]);return this}b=this.W(b.slice(),0,b.length-1,0);this.data.children.length?this.data.height===b.height?this.Z(this.data,b):(this.data.height<b.height&&(c=this.data,this.data=b,b=c),this.X(b,this.data.height-b.height-1,!0)):
this.data=b;return this},insert:function(b){b&&this.X(b,this.data.height-1);return this},clear:function(){this.data={children:[],height:1,bbox:[Infinity,Infinity,-Infinity,-Infinity],o:!0};return this},remove:function(b){if(!b)return this;for(var c=this.data,d=this.s(b),e=[],f=[],h,g,k,m;c||e.length;){c||(c=e.pop(),g=e[e.length-1],h=f.pop(),m=!0);if(c.o&&(k=c.children.indexOf(b),-1!==k)){c.children.splice(k,1);e.push(c);this.ra(e);break}m||c.o||!n(c.bbox,d)?g?(h++,c=g.children[h],m=!1):c=null:(e.push(c),
f.push(h),h=0,g=c,c=c.children[0])}return this},s:function(b){return b},R:function(b,c){return b[0]-c[0]},S:function(b,c){return b[1]-c[1]},toJSON:function(){return this.data},U:function(b,c){for(var d=[];b;)b.o?c.push.apply(c,b.children):d.push.apply(d,b.children),b=d.pop();return c},W:function(b,c,e,f){var h=e-c+1,g=this.P,k;if(h<=g)return k={children:b.slice(c,e+1),height:1,bbox:null,o:!0},d(k,this.s),k;f||(f=Math.ceil(Math.log(h)/Math.log(g)),g=Math.ceil(h/Math.pow(g,f-1)));k={children:[],height:f,
bbox:null};var h=Math.ceil(h/g),g=h*Math.ceil(Math.sqrt(g)),l,m,n;for(B(b,c,e,g,this.R);c<=e;c+=g)for(m=Math.min(c+g-1,e),B(b,c,m,h,this.S),l=c;l<=m;l+=h)n=Math.min(l+h-1,m),k.children.push(this.W(b,l,n,f-1));d(k,this.s);return k},qa:function(b,c,d,e){for(var f,h,g,l,m,n,q,B;;){e.push(c);if(c.o||e.length-1===d)break;q=B=Infinity;f=0;for(h=c.children.length;f<h;f++)g=c.children[f],m=k(g.bbox),n=g.bbox,n=(Math.max(n[2],b[2])-Math.min(n[0],b[0]))*(Math.max(n[3],b[3])-Math.min(n[1],b[1]))-m,n<B?(B=n,
q=m<q?m:q,l=g):n===B&&m<q&&(q=m,l=g);c=l}return c},X:function(b,c,d){var e=this.s;d=d?b.bbox:e(b);var e=[],h=this.qa(d,this.data,c,e);h.children.push(b);for(f(h.bbox,d);0<=c;)if(e[c].children.length>this.P)this.ta(e,c),c--;else break;this.na(d,e,c)},ta:function(b,c){var e=b[c],f=e.children.length,h=this.Y;this.oa(e,h,f);f=this.pa(e,h,f);f={children:e.children.splice(f,e.children.length-f),height:e.height};e.o&&(f.o=!0);d(e,this.s);d(f,this.s);c?b[c-1].children.push(f):this.Z(e,f)},Z:function(b,c){this.data=
{children:[b,c],height:b.height+1};d(this.data,this.s)},pa:function(b,c,d){var f,h,g,l,n,m,q;n=m=Infinity;for(f=c;f<=d-c;f++)h=e(b,0,f,this.s),g=e(b,f,d,this.s),l=Math.max(0,Math.min(h[2],g[2])-Math.max(h[0],g[0]))*Math.max(0,Math.min(h[3],g[3])-Math.max(h[1],g[1])),h=k(h)+k(g),l<n?(n=l,q=f,m=h<m?h:m):l===n&&h<m&&(m=h,q=f);return q},oa:function(b,c,d){var e=b.o?this.R:g,f=b.o?this.S:h,k=this.V(b,c,d,e);c=this.V(b,c,d,f);k<c&&b.children.sort(e)},V:function(b,c,d,h){b.children.sort(h);h=this.s;var g=
e(b,0,c,h),k=e(b,d-c,d,h),n=l(g)+l(k),q,m;for(q=c;q<d-c;q++)m=b.children[q],f(g,b.o?h(m):m.bbox),n+=l(g);for(q=d-c-1;q>=c;q--)m=b.children[q],f(k,b.o?h(m):m.bbox),n+=l(k);return n},na:function(b,c,d){for(;0<=d;d--)f(c[d].bbox,b)},ra:function(b){for(var c=b.length-1,e;0<=c;c--)0===b[c].children.length?0<c?(e=b[c-1].children,e.splice(e.indexOf(b[c]),1)):this.clear():d(b[c],this.s)},sa:function(b){var c=["return a"," - b",";"];this.R=new Function("a","b",c.join(b[0]));this.S=new Function("a","b",c.join(b[1]));
this.s=new Function("a","return [a"+b.join(", a")+"];")}};"undefined"!==typeof b?b.aa=c:"undefined"!==typeof self?self.a=c:window.a=c})();Ec=b.aa})();function Fc(b){this.b=Ec(b);this.a={}}p=Fc.prototype;p.insert=function(b,c){var d=[b[0],b[1],b[2],b[3],c];this.b.insert(d);this.a[w(c)]=d};p.load=function(b,c){for(var d=Array(c.length),e=0,f=c.length;e<f;e++){var g=b[e],h=c[e],g=[g[0],g[1],g[2],g[3],h];d[e]=g;this.a[w(h)]=g}this.b.load(d)};p.remove=function(b){b=w(b);var c=this.a[b];delete this.a[b];return null!==this.b.remove(c)};function Gc(b){return b.b.all().map(function(b){return b[4]})}
p.forEach=function(b,c){for(var d=Gc(this),e,f=0,g=d.length;f<g&&!(e=b.call(c,d[f]));f++);return e};p.clear=function(){this.b.clear();this.a={}};p.u=function(){return this.b.data.bbox};function Hc(b){b=b||{};Ob.call(this,{ua:b.ua,va:b.va,projection:void 0,state:"ready",ja:void 0!==b.ja?b.ja:!0});var c=void 0!==b.ha?b.ha:!0;this.a=c?new Fc:null;this.O=new Fc;this.f={};this.c={};this.g={};this.h={};this.i=null;var d,e;b.features instanceof Kb?(d=b.features,e=d.a):ca(b.features)&&(e=b.features);c||void 0!==d||(d=new Kb(e));if(void 0!==e){var f=e,g,h=[],k=[],l=[];e=0;for(b=f.length;e<b;e++)c=f[e],g=w(c).toString(),Ic(this,g,c)&&k.push(c);e=0;for(b=k.length;e<b;e++)c=k[e],g=w(c).toString(),
Jc(this,g,c),(f=c.w())?(g=f.u(),h.push(g),l.push(c)):this.f[g]=c;this.a&&this.a.load(h,l);e=0;for(b=k.length;e<b;e++)J(this,new Kc("addfeature",k[e]))}void 0!==d&&Lc(this,d)}y(Hc,Ob);function Mc(b,c){var d=w(c).toString();if(Ic(b,d,c)){Jc(b,d,c);var e=c.w();e?(d=e.u(),b.a&&b.a.insert(d,c)):b.f[d]=c;J(b,new Kc("addfeature",c))}}function Jc(b,c,d){b.h[c]=[H(d,"change",b.l,!1,b),H(d,"propertychange",b.l,!1,b)]}
function Ic(b,c,d){var e=!0,f=d.g;void 0!==f?f.toString()in b.c?e=!1:b.c[f.toString()]=d:b.g[c]=d;return e}function Lc(b,c){var d=!1;H(b,"addfeature",function(b){d||(d=!0,c.push(b.feature),d=!1)});H(b,"removefeature",function(b){d||(d=!0,c.remove(b.feature),d=!1)});H(c,"add",function(b){d||(b=b.element,d=!0,Mc(this,b),this.b(),d=!1)},!1,b);H(c,"remove",function(b){d||(b=b.element,d=!0,Nc(this,b),d=!1)},!1,b);b.i=c}
Hc.prototype.clear=function(b){if(b){for(var c in this.h)this.h[c].forEach(I);this.i||(this.h={},this.c={},this.g={})}else b=this.D,this.a&&(this.a.forEach(b,this),sa(this.f,b,this));this.i&&this.i.clear();this.a&&this.a.clear();this.O.clear();this.f={};J(this,new Kc("clear"));this.b()};Hc.prototype.u=function(){return this.a.u()};
Hc.prototype.l=function(b){b=b.target;var c=w(b).toString(),d=b.w();if(d)if(d=d.u(),c in this.f)delete this.f[c],this.a&&this.a.insert(d,b);else{if(this.a){var e=this.a,f=w(b),f=e.a[f].slice(0,4);if(f[0]!=d[0]||f[2]!=d[2]||f[1]!=d[1]||f[3]!=d[3])e.remove(b),e.insert(d,b)}}else c in this.f||(this.a&&this.a.remove(b),this.f[c]=b);d=b.g;void 0!==d?(d=d.toString(),c in this.g?(delete this.g[c],this.c[d]=b):this.c[d]!==b&&(Oc(this,b),this.c[d]=b)):c in this.g||(Oc(this,b),this.g[c]=b);this.b();J(this,
new Kc("changefeature",b))};function Nc(b,c){var d=w(c).toString();d in b.f?delete b.f[d]:b.a&&b.a.remove(c);b.D(c);b.b()}Hc.prototype.D=function(b){var c=w(b).toString();this.h[c].forEach(I);delete this.h[c];var d=b.g;void 0!==d?delete this.c[d.toString()]:delete this.g[c];J(this,new Kc("removefeature",b))};function Oc(b,c){for(var d in b.c)if(b.c[d]===c){delete b.c[d];break}}function Kc(b,c){F.call(this,b);this.feature=c}y(Kc,F);ub(dc);ub(hc);hc.forEach(function(b){dc.forEach(function(c){vb(b,c,ec);vb(c,b,fc)})});function Pc(){this.C=null};function Qc(){this.C=null}y(Qc,Pc);function Rc(b){var c=typeof b;return"object"==c&&null!=b||"function"==c?b:v(b)?(b=zc(b))?b:null:null}Qc.prototype.g=function(){return"json"};function Sc(b,c){R.call(this);this.c(b,c)}y(Sc,R);Sc.prototype.clone=function(){var b=new Sc(null),c=this.a.slice();S(b,this.layout,c);b.b();return b};Sc.prototype.g=function(){return"LineString"};Sc.prototype.c=function(b,c){b?(Fb(this,c,b,1),this.a||(this.a=[]),this.a.length=Gb(this.a,0,b,this.f)):S(this,"XY",null);this.b()};function Tc(b,c){R.call(this);this.h=[];this.c(b,c)}y(Tc,R);Tc.prototype.clone=function(){var b=new Tc(null),c=this.a.slice(),d=this.h.slice();S(b,this.layout,c);b.h=d;b.b();return b};Tc.prototype.g=function(){return"MultiLineString"};Tc.prototype.c=function(b,c){if(b){Fb(this,c,b,2);this.a||(this.a=[]);var d=Hb(this.a,0,b,this.f,this.h);this.a.length=0===d.length?0:d[d.length-1]}else d=this.h,S(this,"XY",null),this.h=d;this.b()};function Uc(b,c){R.call(this);this.c(b,c)}y(Uc,R);Uc.prototype.clone=function(){var b=new Uc(null),c=this.a.slice();S(b,this.layout,c);b.b();return b};Uc.prototype.g=function(){return"MultiPoint"};Uc.prototype.c=function(b,c){b?(Fb(this,c,b,1),this.a||(this.a=[]),this.a.length=Gb(this.a,0,b,this.f)):S(this,"XY",null);this.b()};function Vc(b,c){R.call(this);this.h=[];this.c(b,c)}y(Vc,R);Vc.prototype.clone=function(){var b=new Vc(null),c=wa(this.h),d=this.a.slice();S(b,this.layout,d);b.h=c;b.b();return b};Vc.prototype.g=function(){return"MultiPolygon"};
Vc.prototype.c=function(b,c){if(b){Fb(this,c,b,3);this.a||(this.a=[]);var d=this.a,e=this.f,f=this.h,g=0,f=f?f:[],h=0,k,l;k=0;for(l=b.length;k<l;++k)g=Hb(d,g,b[k],e,f[h]),f[h++]=g,g=g[g.length-1];f.length=h;0===f.length?this.a.length=0:(d=f[f.length-1],this.a.length=0===d.length?0:d[d.length-1])}else d=this.h,S(this,"XY",null),this.h=d;this.b()};function Y(b){Q.call(this);this.a=b?b:null;Wc(this)}y(Y,Q);function Wc(b){var c,d;if(b.a)for(c=0,d=b.a.length;c<d;++c)H(b.a[c],"change",b.b,!1,b)}Y.prototype.clone=function(){var b=new Y(null),c=this.a,d=[],e,f;e=0;for(f=c.length;e<f;++e)d.push(c[e].clone());if(b.a)for(c=0,e=b.a.length;c<e;++c)db(b.a[c],"change",b.b,!1,b);b.a=d;Wc(b);b.b();return b};
Y.prototype.l=function(b){pb(Infinity,Infinity,-Infinity,-Infinity,b);for(var c=this.a,d=0,e=c.length;d<e;++d){var f=b,g=c[d].u();g[0]<f[0]&&(f[0]=g[0]);g[2]>f[2]&&(f[2]=g[2]);g[1]<f[1]&&(f[1]=g[1]);g[3]>f[3]&&(f[3]=g[3])}return b};Y.prototype.g=function(){return"GeometryCollection"};Y.prototype.i=function(b){var c=this.a,d,e;d=0;for(e=c.length;d<e;++d)c[d].i(b);this.b()};function Xc(b){b=b?b:{};this.C=null;this.C=P(b.C?b.C:"EPSG:4326");this.a=b.Ea}y(Xc,Qc);
function Yc(b,c){var d;if(b){d=(0,Zc[b.type])(b);var e=c?P(c.I):null,f=c?P(c.B):null;if(e&&f&&e!==f&&(e.a===f.a?e.b!==f.b:xb(e,f)!==Ab))if(d instanceof Q)d=d.transform(f,e);else{e=Cb(f,e);d=[d[0],d[1],d[0],d[3],d[2],d[1],d[2],d[3]];e(d,d,2);var f=[d[0],d[2],d[4],d[6]],g=[d[1],d[3],d[5],d[7]];d=Math.min.apply(null,f);e=Math.min.apply(null,g);f=Math.max.apply(null,f);g=Math.max.apply(null,g);d=pb(d,e,f,g,void 0)}}else d=null;return d}
var Zc={Point:function(b){return new T(b.coordinates)},LineString:function(b){return new Sc(b.coordinates)},Polygon:function(b){return new Ib(b.coordinates)},MultiPoint:function(b){return new Uc(b.coordinates)},MultiLineString:function(b){return new Tc(b.coordinates)},MultiPolygon:function(b){return new Vc(b.coordinates)},GeometryCollection:function(b,c){var d=b.geometries.map(function(b){return Yc(b,c)});return new Y(d)}};
function $c(b,c,d){d=Yc(c.geometry,d);var e=new W;b.a&&xc(e,b.a);ob(e,e.a,d);void 0!==c.id&&(e.g=c.id,e.b());c.properties&&lb(e,c.properties);return e};function ad(b,c){this.c=this.h=this.f="";this.i=null;this.g=this.b="";this.j=!1;var d;b instanceof ad?(this.j=t(c)?c:b.j,bd(this,b.f),this.h=b.h,this.c=b.c,cd(this,b.i),this.b=b.b,dd(this,b.a.clone()),this.g=b.g):b&&(d=String(b).match(Ac))?(this.j=!!c,bd(this,d[1]||"",!0),this.h=ed(d[2]||""),this.c=ed(d[3]||"",!0),cd(this,d[4]),this.b=ed(d[5]||"",!0),dd(this,d[6]||"",!0),this.g=ed(d[7]||"")):(this.j=!!c,this.a=new fd(null,0,this.j))}
ad.prototype.toString=function(){var b=[],c=this.f;c&&b.push(gd(c,hd,!0),":");var d=this.c;if(d||"file"==c)b.push("//"),(c=this.h)&&b.push(gd(c,hd,!0),"@"),b.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.i,null!=d&&b.push(":",String(d));if(d=this.b)this.c&&"/"!=d.charAt(0)&&b.push("/"),b.push(gd(d,"/"==d.charAt(0)?id:jd,!0));(d=this.a.toString())&&b.push("?",d);(d=this.g)&&b.push("#",gd(d,kd));return b.join("")};
ad.prototype.resolve=function(b){var c=this.clone(),d=!!b.f;d?bd(c,b.f):d=!!b.h;d?c.h=b.h:d=!!b.c;d?c.c=b.c:d=null!=b.i;var e=b.b;if(d)cd(c,b.i);else if(d=!!b.b){if("/"!=e.charAt(0))if(this.c&&!this.b)e="/"+e;else{var f=c.b.lastIndexOf("/");-1!=f&&(e=c.b.substr(0,f+1)+e)}f=e;if(".."==f||"."==f)e="";else if(z(f,"./")||z(f,"/.")){for(var e=0==f.lastIndexOf("/",0),f=f.split("/"),g=[],h=0;h<f.length;){var k=f[h++];"."==k?e&&h==f.length&&g.push(""):".."==k?((1<g.length||1==g.length&&""!=g[0])&&g.pop(),
e&&h==f.length&&g.push("")):(g.push(k),e=!0)}e=g.join("/")}else e=f}d?c.b=e:d=""!==b.a.toString();d?dd(c,ed(b.a.toString())):d=!!b.g;d&&(c.g=b.g);return c};ad.prototype.clone=function(){return new ad(this)};function bd(b,c,d){b.f=d?ed(c,!0):c;b.f&&(b.f=b.f.replace(/:$/,""))}function cd(b,c){if(c){c=Number(c);if(isNaN(c)||0>c)throw Error("Bad port number "+c);b.i=c}else b.i=null}function dd(b,c,d){c instanceof fd?(b.a=c,ld(b.a,b.j)):(d||(c=gd(c,md)),b.a=new fd(c,0,b.j))}
function ed(b,c){return b?c?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function gd(b,c,d){return v(b)?(b=encodeURI(b).replace(c,nd),d&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function nd(b){b=b.charCodeAt(0);return"%"+(b>>4&15).toString(16)+(b&15).toString(16)}var hd=/[#\/\?@]/g,jd=/[\#\?:]/g,id=/[\#\?]/g,md=/[\#\?@]/g,kd=/#/g;function fd(b,c,d){this.c=this.a=null;this.b=b||null;this.f=!!d}
function Z(b){b.a||(b.a=new Rb,b.c=0,b.b&&Bc(b.b,function(c,d){b.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}p=fd.prototype;p.ba=function(){Z(this);return this.c};p.add=function(b,c){Z(this);this.b=null;b=od(this,b);var d=this.a.get(b);d||Sb(this.a,b,d=[]);d.push(c);this.c++;return this};p.remove=function(b){Z(this);b=od(this,b);return U(this.a.b,b)?(this.b=null,this.c-=this.a.get(b).length,this.a.remove(b)):!1};p.clear=function(){this.a=this.b=null;this.c=0};
function pd(b,c){Z(b);c=od(b,c);return U(b.a.b,c)}p.A=function(){Z(this);for(var b=this.a.v(),c=this.a.A(),d=[],e=0;e<c.length;e++)for(var f=b[e],g=0;g<f.length;g++)d.push(c[e]);return d};p.v=function(b){Z(this);var c=[];if(v(b))pd(this,b)&&(c=na(c,this.a.get(od(this,b))));else{b=this.a.v();for(var d=0;d<b.length;d++)c=na(c,b[d])}return c};p.get=function(b,c){var d=b?this.v(b):[];return 0<d.length?String(d[0]):c};
p.toString=function(){if(this.b)return this.b;if(!this.a)return"";for(var b=[],c=this.a.A(),d=0;d<c.length;d++)for(var e=c[d],f=encodeURIComponent(String(e)),e=this.v(e),g=0;g<e.length;g++){var h=f;""!==e[g]&&(h+="="+encodeURIComponent(String(e[g])));b.push(h)}return this.b=b.join("&")};p.clone=function(){var b=new fd;b.b=this.b;this.a&&(b.a=this.a.clone(),b.c=this.c);return b};function od(b,c){var d=String(c);b.f&&(d=d.toLowerCase());return d}
function ld(b,c){c&&!b.f&&(Z(b),b.b=null,b.a.forEach(function(b,c){var f=c.toLowerCase();if(c!=f&&(this.remove(c),this.remove(f),0<b.length)){this.b=null;var g=this.a,f=od(this,f),h;h=b.length;if(0<h){for(var k=Array(h),l=0;l<h;l++)k[l]=b[l];h=k}else h=[];Sb(g,f,h);this.c+=b.length}},b));b.f=c}p.extend=function(b){for(var c=0;c<arguments.length;c++)Qb(arguments[c],function(b,c){this.add(c,b)},this)};var qd=angular.module("ngeo",[]);qd.directive("ngeoMap",function(){return{restrict:"A",link:function(b,c,d){b.$eval(d.ngeoMap).f(c[0])}}});function rd(){return{restrict:"A",link:function(b,c,d){var e=b.$eval(d.ngeoSearch),f=b.$eval(d.ngeoSearchDatasets).slice();f.unshift(e);c.typeahead.apply(c,f);d=b.$eval(d.ngeoSearchListeners);var g=rd.a(d);c.on("typeahead:open",function(){b.$apply(function(){g.open()})});c.on("typeahead:close",function(){b.$apply(function(){g.close()})});c.on("typeahead:cursorchange",function(c,d,e){b.$apply(function(){g.L(c,d,e)})});c.on("typeahead:select",function(c,d,e){b.$apply(function(){g.select(c,d,e)})});
c.on("typeahead:autocomplete",function(c,d,e){b.$apply(function(){g.autocomplete(c,d,e)})})}}}rd.a=function(b){var c;t(b)?c={open:t(b.open)?b.open:u,close:t(b.close)?b.close:u,L:t(b.L)?b.L:u,select:t(b.select)?b.select:u,autocomplete:t(b.autocomplete)?b.autocomplete:u}:c={open:u,close:u,L:u,select:u,autocomplete:u};return c};qd.directive("ngeoSearch",rd);qd.value("ngeoCreateGeoJSONBloodhound",function(b,c,d,e,f){var g=new Xc;b={remote:{url:b,prepare:function(b,c){c.url=c.url.replace("%QUERY",b);c.dataType="jsonp";return c},transform:function(b){t(c)&&(b={type:"FeatureCollection",features:A.filter.call(b.features,c,void 0)});var f=b,l={I:d,B:e};b=Rc(f);var n;l&&(n=l.B?l.B:(n=Rc(f).crs)?"name"==n.type?P(n.properties.name):"EPSG"==n.type?P("EPSG:"+n.properties.code):null:g.C,n={B:n,I:l.I});var q;n&&(q={I:n.I,B:n.B?n.B:g.C,wa:n.wa});if("Feature"==b.type)b=
[$c(g,b,q)];else if("FeatureCollection"==b.type){l=[];b=b.features;n=0;for(f=b.length;n<f;++n)l.push($c(g,b[n],q));b=l}else b=[];return b}},datumTokenizer:u,queryTokenizer:Bloodhound.tokenizers.whitespace};f&&ya(b,f);return new Bloodhound(b)});function sd(b){return function(c,d,e){var f=null;return function(){var g=this,h=arguments;null===f||b.cancel(f);f=b(function(){f=null;c.apply(g,h)},d,e)}}}sd.$inject=["$timeout"];qd.factory("ngeoDebounce",sd);function td(){this.b={};this.a=[];this.c=new Hc({ha:!1});new wc({source:this.c,style:x(this.f,this),ya:!0,za:!0})}td.prototype.clear=function(b){var c=this.a[b],d;for(d in c.features){var e=c.features[d],f=b,g=w(e).toString();delete this.b[g];delete this.a[f].features[g];Nc(this.c,e)}};td.prototype.f=function(b,c){var d=w(b).toString();return this.a[this.b[d]].xa(b,c)};function ud(b,c){this.b=b;this.a=c}ud.prototype.clear=function(){this.b.clear(this.a)};qd.service("ngeoFeatureOverlayMgr",td);function vd(b){this.a=b instanceof ad?b.clone():new ad(b,void 0)}function wd(b){t(void 0)?(b=b.a.clone(),b.a.extend(void 0)):b=b.a;return b.toString()}function xd(b,c){var d=b.a.a;sa(c,function(b,c){var g=c;Z(d);d.b=null;g=od(d,g);pd(d,g)&&(d.c-=d.a.get(g).length);Sb(d.a,g,[b]);d.c++})}
function yd(b,c){var d=c.history,e=new vd(c.location),f=wd(e);b.$watch(function(){var c=wd(e);f!==c&&b.$evalAsync(function(){f=c;t(d)&&t(d.replaceState)&&d.replaceState(null,"",c);b.$broadcast("ngeoLocationChange")})});return e}yd.$inject=["$rootScope","$window"];qd.factory("ngeoLocation",yd);var zd=angular.module("gmf",[qd.name]);zd.directive("gmfMap",function(){return{scope:{getMapFn:"&gmfMapMap"},controller:"GmfMapController",controllerAs:"ctrl",template:'<div ngeo-map="ctrl.map"></div>'}});function Ad(b,c,d){this.map=b=b.getMapFn();var e=b.a();b=c.a.a.get("map_x");var f=c.a.a.get("map_y"),g=c.a.a.get("map_zoom");t(b)&&t(f)&&e.h([+b,+f]);t(g)&&e.i(+g);e.on("propertychange",d(function(){var b=e.c(),d=e.f();xd(c,{map_zoom:d,map_x:Math.round(b[0]),map_y:Math.round(b[1])})},300,!0))}Ad.$inject=["$scope","ngeoLocation","ngeoDebounce"];
zd.controller("GmfMapController",Ad);zd.directive("gmfMobileNav",function(){return{restrict:"A",link:function(b,c){function d(b,c){g.toggleClass("back",c);g.find("nav:not(.active)").remove();g.find("nav.active").removeClass("active").addClass("slide-out");h.toggleClass("active",0<e.length);var d=$("<nav>");d.append($("<span>",{text:b.attr("data-header-title")}));g.append(d);window.setTimeout(function(){d.addClass("active")},0)}var e=[],f=$(c.find(".active.slide")),g=$(c.find("> header")),h=$(c.find("header > .go-back"));c.find("[data-toggle=slide-in]").on("click",
function(){var b=$(this).parents(".slide");e.push(b);b.addClass("slide-out").removeClass("active");b=$($(this).attr("href"));b.addClass("active");d(b,!1);f=b});h.click(function(){f.removeClass("active");var b=e.pop();b.addClass("active").removeClass("slide-out");d(b,!0);f=b})}}});zd.directive("gmfSearch",function(){return{restrict:"E",scope:{getMapFn:"&gmfSearchMap",getDatasourcesFn:"&gmfSearchDatasources",clearbutton:"=gmfSearchClearbutton"},controller:"GmfSearchController",controllerAs:"ctrl",template:'<div class="gmf-search"><input type="text" placeholder="search\u2026" ng-model="ctrl.input_value" ngeo-search="ctrl.options" ngeo-search-datasets="ctrl.datasets" ngeo-search-listeners="ctrl.listeners"><div class="clear-button ng-hide" ng-hide="!ctrl.clearButton || ctrl.input_value == \'\'" ng-click="ctrl.clear()"></div></div>',
link:function(b,c){if(!b.clearbutton){var d=b.ctrl;c.find("input").on("focus blur",function(){d.clear()})}}}});
function Bd(b,c,d,e){this.a=b;this.g=c;this.j=d;this.b=this.a.getMapFn();this.clearButton=this.a.clearbutton||!1;b=e.a.length;e.a.push({xa:vc,features:{}});this.f=new ud(e,b);this.c=this.a.getDatasourcesFn();this.options={highlight:!0,hint:void 0,minLength:void 0,rateLimitBy:"throttle",rateLimitWait:50};this.datasets=[];this.input_value="";for(e=0;e<this.c.length;e++){b=this.c[e];c=t(b.groupValues)&&t(b.groupsKey)?b.groupValues:[];do{var f=b.datasetTitle;0<c.length?(d=Cd(b.groupsKey,c[0]),f=f+c[0],
c.shift()):d=void 0;this.datasets.push(Dd(this,{bloodhoundOptions:b.bloodhoundOptions,datasetTitle:f,groupsKey:b.groupsKey,labelKey:b.labelKey,projection:b.projection,typeaheadDatasetOptions:b.typeaheadDatasetOptions,url:b.url},d))}while(0<c.length)}this.listeners={select:x(Ed,this),close:x(Fd,this)}}aa("gmf.SearchController",Bd);Bd.$inject=["$scope","$compile","ngeoCreateGeoJSONBloodhound","ngeoFeatureOverlayMgr"];
function Dd(b,c,d){var e=b.a,f=b.g;b={source:Gd(b,c,d).ttAdapter(),display:function(b){return b.get(c.labelKey)},templates:{header:function(){return'<div class="search-header">'+c.datasetTitle+"</div>"},suggestion:function(b){var d=e.$new(!0);d.feature=b;var k='<p class="search-label">'+b.get(c.labelKey)+"</p>";c.groupsKey&&(k+='<p class="search-group">'+b.get(c.groupsKey)+"</p>");return f('<div class="search-datum">'+k+"</div>")(d)}}};c.typeaheadDatasetOptions&&ya(b,c.typeaheadDatasetOptions);return b}
function Cd(b,c){return function(d){return d.properties[b]===c}}function Gd(b,c,d){var e=b.b.a().g();b=b.j(c.url,d,P(e.a),P(c.projection),c.bloodhoundOptions);b.initialize();return b}function Hd(b){if(b.clearButton){var c=$(".twitter-typeahead .tt-menu");b.input_value?c.show():c.hide()}}Bd.prototype.clear=function(){var b=$(".twitter-typeahead"),c=b.children(".tt-menu"),b=b.children("input");this.input_value="";$(b[1]).typeahead("val","");c.children(".tt-dataset").empty();Hd(this)};
Bd.prototype.clear=Bd.prototype.clear;function Ed(b,c){var d=c.w();this.f.clear();var e=this.f,f=e.b,e=e.a,g=w(c).toString();f.b[g]=e;f.a[e].features[g]=c;f=f.c;Mc(f,c);f.b();d="GeometryCollection"===d.g()?d.u():d;f=this.b.c();this.b.a().a(d,f,{Ia:16});this.clear()}function Fd(){Hd(this)}zd.controller("GmfSearchController",Bd);angular.module("app",[zd.name]);}).call(window);
